<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raiyan Hasan - Web Developer Portfolio </title>
    <meta name="description"
        content="Welcome to the enhanced portfolio of Raiyan Hasan (v3.4), an IT student at MIT Muzaffarpur. Features enhanced UI, micro-interactions, animations, CV download, accessible modals, and a functional contact form UI.">
    <meta name="keywords"
        content="Raiyan Hasan, web developer, portfolio, MIT Muzaffarpur, Python, HTML, CSS, JavaScript, Tailwind CSS, front-end developer, student developer, dark mode, accessible portfolio, focus trapping, preloader, resume download, contact form UI, ui improvements, microinteractions">
    <meta name="author" content="Raiyan Hasan">
    <link rel="canonical" href="https://hasanraiyan.github.io/Portfolio/">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Raiyan Hasan - Web Developer Portfolio v3.4 (Enhanced UI)">
    <meta property="og:description"
        content="Explore the enhanced web development portfolio of Raiyan Hasan (v3.4), student at MIT Muzaffarpur. Featuring UI improvements, micro-interactions, preloader, CV download, project details via modals, improved accessibility, and contact form UI.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hasanraiyan.github.io/Portfolio/">
    <meta property="og:image" content="https://hasanraiyan.github.io/Portfolio/images/user1.png">
    <!-- Ensure this path is correct -->
    <meta property="og:image:alt" content="Raiyan Hasan Profile Picture">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Raiyan Hasan - Web Developer Portfolio v3.4 (Enhanced UI)">
    <meta name="twitter:description"
        content="Explore the enhanced web development portfolio of Raiyan Hasan (v3.4), student at MIT Muzaffarpur. Featuring UI improvements, micro-interactions, preloader, CV download, project details via modals, improved accessibility, and contact form UI.">
    <meta name="twitter:image" content="https://hasanraiyan.github.io/Portfolio/images/user1.png">
    <!-- Ensure this path is correct -->
    <meta name="twitter:image:alt" content="Raiyan Hasan Profile Picture">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <script src="https://kit.fontawesome.com/002a13abdf.js" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- PRODUCTION NOTE: The Tailwind CDN is for development only. For production, install Tailwind: https://tailwindcss.com/docs/installation -->

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif']
                    },
                    colors: {
                        primary: '#0a66c2', // LinkedIn Blue
                        'primary-darker': '#004182',
                        secondary: '#28a745', // Green
                        accent: '#ffc107', // Yellow
                        'text-main': '#1f2937', // gray-800
                        'text-light': '#4b5563', // gray-600
                        'bg-light': '#f8fafc', // slate-50
                        'bg-surface': '#ffffff', // white
                        'border-light': '#e5e7eb', // gray-200
                        'glass-bg': 'rgba(255, 255, 255, 0.6)',
                        'glass-border': 'rgba(255, 255, 255, 0.3)',
                        'dark-bg-input': '#374151', // gray-700
                        'dark-bg-surface-card': '#1f2937', // gray-800 (match surface)
                        dark: {
                            primary: '#38bdf8', // sky-400
                            'primary-darker': '#0ea5e9', // sky-500
                            secondary: '#4ade80', // green-400
                            accent: '#facc15', // yellow-400
                            'text-main': '#e5e7eb', // gray-200
                            'text-light': '#9ca3af', // gray-400
                            'bg-dark': '#111827', // gray-900
                            'bg-surface': '#1f2937', // gray-800
                            'border-dark': '#374151', // gray-700
                            'glass-bg': 'rgba(31, 41, 55, 0.65)', // gray-800 with alpha
                            'glass-border': 'rgba(55, 65, 81, 0.3)', // gray-700 with alpha
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'fade-in-up': 'fadeInUp 0.6s ease-out forwards',
                        'slide-in-left': 'slideInLeft 0.6s ease-out forwards',
                        'slide-in-right': 'slideInRight 0.6s ease-out forwards',
                        'pulse-glow': 'pulseGlow 2.5s infinite ease-in-out',
                        'spin': 'spin 1s linear infinite', // For preloader
                        'gradient-shift': 'gradientShift 15s ease infinite', // For hero background
                        'show-more-item': 'showMoreItem 0.5s ease-out forwards', // For show more items
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' }, },
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(20px)' }, '100%': { opacity: '1', transform: 'translateY(0)' }, },
                        slideInLeft: { '0%': { opacity: '0', transform: 'translateX(-30px)' }, '100%': { opacity: '1', transform: 'translateX(0)' }, },
                        slideInRight: { '0%': { opacity: '0', transform: 'translateX(30px)' }, '100%': { opacity: '1', transform: 'translateX(0)' }, },
                        pulseGlow: {
                            '0%, 100%': { boxShadow: '0 0 8px rgba(10, 102, 194, 0.2)', },
                            '50%': { boxShadow: '0 0 25px rgba(10, 102, 194, 0.6)', },
                        },
                        spin: { 'from': { transform: 'rotate(0deg)' }, 'to': { transform: 'rotate(360deg)' }, },
                        gradientShift: { // Subtle gradient animation for hero
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        showMoreItem: { // Animation for items revealed by "Show More"
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                    },
                    backdropBlur: { xs: '2px', sm: '4px', md: '8px', lg: '12px', xl: '16px', },
                    boxShadow: {
                        'glass-dark': 'inset 0 1px 1px rgba(255, 255, 255, 0.05), 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)',
                    }
                },
            },
            plugins: [],
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            html {
                @apply font-poppins antialiased bg-bg-light text-text-main dark:bg-dark-bg-dark dark:text-dark-text-main transition-colors duration-300 ease-in-out;
            }
            body {
                 @apply transition-colors duration-300 ease-in-out;
            }

            /* Reduced Motion Preferences */
            @media (prefers-reduced-motion: reduce) {
                html { scroll-behavior: auto; }
                *, *::before, *::after {
                    animation-duration: 1ms !important;
                    animation-iteration-count: 1 !important;
                    transition-duration: 1ms !important;
                    transition-delay: 0ms !important;
                    scroll-behavior: auto !important;
                }
                .animate-bounce { animation: none; }
                .animate-pulse-glow { animation: none; }
                .animate-spin { animation: none; }
                .animate-gradient-shift { animation: none; } /* Disable background shift */
                .animate-show-more-item { animation: none; } /* Disable show more animation */
                /* Remove transforms from interactive elements */
                .group:hover .group-hover\:scale-\[1\.02\],
                .hover\:scale-105, .focus-visible\:scale-105,
                .hover\:scale-110, .focus-visible\:scale-110,
                .group:hover .group-hover\:translate-x-1 {
                     transform: none !important;
                }
            }

            /* Scroll Animations */
            .animate-on-scroll { @apply opacity-0; }
            .animate-on-scroll { @apply transition-all duration-700 ease-out; }
            .animate-on-scroll.is-visible { @apply opacity-100; }
            .animate-fade-up.is-visible { @apply translate-y-0; }
            .animate-fade-up { @apply translate-y-5; }
            .animate-slide-left.is-visible { @apply translate-x-0; }
            .animate-slide-left { @apply translate-x-[-30px]; }
            .animate-slide-right.is-visible { @apply translate-x-0; }
            .animate-slide-right { @apply translate-x-[30px]; }

            /* Nav Link Underline: Changed duration-400 to duration-500 */
            #main-nav ul:not(#sidemenu) li a::after {
                 content: '';
                 @apply absolute bottom-[-5px] left-0 h-[3px] w-0 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-full transition-all duration-500; /* FIX: Was duration-400 */
             }
             #main-nav ul:not(#sidemenu) li a:hover::after,
             #main-nav ul:not(#sidemenu) li a.active-nav::after {
                 @apply w-full;
             }

             /* Focus Styles */
             *:focus-visible {
                @apply outline-none ring-2 ring-offset-2 ring-primary/70 dark:ring-dark-primary/70 ring-offset-bg-surface dark:ring-offset-dark-bg-surface rounded-sm transition duration-150; /* Slightly softer ring */
             }
             *:focus:not(:focus-visible) { outline: none; } /* Hide focus ring for mouse users */

             /* Skip Link */
             .skip-link {
                 @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:bg-primary focus:text-white focus:px-4 focus:py-2 focus:rounded-md focus:font-semibold focus:shadow-lg;
             }

            /* Form Invalid Styles (using Tailwind's invalid: modifier) */
             input:invalid:not(:placeholder-shown),
             textarea:invalid:not(:placeholder-shown) {
                 /* Uses tailwind invalid: classes directly in HTML, e.g., invalid:border-pink-500 */
             }
             input:required, textarea:required {
                 /* Uses tailwind required: classes if needed, but invalid: usually covers it */
             }
             input:focus:invalid, textarea:focus:invalid {
                 /* Uses tailwind invalid:focus: classes, e.g., invalid:focus:ring-pink-500/50 */
             }
        }
        @layer components {
            .glass-effect {
                @apply bg-glass-bg dark:bg-dark-glass-bg backdrop-blur-md border border-glass-border dark:border-dark-border-dark shadow-lg dark:shadow-glass-dark;
            }
            /* Enhanced Button Base */
            .btn {
                @apply inline-block px-6 py-2.5 rounded-full font-medium text-center transition-all duration-300 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none transform hover:scale-105 focus-visible:scale-105; /* Added transform */
            }
            .btn-primary {
                @apply bg-gradient-to-r from-primary to-blue-500 text-white border border-transparent hover:from-primary-darker hover:to-primary focus-visible:ring-primary dark:from-dark-primary dark:to-blue-600 dark:hover:from-dark-primary-darker dark:hover:to-dark-primary dark:focus-visible:ring-dark-primary;
            }
            .btn-secondary {
                 @apply bg-transparent text-primary border border-primary hover:bg-primary/10 focus-visible:ring-primary dark:text-dark-primary dark:border-dark-primary dark:hover:bg-dark-primary/10 dark:focus-visible:ring-dark-primary;
            }
            /* Standard Content Card */
            .content-card {
                @apply bg-bg-surface dark:bg-dark-bg-surface rounded-xl shadow-lg dark:shadow-dark-bg-dark/30 overflow-hidden transition-all duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-1.5 p-6 md:p-8;
            }
            /* Tab Styling */
            .tab-links.active-link {
                @apply text-primary dark:text-dark-primary border-primary dark:border-dark-primary font-semibold;
            }
            .tab-links {
                @apply border-b-2 pb-1 border-transparent dark:border-transparent text-text-light dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary transition-colors duration-200;
            }
             .tab-contents {
                 @apply transition-opacity duration-300 ease-in-out; /* Base transition for tabs */
             }
             .tab-contents.hidden {
                  @apply !opacity-0 pointer-events-none absolute; /* Use opacity + absolute for smooth transition */
             }
             /* Subtitle Underlines */
             .subtitle-underline::after {
                 content: '';
                 @apply absolute bottom-0 left-1/2 -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-full;
             }
             .subtitle-underline-left::after {
                 content: '';
                 @apply absolute bottom-0 left-0 w-16 h-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-full;
             }
            /* Enhanced Modal Styling */
            .modal-overlay {
                @apply fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center p-4 z-[60] transition-opacity duration-300 ease-out opacity-0 pointer-events-none; /* Use ease-out for fade */
            }
            .modal-overlay.active {
                @apply opacity-100 pointer-events-auto;
            }
            .modal-content {
                @apply bg-bg-surface dark:bg-dark-bg-surface rounded-lg shadow-xl p-6 md:p-8 max-w-xl w-full max-h-[85vh] overflow-y-auto relative transform scale-95 opacity-0 transition-all duration-300 ease-out; /* Added opacity, use ease-out */
            }
             .modal-overlay.active .modal-content {
                 @apply scale-100 opacity-100; /* Animate scale and opacity together */
             }

             /* Preloader Styles */
            #preloader {
                 @apply fixed inset-0 z-[9999] flex items-center justify-center bg-bg-light dark:bg-dark-bg-dark transition-opacity duration-500 ease-out;
            }
            #preloader.loaded {
                @apply opacity-0 pointer-events-none;
            }
            .spinner {
                @apply w-12 h-12 border-4 border-primary dark:border-dark-primary border-t-transparent rounded-full animate-spin;
            }

            /* Styling for dynamically added 'show more' items */
            .show-more-item {
                 @apply opacity-0 /* Start hidden for animation */;
            }
            .show-more-item.animate-in {
                 @apply animate-show-more-item;
            }

            /* Portfolio Layer: Changed duration-400 to duration-500 */
            .work-item .layer {
                 @apply absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0; /* FIX: Was duration-400 */
            }
        }
        @layer utilities {
            /* Ensure hidden utility takes precedence */
            .btn-toggle.hidden, .btn.hidden, .work-item.hidden { display: none !important; }

            /* Portfolio hover icon animation */
            .work-item .layer a:hover i, .work-item .layer button:hover i { @apply rotate-[360deg] transition-transform duration-500; }

            /* Visually hidden but screen-reader accessible */
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border-width: 0;
            }
            .focus\:not-sr-only:focus {
                position: static;
                width: auto;
                height: auto;
                padding: 0;
                margin: 0;
                overflow: visible;
                clip: auto;
                white-space: normal;
            }
            /* Add consistent hover/focus scale to icons */
           .icon-interact {
               @apply transition-all duration-300 ease-in-out transform hover:scale-110 focus-visible:scale-110;
           }
        }

        /* Fallback for browsers not supporting backdrop-filter */
        @supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
            .glass-effect { @apply bg-white/95 dark:bg-dark-bg-surface/95; } /* Slightly less transparent fallback */
        }
    </style>

    <script>
        // Theme initialization (runs before DOMContentLoaded to prevent FOUC)
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>

<body class="bg-bg-light text-text-main dark:bg-dark-bg-dark dark:text-dark-text-main">

    <!-- Preloader -->
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header: Added transition-all -->
    <header id="site-header" class="sticky top-0 z-50 transition-all duration-300 ease-in-out">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <nav id="main-nav" class="flex items-center justify-between h-16 md:h-20">
                <a href="#hero"
                    class="logo-link flex-shrink-0 transition-transform duration-300 hover:scale-105 animate-on-scroll animate-slide-left icon-interact"
                    data-animate>
                    <img src="./images/logo.png" alt="Raiyan Hasan Logo" class="h-10 md:h-12"> <!-- Check path -->
                </a>
                <div class="hidden md:flex items-center space-x-6 lg:space-x-8 animate-on-scroll animate-fade-up"
                    data-animate>
                    <ul class="flex items-center space-x-6 lg:space-x-8">
                        <li><a href="#hero"
                                class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium relative py-2 transition-colors duration-300">Home</a>
                        </li>
                        <li><a href="#about"
                                class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium relative py-2 transition-colors duration-300">About</a>
                        </li>
                        <li><a href="#portfolio"
                                class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium relative py-2 transition-colors duration-300">Portfolio</a>
                        </li>
                        <li><a href="#contact"
                                class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium relative py-2 transition-colors duration-300">Contact</a>
                        </li>
                    </ul>
                    <button id="theme-toggle" type="button"
                        class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus-visible:ring-2 focus-visible:ring-gray-400 dark:focus-visible:ring-gray-500 rounded-lg text-sm p-2.5 transition-colors duration-200 icon-interact"
                        aria-label="Toggle dark mode" aria-pressed="false">
                        <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                        </svg>
                        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                                fill-rule="evenodd" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
                <div class="md:hidden flex items-center space-x-4">
                    <button id="theme-toggle-mobile" type="button"
                        class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus-visible:ring-2 focus-visible:ring-gray-400 dark:focus-visible:ring-gray-500 rounded-lg text-sm p-2.5 transition-colors duration-200 icon-interact"
                        aria-label="Toggle dark mode" aria-pressed="false">
                        <svg id="theme-toggle-dark-icon-mobile" class="hidden w-5 h-5" fill="currentColor"
                            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                        </svg>
                        <svg id="theme-toggle-light-icon-mobile" class="hidden w-5 h-5" fill="currentColor"
                            viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                                fill-rule="evenodd" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                    <button
                        class="icon-menu text-primary dark:text-dark-primary text-3xl hover:text-primary-darker dark:hover:text-dark-primary-darker transition-colors duration-300 icon-interact"
                        onclick="openmenu()" aria-label="Open menu" aria-expanded="false" aria-controls="sidemenu">
                        <i class="fas fa-bars" aria-hidden="true"></i>
                    </button>
                </div>
                <ul id="sidemenu"
                    class="md:hidden fixed top-0 right-0 h-screen w-64 sm:w-72 bg-gradient-to-b from-primary-darker to-primary dark:from-dark-primary-darker dark:to-dark-primary shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out pt-24 px-6 space-y-5 z-40"
                    aria-hidden="true">
                    <li><a href="#hero"
                            class="block text-white hover:text-accent dark:hover:text-dark-accent text-xl font-medium py-2 transition-colors duration-300">Home</a>
                    </li>
                    <li><a href="#about"
                            class="block text-white hover:text-accent dark:hover:text-dark-accent text-xl font-medium py-2 transition-colors duration-300">About</a>
                    </li>
                    <li><a href="#portfolio"
                            class="block text-white hover:text-accent dark:hover:text-dark-accent text-xl font-medium py-2 transition-colors duration-300">Portfolio</a>
                    </li>
                    <li><a href="#contact"
                            class="block text-white hover:text-accent dark:hover:text-dark-accent text-xl font-medium py-2 transition-colors duration-300">Contact</a>
                    </li>
                    <li class="absolute top-6 right-6">
                        <button
                            class="icon-close text-white hover:text-gray-200 text-3xl transition-colors duration-300 icon-interact"
                            onclick="closemenu()" aria-label="Close menu">
                            <i class="fas fa-times" aria-hidden="true"></i>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content Wrapper -->
    <main id="main-content">

        <!-- Hero Section: Added subtle background animation -->
        <!-- Hero Section: Added subtle background animation -->
        <section id="hero" class="pt-28 md:pt-32 pb-20 md:pb-28 min-h-[calc(100vh-80px)] flex items-center relative overflow-hidden
                       bg-gradient-to-br from-blue-100 via-bg-light to-indigo-100
                       dark:from-gray-900 dark:via-dark-bg-dark dark:to-indigo-900/40
                       bg-[length:200%_200%] animate-gradient-shift">
            <!-- Decorative Blobs -->
            <div
                class="absolute top-1/4 left-10 w-32 h-32 bg-blue-200/30 dark:bg-blue-800/20 rounded-full filter blur-2xl opacity-50 dark:opacity-30 animate-pulse-glow">
            </div>
            <div
                class="absolute bottom-1/4 right-10 w-40 h-40 bg-indigo-200/30 dark:bg-indigo-800/20 rounded-full filter blur-2xl opacity-50 dark:opacity-30 animate-pulse-glow animation-delay-2000">
            </div>

            <div class="container mx-auto px-4 sm:px-6 lg:px-8 z-10">
                <div class="header-text text-center max-w-4xl mx-auto">
                    <!-- **** START: Updated Text **** -->
                    <p class="text-lg md:text-xl text-primary dark:text-dark-primary font-medium mb-3 animate-on-scroll animate-fade-up"
                        data-animate data-delay="100">MERN Stack Web Developer & IT Student</p>
                    <!-- **** END: Updated Text **** -->
                    <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-bold text-text-main dark:text-dark-text-main leading-tight mb-6 animate-on-scroll animate-fade-up"
                        data-animate data-delay="200">
                        Hi, I'm <span
                            class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-500 dark:from-dark-primary dark:to-blue-400">Raiyan
                            Hasan</span><br>from MIT Muzaffarpur
                    </h1>
                    <p class="text-base md:text-lg text-text-light dark:text-dark-text-light max-w-2xl mx-auto mb-8 animate-on-scroll animate-fade-up"
                        data-animate data-delay="300">
                        Passionate about crafting clean, efficient, and user-friendly web experiences using the MERN
                        stack. Exploring the intersection of technology, creativity, and problem-solving. Always eager
                        to learn and adapt.
                    </p>
                    <div class="animate-on-scroll animate-fade-up" data-animate data-delay="400">
                        <a href="#portfolio" class="btn btn-primary text-lg px-8 py-3 mr-3 mb-3 sm:mb-0">View My
                            Work</a>
                        <a href="#contact" class="btn btn-secondary text-lg px-8 py-3">Get In Touch</a>
                    </div>
                </div>
            </div>
            <a href="#about"
                class="absolute bottom-8 left-1/2 -translate-x-1/2 text-primary dark:text-dark-primary text-2xl animate-bounce hidden md:block icon-interact"
                aria-label="Scroll down">
                <i class="fas fa-chevron-down"></i>
            </a>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 md:py-28 bg-bg-surface dark:bg-dark-bg-surface">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-wrap lg:flex-nowrap justify-between gap-12 md:gap-16 items-start">
                    <div class="about-col-1 w-full lg:w-2/5 xl:w-1/3 flex-shrink-0 animate-on-scroll animate-slide-left"
                        data-animate>
                        <div class="relative group">
                            <div
                                class="absolute -inset-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-500">
                            </div>
                            <img src="./images/user1.png" alt="Raiyan Hasan profile picture"
                                class="relative rounded-xl shadow-xl w-full max-w-sm mx-auto lg:max-w-none transition-transform duration-300 group-hover:scale-[1.02]"
                                loading="lazy"> <!-- Check path -->
                        </div>
                    </div>
                    <div class="about-col-2 w-full lg:w-3/5 xl:w-2/3 animate-on-scroll animate-slide-right"
                        data-animate>
                        <h2
                            class="subtitle text-3xl md:text-4xl text-primary dark:text-dark-primary font-semibold mb-14 md:mb-16 text-left relative pb-4 subtitle-underline-left">
                            About Me
                        </h2>
                        <p
                            class="about-intro text-base md:text-lg text-text-light dark:text-dark-text-light mb-6 leading-relaxed md:leading-loose">
                            Hello! I'm Raiyan Hasan, a dedicated B.Tech student in Information Technology at MIT
                            Muzaffarpur (Batch 2023-27). My fascination lies at the intersection of technology and
                            creativity, particularly in web development where I strive to build intuitive, efficient,
                            and accessible digital experiences.
                        </p>
                        <p
                            class="about-intro text-base md:text-lg text-text-light dark:text-dark-text-light mb-8 leading-relaxed md:leading-loose">
                            I'm driven by a continuous learning mindset, constantly exploring new tools and techniques
                            to solve complex problems. Whether it's mastering Python for logic and scripting or diving
                            into the nuances of front-end development with modern CSS like Tailwind, I enjoy the
                            challenge of turning ideas into reality. My goal is to contribute meaningfully to impactful
                            web solutions.
                        </p>

                        <div class="tab-titles flex border-b border-border-light dark:border-dark-border-dark mb-6 space-x-4 sm:space-x-8 flex-wrap"
                            role="tablist" aria-label="About Me Sections">
                            <button
                                class="tab-links active-link py-2 px-1 sm:px-2 font-medium transition-all duration-300 whitespace-nowrap"
                                onclick="opentab(event, 'skills-panel')" role="tab" aria-controls="skills-panel"
                                aria-selected="true" id="skills-tab" tabindex="0">Skills</button>
                            <button
                                class="tab-links py-2 px-1 sm:px-2 font-medium transition-all duration-300 whitespace-nowrap"
                                onclick="opentab(event, 'education-panel')" role="tab" aria-controls="education-panel"
                                aria-selected="false" id="education-tab" tabindex="-1">Education</button>
                        </div>

                        <!-- Skills Tab Panel -->
                        <!-- Skills Tab Panel -->
                        <div class="tab-contents active-tab min-h-[250px] relative" id="skills-panel" role="tabpanel"
                            aria-labelledby="skills-tab" aria-hidden="false">
                            <ul class="space-y-5">
                                <li>
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-primary dark:border-dark-primary py-2 group">
                                        <a href="https://www.hackerrank.com/certificates/bb25b2ccfbf1"
                                            title="Click to see certification" target="_blank" rel="noopener noreferrer"
                                            class="inline-block transition-colors duration-300 group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                            <strong
                                                class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                                <i
                                                    class="fab fa-python mr-2 text-lg text-primary dark:text-dark-primary"></i>
                                                Python <i
                                                    class="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70 transition-opacity"
                                                    aria-hidden="true"></i>
                                            </strong>
                                        </a>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">
                                            Proficient in Python for problem-solving and scripting (HackerRank
                                            Certified).
                                        </span>
                                    </div>
                                </li>
                                <!-- **** START: Updated Web Dev Skill **** -->
                                <li>
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-primary dark:border-dark-primary py-2">
                                        <strong
                                            class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                            <i class="fas fa-code mr-2 text-lg text-primary dark:text-dark-primary"></i>
                                            MERN Stack Development
                                        </strong>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">
                                            Experience with MongoDB, Express.js, React, Node.js, plus HTML, CSS (incl.
                                            Tailwind), and JavaScript for full-stack applications.
                                        </span>
                                    </div>
                                </li>
                                <!-- **** END: Updated Web Dev Skill **** -->
                            </ul>
                            <ul id="skills-list-hidden" class="space-y-5 mt-5">
                                <li class="hidden show-more-item">
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-secondary dark:border-dark-secondary py-2">
                                        <strong
                                            class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                            <i
                                                class="fas fa-palette mr-2 text-lg text-secondary dark:text-dark-secondary"></i>
                                            Canva
                                        </strong>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">
                                            Skilled in creating visual assets and graphics using Canva.
                                        </span>
                                    </div>
                                </li>
                                <li class="hidden show-more-item">
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-secondary dark:border-dark-secondary py-2">
                                        <strong
                                            class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                            <i
                                                class="fab fa-react mr-2 text-lg text-secondary dark:text-dark-secondary"></i>
                                            React Native
                                        </strong>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">
                                            Building cross-platform mobile applications.
                                        </span>
                                    </div>
                                </li>
                                <li class="hidden show-more-item">
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-accent dark:border-dark-accent py-2">
                                        <strong
                                            class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                            <i
                                                class="fab fa-git-alt mr-2 text-lg text-accent dark:text-dark-accent"></i>
                                            Version Control
                                        </strong>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">
                                            Using Git and GitHub for code management and collaboration.
                                        </span>
                                    </div>
                                </li>
                            </ul>

                            <div class="mt-8 pt-5 border-t border-border-light dark:border-dark-border-dark">
                                <strong
                                    class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-3">Currently
                                    Learning</strong>
                                <ul
                                    class="list-disc list-inside space-y-1 text-sm text-text-light dark:text-dark-text-light pl-1">
                                    <li>Advanced MERN stack concepts & optimization</li>
                                    <li>Deeper dive into responsive design patterns</li>
                                    <li>Web Accessibility (WCAG) best practices</li>
                                    <li>Further exploring React Native</li>
                                </ul>
                            </div>

                            <div class="more-less-controls mt-8">
                                <button
                                    class="btn-toggle text-primary dark:text-dark-primary text-sm font-medium inline-flex items-center hover:underline"
                                    id="more-skills-btn" aria-expanded="false" aria-controls="skills-list-hidden">
                                    <i class="fas fa-chevron-down mr-1 text-xs"></i> Show More Skills
                                </button>
                                <button
                                    class="btn-toggle hidden text-primary dark:text-dark-primary text-sm font-medium inline-flex items-center hover:underline"
                                    id="less-skills-btn" aria-expanded="true" aria-controls="skills-list-hidden">
                                    <i class="fas fa-chevron-up mr-1 text-xs"></i> Show Less Skills
                                </button>
                            </div>
                        </div>
                        <!-- Education Tab Panel -->
                        <div class="tab-contents hidden min-h-[250px] relative" id="education-panel" role="tabpanel"
                            aria-labelledby="education-tab" aria-hidden="true">
                            <ul class="space-y-5">
                                <li>
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-primary dark:border-dark-primary py-2 group">
                                        <a href="https://www.mitmuzaffarpur.org/mit-student/rayan-hasan/"
                                            target="_blank" rel="noopener noreferrer"
                                            class="inline-block transition-colors duration-300 group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                            <strong
                                                class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                                <i
                                                    class="fas fa-university mr-2 text-lg text-primary dark:text-dark-primary"></i>
                                                B.Tech - Information Technology <i
                                                    class="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70 transition-opacity"
                                                    aria-hidden="true"></i>
                                            </strong>
                                        </a>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">MIT
                                            Muzaffarpur</span>
                                        <span
                                            class="block text-sm text-text-light dark:text-dark-text-light font-medium text-primary dark:text-dark-primary ml-7">(2023
                                            - 2027, Ongoing)</span>
                                    </div>
                                </li>
                                <li>
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-primary dark:border-dark-primary py-2">
                                        <strong
                                            class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                            <i
                                                class="fas fa-graduation-cap mr-2 text-lg text-primary dark:text-dark-primary"></i>
                                            Intermediate (XII) - PCM
                                        </strong>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">St.
                                            Judes Vidyalaya, Barauni (CBSE)</span>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">Year:
                                            2023 | Percentage: 84.6%</span>
                                    </div>
                                </li>
                            </ul>
                            <ul id="education-list-hidden" class="space-y-5 mt-5">
                                <li class="hidden show-more-item">
                                    <div
                                        class="tab-item-content pl-5 border-l-4 border-secondary dark:border-dark-secondary py-2 group">
                                        <a href="https://www.shivamconvent.com/images/result/10%20ST.JUDES%20BARAUNI-min.pdf"
                                            target="_blank" rel="noopener noreferrer"
                                            class="inline-block transition-colors duration-300 group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                            <strong
                                                class="block text-lg font-semibold text-text-main dark:text-dark-text-main mb-1 flex items-center">
                                                <i
                                                    class="fas fa-school mr-2 text-lg text-secondary dark:text-dark-secondary"></i>
                                                Matriculation (X) <i
                                                    class="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70 transition-opacity"
                                                    aria-hidden="true"></i>
                                            </strong>
                                        </a>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">St.
                                            Judes Vidyalaya, Barauni (CBSE)</span>
                                        <span class="block text-sm text-text-light dark:text-dark-text-light ml-7">Year:
                                            2021 | Percentage: 91.8%</span>
                                    </div>
                                </li>
                            </ul>
                            <div class="more-less-controls mt-8">
                                <button
                                    class="btn-toggle text-primary dark:text-dark-primary text-sm font-medium inline-flex items-center hover:underline"
                                    id="more-Education-btn" aria-expanded="false" aria-controls="education-list-hidden">
                                    <i class="fas fa-chevron-down mr-1 text-xs"></i> Show More Education
                                </button>
                                <button
                                    class="btn-toggle hidden text-primary dark:text-dark-primary text-sm font-medium inline-flex items-center hover:underline"
                                    id="less-Education-btn" aria-expanded="true" aria-controls="education-list-hidden">
                                    <i class="fas fa-chevron-up mr-1 text-xs"></i> Show Less Education
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section id="portfolio"
            class="py-20 md:py-28 bg-gradient-to-b from-blue-50 via-bg-light to-bg-light dark:from-gray-900/50 dark:via-dark-bg-dark dark:to-dark-bg-dark">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="subtitle text-3xl md:text-4xl text-primary dark:text-dark-primary font-semibold mb-14 md:mb-16 text-center relative pb-4 subtitle-underline animate-on-scroll animate-fade-up"
                    data-animate>
                    My Work
                </h2>
                <div class="work-list grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10">

                    <!-- Project 1: MIT Clone -->
                    <div class="work-item group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 animate-on-scroll animate-fade-up"
                        data-animate data-modal-title="MIT Muzaffarpur Clone"
                        data-modal-desc="A responsive clone of the official MIT Muzaffarpur website, built using HTML, CSS (Tailwind), and JavaScript. Focused on replicating the design, layout, and key interactive elements."
                        data-modal-tech="HTML, Tailwind CSS, JavaScript"
                        data-modal-learnings="Practiced complex layouts with Tailwind, implementing responsive navigation, and mimicking existing UI patterns accurately."
                        data-modal-live="https://hasanraiyan.github.io/MIT" data-modal-repo="">
                        <img src="./images/work-5.png" alt="MIT Muzaffarpur Clone"
                            class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                            loading="lazy">
                        <div
                            class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                            <div
                                class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">MIT Muzaffarpur
                                    Clone</h3>
                                <p class="text-xs sm:text-sm text-gray-100 mb-3">Responsive university website clone.
                                </p>
                                <div class="flex justify-center space-x-3">
                                    <button onclick="openProjectModal(this.closest('.work-item'))"
                                        aria-label="View details for MIT Clone project"
                                        class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                        <i class="fas fa-info"></i>
                                    </button>
                                    <a href="https://hasanraiyan.github.io/MIT" target="_blank"
                                        rel="noopener noreferrer" aria-label="View live MIT Clone project"
                                        class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project 2: Tic Tac Toe vs AI -->
                    <div class="work-item group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 animate-on-scroll animate-fade-up"
                        data-animate data-delay="100" data-modal-title="Tic Tac Toe (vs AI)"
                        data-modal-desc="Classic Tic Tac Toe game where you can play against a simple computer opponent implemented with JavaScript logic. Includes win detection and game reset functionality."
                        data-modal-tech="HTML, CSS, JavaScript"
                        data-modal-learnings="Implemented game logic, including win condition checks and a basic AI opponent strategy using vanilla JavaScript."
                        data-modal-live="https://hasanraiyan.github.io/projects/tik%20tak%20toe/index.html"
                        data-modal-repo="">
                        <img src="./images/work-1.png" alt="Tic Tac Toe vs AI"
                            class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                            loading="lazy">
                        <div
                            class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                            <div
                                class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">Tic Tac Toe (vs AI)
                                </h3>
                                <p class="text-xs sm:text-sm text-gray-100 mb-3">Play against the computer.</p>
                                <div class="flex justify-center space-x-3">
                                    <button onclick="openProjectModal(this.closest('.work-item'))"
                                        aria-label="View details for Tic Tac Toe vs AI project"
                                        class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                        <i class="fas fa-info"></i>
                                    </button>
                                    <a href="https://hasanraiyan.github.io/projects/tik%20tak%20toe/index.html"
                                        target="_blank" rel="noopener noreferrer"
                                        aria-label="View live Tic Tac Toe vs AI project"
                                        class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project 3: Calculator -->
                    <div class="work-item group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 animate-on-scroll animate-fade-up"
                        data-animate data-delay="200" data-modal-title="Web Calculator"
                        data-modal-desc="A functional web-based calculator built with HTML, CSS, and JavaScript. It handles basic arithmetic operations (+, -, *, /) and includes display updates and clear functionality."
                        data-modal-tech="HTML, CSS, JavaScript"
                        data-modal-learnings="Focused on DOM manipulation with JavaScript to handle user input, update the display, and perform calculations."
                        data-modal-live="https://hasanraiyan.github.io/projects/calculator/index.html"
                        data-modal-repo="">
                        <img src="./images/work-2.png" alt="Web Calculator"
                            class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                            loading="lazy">
                        <div
                            class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                            <div
                                class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">Web Calculator</h3>
                                <p class="text-xs sm:text-sm text-gray-100 mb-3">Functional calculator for quick math.
                                </p>
                                <div class="flex justify-center space-x-3">
                                    <button onclick="openProjectModal(this.closest('.work-item'))"
                                        aria-label="View details for Calculator project"
                                        class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                        <i class="fas fa-info"></i>
                                    </button>
                                    <a href="https://hasanraiyan.github.io/projects/calculator/index.html"
                                        target="_blank" rel="noopener noreferrer"
                                        aria-label="View live Calculator project"
                                        class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                        <i class="fas fa-external-link-alt"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="portfolio-list-hidden" class="contents">

                        <div class="work-item hidden group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 show-more-item"
                            data-animate data-delay="0" data-modal-title="Tic Tac Toe (Player vs Player)"
                            data-modal-desc="Play the classic Tic Tac Toe game head-to-head against another player on the same device. Simple, fun, and includes turn indicators and win detection."
                            data-modal-tech="HTML, CSS, JavaScript"
                            data-modal-learnings="Refined basic game logic and state management for a two-player experience."
                            data-modal-live="https://hasanraiyan.github.io/TikTakToe/"
                            data-modal-repo="https://github.com/hasanraiyan/TikTakToe">
                            <img src="./images/work-3.png" alt="Tic Tac Toe PvP"
                                class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                                loading="lazy">
                            <div
                                class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                                <div
                                    class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                    <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">Tic Tac Toe
                                        (PvP)</h3>
                                    <p class="text-xs sm:text-sm text-gray-100 mb-3">Play head-to-head with a friend.
                                    </p>
                                    <div class="flex justify-center space-x-3">
                                        <button onclick="openProjectModal(this.closest('.work-item'))"
                                            aria-label="View details for Tic Tac Toe PvP project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-info"></i>
                                        </button>
                                        <a href="https://hasanraiyan.github.io/TikTakToe/" target="_blank"
                                            rel="noopener noreferrer" aria-label="View live Tic Tac Toe PvP project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-external-link-alt"></i>
                                        </a>
                                        <a href="https://github.com/hasanraiyan/TikTakToe" target="_blank"
                                            rel="noopener noreferrer"
                                            aria-label="View Tic Tac Toe PvP source code on Github"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fab fa-github"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="work-item hidden group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 show-more-item"
                            data-animate data-delay="100" data-modal-title="Project Management UI (Concept)"
                            data-modal-desc="A conceptual user interface design for a project management dashboard. Focuses on clean layout, component structure (cards, sidebars), and visual hierarchy using Tailwind CSS. This is primarily a design showcase."
                            data-modal-tech="HTML, Tailwind CSS"
                            data-modal-learnings="Practiced translating UI concepts into functional HTML/CSS using Tailwind utilities for layout and styling. Focused on component-based structure."
                            data-modal-live="https://hasanraiyan.github.io/projects/" data-modal-repo="">
                            <img src="./images/work-4.png" alt="Project Management UI"
                                class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                                loading="lazy">
                            <div
                                class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                                <div
                                    class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                    <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">Project
                                        Management UI</h3>
                                    <p class="text-xs sm:text-sm text-gray-100 mb-3">Conceptual UI for project tracking.
                                    </p>
                                    <div class="flex justify-center space-x-3">
                                        <button onclick="openProjectModal(this.closest('.work-item'))"
                                            aria-label="View details for Project Management UI project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-info"></i>
                                        </button>
                                        <a href="https://hasanraiyan.github.io/projects/" target="_blank"
                                            rel="noopener noreferrer"
                                            aria-label="View live Project Management UI project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-external-link-alt"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Project 6: NoteJS App -->
                        <div class="work-item hidden group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 show-more-item"
                            data-animate data-delay="200" data-modal-title="NoteJS - Simple Notes App"
                            data-modal-desc="NoteJS is a basic notes application built with React Native and Expo. It allows users to create, edit, delete, and save notes locally on their device."
                            data-modal-tech="React Native, Expo, JavaScript"
                            data-modal-learnings="Developed a cross-platform mobile app, implemented local data storage using AsyncStorage, managed component state for CRUD operations (Create, Read, Update, Delete)."
                            data-modal-live="" data-modal-repo="https://github.com/hasanraiyan/NoteJS">
                            <img src="https://github.com/hasanraiyan/NoteJS/raw/main/assets/images/apps/HomeScreen.png"
                                alt="NoteJS App Home Screen"
                                class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                                loading="lazy">
                            <div
                                class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                                <div
                                    class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                    <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">NoteJS App</h3>
                                    <p class="text-xs sm:text-sm text-gray-100 mb-3">Simple notes app built with React
                                        Native.</p>
                                    <div class="flex justify-center space-x-3">
                                        <button onclick="openProjectModal(this.closest('.work-item'))"
                                            aria-label="View details for NoteJS App project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-info"></i>
                                        </button>
                                        <!-- No Live Link for a Mobile App Demo -->
                                        <a href="https://github.com/hasanraiyan/NoteJS" target="_blank"
                                            rel="noopener noreferrer" aria-label="View NoteJS source code on Github"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fab fa-github"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Project 7: Dostify AI Companion -->
                        <div class="work-item hidden group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition duration-300 hover:shadow-2xl dark:hover:shadow-dark-bg-dark/50 hover:-translate-y-2 show-more-item"
                            data-animate data-delay="300" 
                            data-modal-title="Dostify - AI Student Companion"
                            data-modal-desc="An AI-powered chatbot designed as a friendly companion for students,
                            helping them navigate academic pressure, mental health challenges, and career uncertainty
                            with personalized support, resources, and conversation starters."
                            data-modal-tech="React/Next.js (Likely), Tailwind CSS (Likely), AI API Integration (e.g.,
                            OpenAI)" 
                            data-modal-learnings="Developed an interactive chatbot interface, integrated with an AI
                            backend (presumed), designed user journeys for various student needs (academic, mental
                            health, career), built a responsive landing page showcasing features and benefits."
                            data-modal-live="https://dostify-climb.vercel.app/"
                            data-modal-repo=""> 
                            <!-- IMPORTANT: Add an image named 'work-dostify.png' to your ./images folder -->
                            <img src="https://dostify-climb.vercel.app/images/app-icon.png" alt="Dostify AI Companion Landing Page"
                                class="w-full h-72 sm:h-80 md:h-96 object-cover object-top transition-transform duration-500 group-hover:scale-110"
                                loading="lazy">
                            <div
                                class="layer absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col items-center justify-end p-4 sm:p-6 text-center transform translate-y-4 group-hover:translate-y-0">
                                <div
                                    class="glass-effect rounded-lg p-4 w-full transform transition-transform duration-500 delay-100 group-hover:scale-100 scale-95">
                                    <h3 class="text-lg sm:text-xl font-semibold text-white mb-1 sm:mb-2">Dostify AI
                                        Companion</h3>
                                    <p class="text-xs sm:text-sm text-gray-100 mb-3">AI chatbot providing support for
                                        students.</p>
                                    <div class="flex justify-center space-x-3">
                                        <button onclick="openProjectModal(this.closest('.work-item'))"
                                            aria-label="View details for Dostify AI Companion project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-info"></i>
                                        </button>
                                        <a href="https://dostify-climb.vercel.app/" target="_blank"
                                            rel="noopener noreferrer" aria-label="View live Dostify project"
                                            class="bg-white text-primary dark:text-dark-primary rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center text-lg sm:text-xl hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-300 transform hover:scale-110 shadow-md focus-visible:ring-offset-glass-bg dark:focus-visible:ring-offset-dark-glass-bg">
                                            <i class="fas fa-external-link-alt"></i>
                                        </a>
                                        <!-- GitHub link omitted as none was provided -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Portfolio Show More/Less Buttons -->
                <div class="portfolio-controls text-center mt-12 md:mt-16 animate-on-scroll animate-fade-up"
                    data-animate data-delay="300">
                    <button class="btn btn-secondary" onclick="showMorePortfolio()" id="more-btn"
                        aria-label="Show more projects" aria-expanded="false" aria-controls="portfolio-list-hidden">
                        <i class="fas fa-chevron-down mr-2 text-sm"></i> See More Projects
                    </button>
                    <button class="btn btn-secondary hidden" onclick="showLessPortfolio()" id="less-btn"
                        aria-label="Show fewer projects" aria-expanded="true" aria-controls="portfolio-list-hidden">
                        <i class="fas fa-chevron-up mr-2 text-sm"></i> Show Less
                    </button>
                </div>
            </div>
        </section>

        <!-- Project Details Modal (Enhanced Transitions) -->
        <div id="project-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title"
            aria-hidden="true" tabindex="-1">
            <div class="modal-content" role="document">
                <button id="modal-close-button" onclick="closeProjectModal()"
                    class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors duration-200 focus-visible:ring-offset-bg-surface dark:focus-visible:ring-offset-dark-bg-surface icon-interact"
                    aria-label="Close project details modal">
                    <i class="fas fa-times text-2xl"></i>
                </button>

                <h3 id="modal-title" class="text-2xl font-semibold text-primary dark:text-dark-primary mb-4">Project
                    Title</h3>
                <p id="modal-desc" class="text-text-light dark:text-dark-text-light mb-5 text-base leading-relaxed">
                    Project description goes here...</p>
                <div class="mb-5">
                    <strong class="text-text-main dark:text-dark-text-main font-medium">Technologies Used:</strong>
                    <p id="modal-tech" class="text-sm text-text-light dark:text-dark-text-light mt-1">HTML, CSS, JS</p>
                </div>
                <div id="modal-learnings-container" class="mb-5">
                </div>
                <div id="modal-links"
                    class="flex flex-wrap gap-3 border-t border-border-light dark:border-dark-border-dark pt-5 mt-5">
                </div>
            </div>
        </div>

        <!-- Contact Section -->
        <section id="contact"
            class="py-20 md:py-28 bg-gradient-to-br from-bg-surface via-gray-50 to-bg-surface dark:from-dark-bg-surface dark:via-gray-800/20 dark:to-dark-bg-surface">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-wrap md:flex-nowrap justify-between gap-12 md:gap-16 lg:gap-20 items-start">

                    <div class="contact-left w-full md:w-2/5 lg:w-1/3 animate-on-scroll animate-slide-left"
                        data-animate>
                        <h2
                            class="subtitle text-3xl md:text-4xl text-primary dark:text-dark-primary font-semibold mb-10 md:mb-12 text-left relative pb-4 subtitle-underline-left">
                            Get In Touch
                        </h2>
                        <p class="mb-8 text-text-light dark:text-dark-text-light leading-relaxed">
                            Interested in collaborating, have a project idea, a question, or just want to connect? Feel
                            free to reach out using the form or details below.
                        </p>

                        <div class="space-y-6 mb-10">
                            <div class="contact-info flex items-center text-text-light dark:text-dark-text-light group">
                                <div
                                    class="flex-shrink-0 w-8 h-8 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center mr-4 transition-transform duration-300 group-hover:scale-110">
                                    <i class="fas fa-paper-plane text-primary dark:text-dark-primary text-lg"></i>
                                </div>
                                <div class="flex items-center flex-wrap">
                                    <a id="email-address" href="mailto:raiyanhasan2006@gmail.com"
                                        class="font-medium text-text-main dark:text-dark-text-main hover:text-primary dark:hover:text-dark-primary hover:underline break-all transition-colors duration-300 mr-2">raiyanhasan2006@gmail.com</a>
                                    <button id="copy-email-btn" aria-label="Copy email address"
                                        title="Copy email address"
                                        class="text-text-light dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary text-sm transition-colors duration-200 icon-interact">
                                        <i class="far fa-copy"></i>
                                    </button>
                                    <span id="copy-feedback"
                                        class="text-xs text-green-600 dark:text-green-400 ml-2 opacity-0 transition-opacity duration-300"
                                        aria-live="polite">Copied!</span>
                                </div>
                            </div>
                            <div class="contact-info flex items-center text-text-light dark:text-dark-text-light group">
                                <div
                                    class="flex-shrink-0 w-8 h-8 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center mr-4 transition-transform duration-300 group-hover:scale-110">
                                    <i class="fas fa-map-marker-alt text-primary dark:text-dark-primary text-lg"></i>
                                </div>
                                <span class="text-text-main dark:text-dark-text-main">Muzaffarpur, Bihar, India</span>
                            </div>
                        </div>

                        <div class="mb-10">
                            <h3 class="text-lg font-medium text-text-main dark:text-dark-text-main mb-4">Connect with me
                            </h3>
                            <div class="social-icons flex space-x-5">
                                <a href="https://www.hackerrank.com/profile/raiyanhasan2006" target="_blank"
                                    rel="noopener noreferrer" title="Hackerrank" aria-label="My Hackerrank profile"
                                    class="text-gray-500 dark:text-gray-400 hover:text-[#2ec866] text-3xl transition-all duration-300 ease-in-out icon-interact"><i
                                        class="fab fa-hackerrank"></i></a>
                                <a href="https://www.linkedin.com/in/hasanraiyan/" target="_blank"
                                    rel="noopener noreferrer" title="LinkedIn" aria-label="My LinkedIn profile"
                                    class="text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-dark-primary text-3xl transition-all duration-300 ease-in-out icon-interact"><i
                                        class="fab fa-linkedin"></i></a>
                                <a href="https://github.com/hasanraiyan" target="_blank" rel="noopener noreferrer"
                                    title="Github" aria-label="My Github profile"
                                    class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-3xl transition-all duration-300 ease-in-out icon-interact"><i
                                        class="fab fa-github"></i></a>
                            </div>
                        </div>

                        <div>
                            <a href="./resume/Raiyan_Hasan_Resume.pdf" download="Raiyan_Hasan_Resume.pdf"
                                class="btn btn-secondary inline-flex items-center"
                                aria-label="Download my resume in PDF format"> <!-- Check path -->
                                <i class="fas fa-download mr-2"></i> Download CV
                            </a>
                        </div>
                    </div>

                    <div class="contact-right w-full md:w-3/5 lg:w-2/3 animate-on-scroll animate-slide-right"
                        data-animate>
                        <div
                            class="bg-white dark:bg-dark-bg-surface-card border border-border-light/50 dark:border-dark-border-dark/50 rounded-xl p-6 md:p-10 shadow-lg dark:shadow-dark-bg-dark/50">
                            <h3 class="text-2xl md:text-3xl font-semibold text-text-main dark:text-dark-text-main mb-8">
                                Send me a message</h3>

                            <form id="contact-form" autocomplete="on" class="w-full space-y-6" aria-busy="false"
                                novalidate>
                                <div class="relative">
                                    <span
                                        class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 text-lg pointer-events-none"><i
                                            class="far fa-user"></i></span>
                                    <input type="text" name="username" placeholder="Your Name" required
                                        aria-label="Your Name" class="w-full bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-4 pl-12 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-300 ease-in-out
                                          focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary
                                          invalid:border-pink-500 dark:invalid:border-pink-600 invalid:text-pink-600 dark:invalid:text-pink-500
                                          invalid:focus:ring-pink-500/50 dark:invalid:focus:ring-pink-600/50">
                                </div>

                                <div class="relative">
                                    <span
                                        class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 text-lg pointer-events-none"><i
                                            class="far fa-envelope"></i></span>
                                    <input type="email" name="email" placeholder="Your Email" required
                                        aria-label="Your Email" class="w-full bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-4 pl-12 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-300 ease-in-out
                                          focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary
                                          invalid:border-pink-500 dark:invalid:border-pink-600 invalid:text-pink-600 dark:invalid:text-pink-500
                                          invalid:focus:ring-pink-500/50 dark:invalid:focus:ring-pink-600/50">
                                </div>

                                <div class="relative">
                                    <span
                                        class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 text-lg pointer-events-none"><i
                                            class="fas fa-phone-alt"></i></span>
                                    <input type="tel" name="phone" placeholder="Your Phone (Optional)"
                                        aria-label="Your Phone Number"
                                        class="w-full bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-4 pl-12 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 transition-all duration-300 ease-in-out
                                          focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary">
                                </div>

                                <div class="relative">
                                    <span
                                        class="absolute left-4 top-5 text-gray-400 dark:text-gray-500 text-lg pointer-events-none"><i
                                            class="far fa-comment-dots"></i></span>
                                    <textarea name="message" placeholder="Your Message" rows="5" required
                                        aria-label="Your Message"
                                        class="w-full bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-4 pl-12 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 resize-y min-h-[140px] transition-all duration-300 ease-in-out
                                          focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary
                                          invalid:border-pink-500 dark:invalid:border-pink-600 invalid:text-pink-600 dark:invalid:text-pink-500
                                          invalid:focus:ring-pink-500/50 dark:invalid:focus:ring-pink-600/50"></textarea>
                                </div>

                                <div class="pt-2">
                                    <button type="submit"
                                        class="btn btn-primary px-8 py-3 w-full sm:w-auto group flex items-center justify-center relative transition-all duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                                        <span class="submit-text inline-block">Send Message</span>
                                        <i
                                            class="submit-icon fas fa-paper-plane ml-2 transition-transform duration-300 group-hover:translate-x-1 group-focus:translate-x-1"></i>
                                        <span
                                            class="loading-spinner absolute inset-0 flex items-center justify-center bg-primary dark:bg-dark-primary opacity-0 transition-opacity duration-300 pointer-events-none rounded-full">
                                            <svg class="animate-spin h-5 w-5 text-white"
                                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
                                                    stroke-width="4"></circle>
                                                <path class="opacity-75" fill="currentColor"
                                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                </path>
                                            </svg>
                                        </span>
                                    </button>
                                </div>
                            </form>

                            <div id="msg"
                                class="mt-6 p-4 rounded-md text-center font-medium text-sm transition-all duration-300 opacity-0 transform translate-y-2"
                                role="alert" aria-live="polite" style="visibility: hidden;">
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer
        class="copyright bg-text-main dark:bg-dark-bg-surface text-gray-400 dark:text-dark-text-light text-center py-6 mt-20 md:mt-28 text-sm transition-colors duration-300 ease-in-out">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative">
            <p> <span id="current-year"></span> Raiyan Hasan. Crafted with <i
                    class="fas fa-heart text-red-500 animate-pulse"></i> using Tailwind CSS.</p>
            <button id="back-to-top" onclick="scrollToTop()"
                class="back-to-top fixed bottom-6 right-6 bg-primary dark:bg-dark-primary text-white w-10 h-10 rounded-full flex items-center justify-center text-lg shadow-lg hover:bg-primary-darker dark:hover:bg-dark-primary-darker transition-all duration-300 opacity-0 pointer-events-none transform translate-y-4 icon-interact"
                aria-label="Back to top" aria-hidden="true">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>
    </footer>

    <!-- Main JavaScript (No changes needed in JS for this fix) -->
    <script>
        // --- Global Constants ---
        const SCROLL_OFFSET = 80;
        const ANIMATION_DELAY_STEP = 100; // Stagger delay for portfolio items
        const SHOW_MORE_STAGGER = 50; // ms delay between each new item appearing
        const FOCUSABLE_MODAL_ELEMENTS = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';

        // --- DOM Element Cache ---
        const Cache = {
            htmlElement: document.documentElement,
            preloader: document.getElementById('preloader'),
            sidemenu: document.getElementById("sidemenu"),
            siteHeader: document.getElementById("site-header"),
            backToTopButton: document.getElementById('back-to-top'),
            contactForm: document.getElementById('contact-form'),
            formMsg: document.getElementById('msg'),
            submitButton: document.querySelector('#contact-form button[type="submit"]'),
            submitButtonText: document.querySelector('#contact-form .submit-text'),
            submitButtonIcon: document.querySelector('#contact-form .submit-icon'),
            loadingSpinner: document.querySelector('#contact-form .loading-spinner'),
            tabLinks: document.querySelectorAll(".tab-links"),
            tabContents: document.querySelectorAll(".tab-contents"),
            navLinks: document.querySelectorAll('#main-nav ul:not(#sidemenu) .nav-link'),
            mobileMenuButton: document.querySelector('.icon-menu'),
            mobileMenuCloseButton: document.querySelector('#sidemenu .icon-close'),
            themeToggleButtons: document.querySelectorAll('#theme-toggle, #theme-toggle-mobile'),
            themeToggleDarkIcons: document.querySelectorAll('#theme-toggle-dark-icon, #theme-toggle-dark-icon-mobile'),
            themeToggleLightIcons: document.querySelectorAll('#theme-toggle-light-icon, #theme-toggle-light-icon-mobile'),
            portfolioList: document.querySelector('#portfolio .work-list'),
            portfolioMoreBtn: document.getElementById('more-btn'),
            portfolioLessBtn: document.getElementById('less-btn'),
            portfolioHiddenWrapper: document.getElementById('portfolio-list-hidden'),
            projectModal: document.getElementById('project-modal'),
            modalOverlay: document.getElementById('project-modal'), // Alias for clarity
            modalContent: document.querySelector('#project-modal .modal-content'),
            modalTitle: document.getElementById('modal-title'),
            modalDesc: document.getElementById('modal-desc'),
            modalTech: document.getElementById('modal-tech'),
            modalLearningsContainer: document.getElementById('modal-learnings-container'),
            modalLinks: document.getElementById('modal-links'),
            modalCloseButton: document.getElementById('modal-close-button'),
            skillsHiddenWrapper: document.getElementById('skills-list-hidden'),
            educationHiddenWrapper: document.getElementById('education-list-hidden'),
            skillsMoreBtn: document.getElementById('more-skills-btn'),
            skillsLessBtn: document.getElementById('less-skills-btn'),
            educationMoreBtn: document.getElementById('more-Education-btn'),
            educationLessBtn: document.getElementById('less-Education-btn'),
            copyEmailBtn: document.getElementById('copy-email-btn'),
            emailAddressSpan: document.getElementById('email-address'),
            copyFeedbackSpan: document.getElementById('copy-feedback'),
        };

        // --- State Variables ---
        let isModalOpen = false;
        let focusedElementBeforeModal = null;

        // --- Utility Functions ---
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => { clearTimeout(timeout); func(...args); };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // --- Theme Management ---
        function updateThemeUI(isDarkMode) {
            Cache.themeToggleDarkIcons.forEach(icon => icon.classList.toggle('hidden', !isDarkMode));
            Cache.themeToggleLightIcons.forEach(icon => icon.classList.toggle('hidden', isDarkMode));
            Cache.themeToggleButtons.forEach(button => button.setAttribute('aria-pressed', isDarkMode.toString()));
        }
        function applyTheme(isDarkMode) {
            Cache.htmlElement.classList.toggle('dark', isDarkMode);
            localStorage.theme = isDarkMode ? 'dark' : 'light';
            updateThemeUI(isDarkMode);
        }
        function toggleTheme() {
            const isCurrentlyDark = Cache.htmlElement.classList.contains('dark');
            applyTheme(!isCurrentlyDark);
        }
        function initializeTheme() {
            const isDarkMode = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            Cache.htmlElement.classList.toggle('dark', isDarkMode); // Apply class before UI update
            updateThemeUI(isDarkMode);
            Cache.themeToggleButtons.forEach(btn => btn.addEventListener('click', toggleTheme));
        }

        // --- Tabbed Interface (About Section) ---
        function opentab(event, tabpanelId) {
            const targetPanel = document.getElementById(tabpanelId);
            if (!targetPanel) return;

            Cache.tabLinks.forEach(tablink => {
                const isSelected = tablink === event.currentTarget;
                tablink.classList.toggle("active-link", isSelected);
                tablink.setAttribute('aria-selected', isSelected.toString());
                tablink.setAttribute('tabindex', isSelected ? '0' : '-1');
            });

            Cache.tabContents.forEach(tabcontent => {
                const isTargetPanel = tabcontent.id === tabpanelId;
                tabcontent.classList.toggle("hidden", !isTargetPanel);
                tabcontent.setAttribute('aria-hidden', (!isTargetPanel).toString());
                if (isTargetPanel) {
                    tabcontent.classList.remove('animate-fade-in');
                    void tabcontent.offsetWidth;
                    tabcontent.classList.add('animate-fade-in');
                }
            });

            if (event.type === 'keydown' && (event.key === 'Enter' || event.key === ' ')) {
                event.currentTarget.focus();
            }
        }

        // --- Mobile Menu ---
        function openmenu() {
            if (!Cache.sidemenu) return;
            Cache.sidemenu.classList.remove('translate-x-full');
            Cache.sidemenu.classList.add('translate-x-0');
            Cache.sidemenu.setAttribute('aria-hidden', 'false');
            Cache.mobileMenuButton?.setAttribute('aria-expanded', 'true');
            document.body.style.overflow = 'hidden';
            trapFocus(Cache.sidemenu);
        }
        function closemenu() {
            if (!Cache.sidemenu) return;
            Cache.sidemenu.classList.remove('translate-x-0');
            Cache.sidemenu.classList.add('translate-x-full');
            Cache.sidemenu.setAttribute('aria-hidden', 'true');
            Cache.mobileMenuButton?.setAttribute('aria-expanded', 'false');
            document.body.style.overflow = '';
            releaseFocus(Cache.sidemenu);
            Cache.mobileMenuButton?.focus();
        }

        // --- Contact Form Submission (SIMULATED) ---
        function showFeedback(message, isError = false) {
            if (!Cache.formMsg) return;
            Cache.formMsg.textContent = message;
            Cache.formMsg.className = 'mt-6 p-4 rounded-md text-center font-medium text-sm transition-all duration-300 opacity-100 transform translate-y-0';
            if (isError) {
                Cache.formMsg.classList.add('bg-red-100', 'border', 'border-red-300', 'text-red-800', 'dark:bg-red-900/30', 'dark:border-red-700', 'dark:text-red-300');
            } else {
                Cache.formMsg.classList.add('bg-green-100', 'border', 'border-green-300', 'text-green-800', 'dark:bg-green-900/30', 'dark:border-green-700', 'dark:text-green-300');
            }
            Cache.formMsg.style.visibility = 'visible';
            Cache.formMsg.setAttribute('aria-hidden', 'false');
        }
        function hideFeedback() {
            if (!Cache.formMsg) return;
            Cache.formMsg.textContent = '';
            Cache.formMsg.className = 'mt-6 p-4 rounded-md text-center font-medium text-sm transition-all duration-300 opacity-0 transform translate-y-2';
            Cache.formMsg.style.visibility = 'hidden';
            Cache.formMsg.setAttribute('aria-hidden', 'true');
        }
        function setLoading(isLoading) {
            if (!Cache.submitButton || !Cache.submitButtonText || !Cache.submitButtonIcon || !Cache.loadingSpinner || !Cache.contactForm) return;

            if (isLoading) {
                Cache.submitButton.disabled = true;
                Cache.contactForm.setAttribute('aria-busy', 'true');
                Cache.submitButtonText.style.opacity = '0';
                Cache.submitButtonIcon.style.opacity = '0';
                Cache.submitButtonText.style.visibility = 'hidden';
                Cache.submitButtonIcon.style.visibility = 'hidden';
                Cache.loadingSpinner.style.opacity = '1';
                Cache.loadingSpinner.style.pointerEvents = 'auto';
                hideFeedback();
            } else {
                Cache.submitButton.disabled = false;
                Cache.contactForm.setAttribute('aria-busy', 'false');
                Cache.submitButtonText.style.opacity = '1';
                Cache.submitButtonIcon.style.opacity = '1';
                Cache.submitButtonText.style.visibility = 'visible';
                Cache.submitButtonIcon.style.visibility = 'visible';
                Cache.loadingSpinner.style.opacity = '0';
                Cache.loadingSpinner.style.pointerEvents = 'none';
            }
        }
        async function handleFormSubmit(e) {
            e.preventDefault();
            if (!Cache.contactForm) return;

            if (!Cache.contactForm.checkValidity()) {
                showFeedback('Please fill out all required fields correctly.', true);
                const firstInvalid = Cache.contactForm.querySelector(':invalid');
                if (firstInvalid) firstInvalid.focus();
                return;
            }

            setLoading(true);
            await new Promise(resolve => setTimeout(resolve, 1000));

            try {
                showFeedback('Thank you for your message! I will get back to you soon.');
                Cache.contactForm.reset();
                setTimeout(hideFeedback, 6000);
            } catch (error) {
                console.error('Form handling error (simulated):', error);
                showFeedback('An unexpected error occurred. Please try again later.', true);
            } finally {
                setLoading(false);
            }
        }

        // --- Show More/Less Functionality (Enhanced with Animation) ---
        function setupToggle(wrapper, itemSelector, moreBtn, lessBtn, initialVisibleCount, updateFnNameBase) {
            if (!wrapper || !moreBtn || !lessBtn) {
                console.warn(`Toggle setup failed for ${updateFnNameBase || 'unknown section'}: Elements missing.`);
                return;
            }
            const items = (wrapper.id === 'portfolio-list-hidden')
                ? Array.from(wrapper.querySelectorAll(':scope > .work-item'))
                : Array.from(wrapper.querySelectorAll(`:scope > ${itemSelector}`));

            const totalItems = items.length;

            if (totalItems <= initialVisibleCount) {
                items.forEach(item => item.classList.remove('hidden'));
                moreBtn.classList.add('hidden');
                lessBtn.classList.add('hidden');
                return;
            }

            const wrapperId = wrapper.id;
            if (wrapperId) {
                moreBtn.setAttribute('aria-controls', wrapperId);
                lessBtn.setAttribute('aria-controls', wrapperId);
            }

            const updateVisibility = (showAll) => {
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

                items.forEach((item, index) => {
                    const isInitiallyHidden = index >= initialVisibleCount;
                    const shouldBeHidden = isInitiallyHidden && !showAll;

                    if (!shouldBeHidden && item.classList.contains('hidden')) {
                        item.classList.remove('hidden');
                        if (isInitiallyHidden && !prefersReducedMotion) {
                            item.classList.add('show-more-item');
                            item.style.animationDelay = `${(index - initialVisibleCount) * SHOW_MORE_STAGGER}ms`;
                            item.classList.add('animate-in');
                            item.addEventListener('animationend', () => {
                                item.classList.remove('animate-in', 'show-more-item');
                                item.style.animationDelay = '';
                            }, { once: true });
                        } else {
                            item.style.opacity = '1';
                            item.style.transform = 'translateY(0)';
                        }
                    } else if (shouldBeHidden && !item.classList.contains('hidden')) {
                        item.classList.add('hidden');
                        item.classList.remove('animate-in', 'show-more-item');
                        item.style.animationDelay = '';
                        item.style.opacity = '';
                        item.style.transform = '';
                    }
                });

                moreBtn.classList.toggle('hidden', showAll);
                lessBtn.classList.toggle('hidden', !showAll);
                moreBtn.setAttribute('aria-expanded', showAll.toString());
                lessBtn.setAttribute('aria-expanded', showAll.toString());

                if (!showAll && document.activeElement === lessBtn) {
                    setTimeout(() => moreBtn.focus({ preventScroll: true }), 50);
                }
            };

            items.forEach((item, index) => item.classList.toggle('hidden', index >= initialVisibleCount));
            if (wrapper.tagName !== 'DIV' || !wrapper.classList.contains('contents')) {
                wrapper.classList.remove('hidden');
            }
            moreBtn.classList.remove('hidden');
            lessBtn.classList.add('hidden');
            moreBtn.setAttribute('aria-expanded', 'false');
            lessBtn.setAttribute('aria-expanded', 'false');

            moreBtn.onclick = () => updateVisibility(true);
            lessBtn.onclick = () => updateVisibility(false);
        }

        // --- Accessibility: Focus Trapping ---
        function trapFocus(element) {
            if (!element) return;
            const focusableEls = Array.from(element.querySelectorAll(FOCUSABLE_MODAL_ELEMENTS)).filter(el => el.offsetParent !== null);

            if (focusableEls.length === 0) {
                const closeButton = element.querySelector('.icon-close, #modal-close-button');
                if (closeButton) { try { closeButton.focus(); } catch (e) { } }
                else if (element.hasAttribute('tabindex')) { try { element.focus(); } catch (e) { } }
                return;
            }

            const firstFocusableEl = focusableEls[0];
            const lastFocusableEl = focusableEls[focusableEls.length - 1];

            try { firstFocusableEl.focus({ preventScroll: true }); } catch (e) { console.warn("Failed to focus first element in trap", e); }

            const handleKeyDown = (e) => {
                if (e.key !== 'Tab') return;

                const currentFocusableEls = Array.from(element.querySelectorAll(FOCUSABLE_MODAL_ELEMENTS)).filter(el => el.offsetParent !== null);
                if (currentFocusableEls.length === 0) return;

                const currentFirst = currentFocusableEls[0];
                const currentLast = currentFocusableEls[currentFocusableEls.length - 1];
                const currentlyFocused = document.activeElement;

                if (e.shiftKey) {
                    if (currentlyFocused === currentFirst || !element.contains(currentlyFocused)) {
                        e.preventDefault();
                        try { currentLast.focus({ preventScroll: true }); } catch (e) { console.warn("Failed to focus last element in trap", e); }
                    }
                } else {
                    if (currentlyFocused === currentLast || !element.contains(currentlyFocused)) {
                        e.preventDefault();
                        try { currentFirst.focus({ preventScroll: true }); } catch (e) { console.warn("Failed to focus first element in trap", e); }
                    }
                }
            };

            element.focusTrapHandler = handleKeyDown;
            element.addEventListener('keydown', element.focusTrapHandler);
        }
        function releaseFocus(element = Cache.projectModal) {
            if (!element) return;
            if (typeof element.focusTrapHandler === 'function') {
                element.removeEventListener('keydown', element.focusTrapHandler);
                delete element.focusTrapHandler;
            }
            if (focusedElementBeforeModal) {
                try { focusedElementBeforeModal.focus({ preventScroll: true }); } catch (e) { console.warn("Failed to restore focus", e); }
                focusedElementBeforeModal = null;
            }
        }

        // --- Project Modal (Enhanced Transitions) ---
        function openProjectModal(workItemElement) {
            if (!workItemElement || !Cache.modalOverlay || !Cache.modalContent || !Cache.modalTitle || !Cache.modalDesc || !Cache.modalTech || !Cache.modalLinks || !Cache.modalLearningsContainer || !Cache.modalCloseButton) {
                console.error("Modal elements not found or work item invalid.");
                return;
            }

            Cache.modalTitle.textContent = workItemElement.dataset.modalTitle || 'Project Details';
            Cache.modalDesc.textContent = workItemElement.dataset.modalDesc || 'No description available.';
            Cache.modalTech.textContent = workItemElement.dataset.modalTech || 'N/A';
            Cache.modalLearningsContainer.innerHTML = '';
            const learnings = workItemElement.dataset.modalLearnings;
            if (learnings) {
                Cache.modalLearningsContainer.innerHTML = `<strong class="text-text-main dark:text-dark-text-main font-medium block mb-1">Key Learnings:</strong><p class="text-sm text-text-light dark:text-dark-text-light leading-relaxed">${learnings}</p>`;
            }
            Cache.modalLinks.innerHTML = '';
            const liveLink = workItemElement.dataset.modalLive;
            const repoLink = workItemElement.dataset.modalRepo;
            if (liveLink) Cache.modalLinks.innerHTML += `<a href="${liveLink}" target="_blank" rel="noopener noreferrer" class="btn btn-primary text-sm px-4 py-2"><i class="fas fa-external-link-alt mr-2"></i> View Live</a>`;
            if (repoLink) Cache.modalLinks.innerHTML += `<a href="${repoLink}" target="_blank" rel="noopener noreferrer" class="btn btn-secondary text-sm px-4 py-2"><i class="fab fa-github mr-2"></i> View Code</a>`;
            if (!liveLink && !repoLink) Cache.modalLinks.innerHTML = '<p class="text-sm text-text-light dark:text-dark-text-light italic">No external links available.</p>';

            focusedElementBeforeModal = document.activeElement;
            Cache.modalOverlay.classList.add('active');
            Cache.modalOverlay.setAttribute('aria-hidden', 'false');
            isModalOpen = true;
            document.body.style.overflow = 'hidden';

            setTimeout(() => {
                trapFocus(Cache.modalContent);
                const firstFocusable = Cache.modalContent.querySelector(FOCUSABLE_MODAL_ELEMENTS);
                try {
                    (firstFocusable || Cache.modalCloseButton || Cache.modalContent).focus({ preventScroll: true });
                } catch (e) { console.warn("Failed to set initial focus in modal", e); }
            }, 50);
        }
        function closeProjectModal() {
            if (!Cache.modalOverlay || !isModalOpen) return;
            Cache.modalOverlay.classList.remove('active');
            Cache.modalOverlay.setAttribute('aria-hidden', 'true');
            isModalOpen = false;
            document.body.style.overflow = '';
            releaseFocus(Cache.modalContent);
        }

        // --- Footer & Scrolling ---
        function setFooterYear() {
            const currentYearSpan = document.getElementById('current-year');
            if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
        }
        function smoothScrollTo(targetElement) {
            const headerOffset = Cache.siteHeader?.offsetHeight ?? SCROLL_OFFSET;
            const elementPosition = targetElement.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - headerOffset - 15;
            window.scrollTo({ top: offsetPosition, behavior: "smooth" });
        }
        function updateActiveNavLink() {
            let currentSectionId = '';
            const sections = document.querySelectorAll('main section[id]');
            const scrollY = window.pageYOffset;
            const viewportHeight = window.innerHeight;
            const docHeight = document.body.offsetHeight;

            sections.forEach(section => {
                const sectionTop = section.offsetTop - SCROLL_OFFSET - 50;
                const sectionHeight = section.offsetHeight;
                if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                    currentSectionId = section.id;
                }
            });

            if (scrollY + viewportHeight >= docHeight - 100) {
                const lastSection = sections[sections.length - 1];
                if (lastSection) currentSectionId = lastSection.id;
            }
            else if (scrollY < (document.getElementById('about')?.offsetTop ?? 500) - SCROLL_OFFSET - 50) {
                currentSectionId = 'hero';
            }

            Cache.navLinks.forEach(link => {
                const linkHrefHash = link.hash;
                const isActive = linkHrefHash === `#${currentSectionId}`;
                link.classList.toggle('active-nav', isActive);
                link.classList.toggle('text-primary', isActive);
                link.classList.toggle('dark:text-dark-primary', isActive);
                link.classList.toggle('font-semibold', isActive);
                link.classList.toggle('text-text-main', !isActive);
                link.classList.toggle('dark:text-dark-text-light', !isActive);
                link.setAttribute('aria-current', isActive ? 'page' : null);
            });
        }
        const debouncedUpdateActiveNav = debounce(updateActiveNavLink, 100);
        function handleScroll() {
            const scrollPosition = window.scrollY;

            Cache.siteHeader?.classList.toggle('shadow-lg', scrollPosition > 50);
            Cache.siteHeader?.classList.toggle('glass-effect', scrollPosition > 50);

            if (Cache.backToTopButton) {
                const isVisible = scrollPosition > 300;
                Cache.backToTopButton.style.opacity = isVisible ? '1' : '0';
                Cache.backToTopButton.style.transform = isVisible ? 'translateY(0)' : 'translateY(1rem)';
                Cache.backToTopButton.style.pointerEvents = isVisible ? 'auto' : 'none';
                Cache.backToTopButton.setAttribute('aria-hidden', (!isVisible).toString());
            }
            debouncedUpdateActiveNav();
        }
        function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

        // --- Scroll Animations ---
        function setupScrollAnimations() {
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            if (!('IntersectionObserver' in window) || prefersReducedMotion) {
                console.warn("IntersectionObserver not supported or reduced motion preferred, scroll animations disabled/simplified.");
                animatedElements.forEach(el => {
                    el.classList.add('is-visible', 'opacity-100');
                    if (!prefersReducedMotion) {
                        el.classList.remove('animate-fade-up', 'animate-slide-left', 'animate-slide-right');
                        el.style.transform = 'translate(0, 0)';
                    }
                    if (prefersReducedMotion) { el.style.transition = 'none'; }
                });
                return;
            }

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const delay = parseInt(entry.target.dataset.delay || '0', 10);
                        entry.target.style.transitionDelay = `${delay}ms`;
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { rootMargin: '0px 0px -50px 0px', threshold: 0.1 });

            animatedElements.forEach(el => observer.observe(el));
        }

        // --- Contact Info Helpers ---
        function copyEmailToClipboard() {
            const email = Cache.emailAddressSpan?.textContent;
            if (!email || !navigator.clipboard) {
                alert('Failed to copy email. Clipboard API not available or permission denied.');
                return;
            }
            navigator.clipboard.writeText(email).then(() => {
                if (Cache.copyFeedbackSpan) {
                    Cache.copyFeedbackSpan.style.opacity = '1';
                    Cache.copyFeedbackSpan.setAttribute('aria-hidden', 'false');
                    setTimeout(() => {
                        Cache.copyFeedbackSpan.style.opacity = '0';
                        Cache.copyFeedbackSpan.setAttribute('aria-hidden', 'true');
                    }, 2000);
                }
            }).catch(err => {
                console.error('Could not copy text: ', err);
                alert('Failed to copy email.');
            });
        }

        // --- Event Listener Setup ---
        function addEventListeners() {
            Cache.mobileMenuButton?.addEventListener('click', openmenu);
            Cache.mobileMenuCloseButton?.addEventListener('click', closemenu);
            Cache.sidemenu?.querySelectorAll('a[href^="#"]').forEach(link => link.addEventListener('click', closemenu));

            Cache.tabLinks.forEach(link => {
                link.addEventListener('click', (e) => opentab(e, link.getAttribute('aria-controls')));
                link.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); opentab(e, link.getAttribute('aria-controls')); }
                });
            });

            Cache.contactForm?.addEventListener('submit', handleFormSubmit);

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const targetId = this.hash;
                    if (this.classList.contains('skip-link') || !targetId || targetId === '#') { return; }
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        e.preventDefault();
                        smoothScrollTo(targetElement);
                        setTimeout(() => {
                            targetElement.setAttribute('tabindex', '-1');
                            try { targetElement.focus({ preventScroll: true }); } catch (e) { }
                        }, 600);
                    }
                });
            });

            Cache.backToTopButton?.addEventListener('click', scrollToTop);
            Cache.modalCloseButton?.addEventListener('click', closeProjectModal);
            Cache.modalOverlay?.addEventListener('click', (e) => { if (e.target === Cache.modalOverlay) closeProjectModal(); });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && isModalOpen) closeProjectModal(); });
            Cache.copyEmailBtn?.addEventListener('click', copyEmailToClipboard);
            window.addEventListener('scroll', handleScroll, { passive: true });
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM Loaded - Initializing Portfolio v3.4 (Corrected)..."); // Updated log
            initializeTheme();
            setFooterYear();

            setupToggle(Cache.skillsHiddenWrapper, "li", Cache.skillsMoreBtn, Cache.skillsLessBtn, 0, 'Skills');
            setupToggle(Cache.educationHiddenWrapper, "li", Cache.educationMoreBtn, Cache.educationLessBtn, 0, 'Education');
            setupToggle(Cache.portfolioHiddenWrapper, ".work-item", Cache.portfolioMoreBtn, Cache.portfolioLessBtn, 0, 'Portfolio');

            const initialPortfolioItems = Cache.portfolioList?.querySelectorAll('.work-list > .work-item:not(#portfolio-list-hidden .work-item)') || [];
            initialPortfolioItems.forEach((item, index) => {
                if (!item.dataset.delay) { item.dataset.delay = index * ANIMATION_DELAY_STEP; }
            });

            setupScrollAnimations();
            addEventListeners();
            handleScroll();
            updateActiveNavLink();

            const activeTabButton = document.querySelector('.tab-links.active-link');
            if (activeTabButton) {
                const initialPanelId = activeTabButton.getAttribute('aria-controls');
                Cache.tabContents.forEach(panel => {
                    panel.classList.toggle('hidden', panel.id !== initialPanelId);
                    panel.setAttribute('aria-hidden', (panel.id !== initialPanelId).toString());
                    if (panel.id === initialPanelId) {
                        panel.classList.add('animate-fade-in');
                    }
                });
            }
        });

        window.addEventListener('load', () => {
            console.log("Window Loaded - Hiding Preloader.");
            if (Cache.preloader) {
                Cache.preloader.classList.add('loaded');
                Cache.preloader.addEventListener('transitionend', () => {
                    Cache.preloader.remove();
                }, { once: true });
            }
        });

        function showMorePortfolio() { Cache.portfolioMoreBtn?.click(); }
        function showLessPortfolio() { Cache.portfolioLessBtn?.click(); }

    </script>

</body>

</html>