<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raiyan Hasan - React Portfolio (Demo)</title>
    <!-- Meta tags -->
    <meta name="description" content="React demo portfolio for Raiyan Hasan.">
    <meta name="author" content="Raiyan Hasan">

    <!-- Preconnect Hints -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com"> <!-- React/ReactDOM/Babel -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com"> <!-- Tilt -->
    <link rel="preconnect" href="https://kit.fontawesome.com"> <!-- Font Awesome -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com"> <!-- Tailwind -->


    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Config -->
    <script>
         // IMPORTANT: This config might have limited effect when styles are applied
         // directly via className in React without a build process.
         // Basic theme settings might work, but plugins/directives likely won't.
        tailwind.config = {
            darkMode: 'class',
            theme: { /* Your theme config */
                extend: { /* Your extensions */ }
            },
            plugins: [],
        }
    </script>

     <!-- Custom Styles (Keep for simplicity in this demo) -->
    <style type="text/tailwindcss">
       /* ---> Keep your existing @layer base, components, utilities <--- */
       /* Or move this to a separate CSS file and link it */
        @layer base {
             html { @apply font-poppins antialiased bg-bg-light text-text-main dark:bg-dark-bg-dark dark:text-dark-text-main transition-colors duration-300 ease-in-out; }
             body { @apply transition-colors duration-300 ease-in-out overflow-x-hidden; }
             /* ... other base styles ... */
        }
        @layer components {
            /* ... your component styles (.btn, .glass-effect, etc.) ... */
        }
        @layer utilities {
            /* ... your utility styles ... */
             .hidden { display: none !important; }
        }
        /* Fallback for backdrop-filter */
        @supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) { .glass-effect { @apply bg-white/95 dark:bg-dark-bg-surface/95; } }
    </style>

    <!-- React Library CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel Standalone (for JSX compilation in browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Other Libraries (Loaded here, initialized in React) -->
    <script src="https://kit.fontawesome.com/002a13abdf.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>

    <!-- Theme Initialization Script (Run before React) -->
    <script>
        // Keep this simple theme check
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>

<body class="bg-bg-light text-text-main dark:bg-dark-bg-dark dark:text-dark-text-main">

    <!-- Preloader (Can be controlled by React state) -->
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- Root element for React app -->
    <div id="root"></div>

    <!-- Main React App Script -->
    <script type="text/babel"> // IMPORTANT: type="text/babel"

        const { useState, useEffect, useRef, useCallback, Fragment } = React; // Destructure React hooks

        // --- Portfolio Data ---
        const portfolioData = [ /* ... Your existing portfolio data array ... */
             { id: 'mit-clone', title: 'MIT Muzaffarpur Clone', imageSrc: './images/work-5.png', imageAlt: 'MIT Muzaffarpur Clone', shortDesc: 'Responsive university website clone.', modalTitle: 'MIT Muzaffarpur Clone', modalDesc: 'A responsive clone of the official MIT Muzaffarpur website...', modalTech: ['HTML', 'Tailwind CSS', 'JavaScript'], modalLearnings: 'Practiced complex layouts...', liveLink: 'https://hasanraiyan.github.io/MIT', repoLink: null, tags: ['tailwind', 'javascript', 'clone', 'frontend'], initiallyHidden: false },
             { id: 'ttt-ai', title: 'Tic Tac Toe (vs AI)', imageSrc: './images/work-1.png', imageAlt: 'Tic Tac Toe vs AI', shortDesc: 'Play against the computer.', modalTitle: 'Tic Tac Toe (vs AI)', modalDesc: 'Classic Tic Tac Toe game...', modalTech: ['HTML', 'CSS', 'JavaScript'], modalLearnings: 'Implemented game logic...', liveLink: 'https://hasanraiyan.github.io/projects/tik%20tak%20toe/index.html', repoLink: null, tags: ['javascript', 'game', 'ai', 'frontend'], initiallyHidden: false },
             { id: 'calculator', title: 'Web Calculator', imageSrc: './images/work-2.png', imageAlt: 'Web Calculator', shortDesc: 'Functional calculator for quick math.', modalTitle: 'Web Calculator', modalDesc: 'A functional web-based calculator...', modalTech: ['HTML', 'CSS', 'JavaScript'], modalLearnings: 'Focused on DOM manipulation...', liveLink: 'https://hasanraiyan.github.io/projects/calculator/index.html', repoLink: null, tags: ['javascript', 'utility', 'frontend'], initiallyHidden: false },
             // ... Add ALL your projects here, ensuring tags are lowercase
             { id: 'ttt-pvp', title: 'Tic Tac Toe (PvP)', imageSrc: './images/work-3.png', imageAlt: 'Tic Tac Toe PvP', shortDesc: 'Play head-to-head with a friend.', modalTitle: 'Tic Tac Toe (Player vs Player)', modalDesc: 'Play the classic Tic Tac Toe game head-to-head...', modalTech: ['HTML', 'CSS', 'JavaScript'], modalLearnings: 'Refined basic game logic...', liveLink: 'https://hasanraiyan.github.io/TikTakToe/', repoLink: 'https://github.com/hasanraiyan/TikTakToe', tags: ['javascript', 'game', 'frontend'], initiallyHidden: true },
             { id: 'pm-ui', title: 'Project Management UI', imageSrc: './images/work-4.png', imageAlt: 'Project Management UI', shortDesc: 'Conceptual UI for project tracking.', modalTitle: 'Project Management UI (Concept)', modalDesc: 'A conceptual user interface design...', modalTech: ['HTML', 'Tailwind CSS'], modalLearnings: 'Practiced translating UI concepts...', liveLink: 'https://hasanraiyan.github.io/projects/', repoLink: null, tags: ['tailwind', 'ui/ux', 'design', 'frontend'], initiallyHidden: true },
             { id: 'notejs', title: 'NoteJS App', imageSrc: 'https://github.com/hasanraiyan/NoteJS/raw/main/assets/images/apps/HomeScreen.png', imageAlt: 'NoteJS App Home Screen', shortDesc: 'Simple notes app built with React Native.', modalTitle: 'NoteJS - Simple Notes App', modalDesc: 'NoteJS is a basic notes application built with React Native...', modalTech: ['React Native', 'Expo', 'JavaScript'], modalLearnings: 'Developed a cross-platform mobile app...', liveLink: null, repoLink: 'https://github.com/hasanraiyan/NoteJS', tags: ['react native', 'mobile', 'javascript'], initiallyHidden: true },
             { id: 'dostify', title: 'Dostify AI Companion', imageSrc: 'https://dostify-climb.vercel.app/images/app-icon.png', imageAlt: 'Dostify AI Companion Landing Page', shortDesc: 'AI chatbot providing support for students.', modalTitle: 'Dostify - AI Student Companion', modalDesc: 'An AI-powered chatbot designed as a friendly companion...', modalTech: ['React', 'Next.js', 'Tailwind CSS', 'AI Integration', 'Chatbot'], modalLearnings: 'Developed an interactive chatbot interface...', liveLink: 'https://dostify-climb.vercel.app/', repoLink: null, tags: ['react', 'next.js', 'tailwind', 'ai', 'chatbot', 'frontend'], initiallyHidden: true },
        ];
        const PORTFOLIO_INITIAL_VISIBLE_COUNT = 3;

        // --- Helper Components ---

        function Icon({ faClass }) {
            return <i className={faClass} aria-hidden="true"></i>;
        }

        function SkipLink() {
             return <a href="#main-content" className="skip-link">Skip to main content</a>;
        }

        // --- Main App Component ---
        function App() {
            const [theme, setTheme] = useState(() => {
                // Initialize theme based on localStorage/preference
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    return 'dark';
                }
                return 'light';
            });
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            const [isPreloading, setIsPreloading] = useState(true);
            const [activeSection, setActiveSection] = useState('hero');
            const [showBackToTop, setShowBackToTop] = useState(false);
            const [isHeaderSticky, setIsHeaderSticky] = useState(false);

            // Toggle Theme
            const toggleTheme = useCallback(() => {
                setTheme(prevTheme => {
                    const newTheme = prevTheme === 'light' ? 'dark' : 'light';
                    localStorage.theme = newTheme;
                    return newTheme;
                });
            }, []);

            // Update HTML classlist when theme changes
            useEffect(() => {
                const root = document.documentElement;
                if (theme === 'dark') {
                    root.classList.add('dark');
                } else {
                    root.classList.remove('dark');
                }
            }, [theme]);

            // Handle Mobile Menu
            const openMobileMenu = useCallback(() => setIsMobileMenuOpen(true), []);
            const closeMobileMenu = useCallback(() => setIsMobileMenuOpen(false), []);

            // Handle Preloader
            useEffect(() => {
                const handleLoad = () => {
                    const preloader = document.getElementById('preloader');
                    if (preloader) {
                         requestAnimationFrame(() => { // Ensure DOM is ready for transition
                            preloader.classList.add('loaded');
                            preloader.addEventListener('transitionend', () => {
                                setIsPreloading(false); // Remove preloader state *after* transition
                                preloader.remove(); // Also remove from DOM
                            }, { once: true });
                         });
                    } else {
                         setIsPreloading(false); // If no preloader element, just update state
                    }
                };
                // Use load event to ensure all resources are loaded
                window.addEventListener('load', handleLoad);
                return () => window.removeEventListener('load', handleLoad);
            }, []);

             // Handle Scroll Effects (Debounced)
             useEffect(() => {
                 const SCROLL_OFFSET = 70;
                 let debounceTimeout;

                 const handleScroll = () => {
                     clearTimeout(debounceTimeout);
                     debounceTimeout = setTimeout(() => {
                         const scrollY = window.pageYOffset;
                         setShowBackToTop(scrollY > 300);
                         setIsHeaderSticky(scrollY > 50);

                         // --- Active Nav Link Logic ---
                         let currentSection = 'hero'; // Default
                         const sections = document.querySelectorAll('main section[id]');
                         sections.forEach(section => {
                             const sectionTop = section.offsetTop - SCROLL_OFFSET - 50;
                             if (scrollY >= sectionTop) {
                                 currentSection = section.id || 'hero';
                             }
                         });
                         setActiveSection(currentSection);
                         // --- End Active Nav Link ---

                     }, 100); // Debounce time
                 };

                 window.addEventListener('scroll', handleScroll, { passive: true });
                 handleScroll(); // Initial check

                 return () => {
                     clearTimeout(debounceTimeout);
                     window.removeEventListener('scroll', handleScroll);
                 };
             }, []);


             const scrollToTop = () => {
                 window.scrollTo({ top: 0, behavior: 'smooth' });
             };

             // --- Render App ---
            // Don't render the main app until preloading is false
            if (isPreloading) {
                return null; // Or return just the preloader if you want it visible initially
            }


            return (
                <Fragment>
                     <SkipLink />
                    <Header
                        theme={theme}
                        toggleTheme={toggleTheme}
                        isMobileMenuOpen={isMobileMenuOpen}
                        openMobileMenu={openMobileMenu}
                        closeMobileMenu={closeMobileMenu}
                        activeSection={activeSection}
                        isSticky={isHeaderSticky}
                    />
                    <main id="main-content">
                        <HeroSection />
                        <AboutSection />
                        <PortfolioSection />
                        <ContactSection />
                    </main>
                    <Footer />
                    {showBackToTop && (
                         <button
                             id="back-to-top"
                             onClick={scrollToTop}
                             className="back-to-top fixed bottom-5 right-5 bg-primary dark:bg-dark-primary text-white w-9 h-9 rounded-full flex items-center justify-center text-base shadow-lg hover:bg-primary-darker dark:hover:bg-dark-primary-darker transition-all duration-200 opacity-100 transform translate-y-0 icon-interact"
                             aria-label="Back to top"
                         >
                             <Icon faClass="fas fa-arrow-up" />
                         </button>
                    )}

                </Fragment>
            );
        }

        // --- Header Component ---
        function Header({ theme, toggleTheme, isMobileMenuOpen, openMobileMenu, closeMobileMenu, activeSection, isSticky }) {
            // Theme Icons Logic
            const isDark = theme === 'dark';

            const navLinkClass = (sectionId) => {
                 let base = "nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium";
                 if (activeSection === sectionId) {
                     base += " active-nav text-primary dark:text-dark-primary font-semibold";
                 }
                 return base;
            };

            return (
                <header id="site-header" className={`sticky top-0 z-50 transition-shadow duration-300 ease-in-out ${isSticky ? 'shadow-lg glass-effect' : ''}`}>
                    <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                         <nav id="main-nav" className="flex items-center justify-between h-16 md:h-20">
                            <a href="#hero" className="logo-link flex-shrink-0 icon-interact">
                                <img src="./images/logo.png" alt="Raiyan Hasan Logo" className="h-10 md:h-12" width="48" height="48" />
                            </a>

                            {/* Desktop Nav */}
                            <div className="hidden md:flex items-center space-x-6 lg:space-x-8">
                                <ul className="flex items-center space-x-6 lg:space-x-8">
                                     <li><a href="#hero" className={navLinkClass('hero')}>Home</a></li>
                                     <li><a href="#about" className={navLinkClass('about')}>About</a></li>
                                     <li><a href="#portfolio" className={navLinkClass('portfolio')}>Portfolio</a></li>
                                     <li><a href="#contact" className={navLinkClass('contact')}>Contact</a></li>
                                </ul>
                                <button
                                    type="button"
                                    onClick={toggleTheme}
                                    className="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus-visible:ring-2 focus-visible:ring-gray-400 dark:focus-visible:ring-gray-500 rounded-lg text-sm p-2.5 icon-interact"
                                    aria-label="Toggle dark mode"
                                    aria-pressed={isDark.toString()}
                                >
                                    {/* Conditional SVG Rendering */}
                                    {isDark ? (
                                         <svg id="theme-toggle-light-icon" className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fillRule="evenodd" clipRule="evenodd"></path></svg>
                                    ) : (
                                         <svg id="theme-toggle-dark-icon" className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                                    )}
                                </button>
                            </div>

                            {/* Mobile Toggles */}
                             <div className="md:hidden flex items-center space-x-4">
                                 <button type="button" onClick={toggleTheme} className="/* Theme toggle classes */ icon-interact" aria-label="Toggle dark mode" aria-pressed={isDark.toString()}>
                                      {isDark ? <Icon faClass="fas fa-sun w-5 h-5" /> : <Icon faClass="fas fa-moon w-5 h-5" />}
                                 </button>
                                 <button className="icon-menu text-primary dark:text-dark-primary text-3xl hover:text-primary-darker dark:hover:text-dark-primary-darker icon-interact" onClick={openMobileMenu} aria-label="Open menu" aria-expanded="false" aria-controls="sidemenu">
                                     <Icon faClass="fas fa-bars" />
                                 </button>
                             </div>

                             {/* --- Mobile Menu --- */}
                             <div
                                 id="sidemenu"
                                 className={`md:hidden fixed top-0 right-0 h-screen w-64 sm:w-72 bg-gradient-to-b from-primary-darker to-primary dark:from-dark-primary-darker dark:to-dark-primary shadow-xl transform transition-transform duration-300 ease-in-out pt-24 px-6 space-y-4 z-40 ${isMobileMenuOpen ? 'translate-x-0' : 'translate-x-full'}`}
                                 aria-hidden={!isMobileMenuOpen}
                             >
                                 <ul className="space-y-2"> {/* Adjusted list spacing */}
                                     <li><a href="#hero" onClick={closeMobileMenu} className="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">Home</a></li>
                                     <li><a href="#about" onClick={closeMobileMenu} className="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">About</a></li>
                                     <li><a href="#portfolio" onClick={closeMobileMenu} className="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">Portfolio</a></li>
                                     <li><a href="#contact" onClick={closeMobileMenu} className="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">Contact</a></li>
                                 </ul>
                                 <button className="icon-close absolute top-5 right-5 text-white hover:text-gray-200 text-2xl transition-colors duration-300 icon-interact" onClick={closeMobileMenu} aria-label="Close menu">
                                     <Icon faClass="fas fa-times" />
                                 </button>
                             </div>

                         </nav>
                    </div>
                </header>
            );
        }

        // --- Hero Section Component ---
         function HeroSection() {
             const typedRef = useRef(null); // Ref for the Typed.js target span
             const typedInstanceRef = useRef(null); // Ref to store the Typed instance

             useEffect(() => {
                 // Ensure Typed.js is loaded
                 if (typeof Typed !== 'undefined' && typedRef.current) {
                     const options = {
                         strings: [
                             'from MIT Muzaffarpur.',
                             'a MERN Stack Developer.',
                             'a Problem Solver.',
                             'Passionate about Code.'
                         ],
                         typeSpeed: 55,
                         backSpeed: 35,
                         backDelay: 1600,
                         loop: true,
                         smartBackspace: true,
                         cursorChar: '_',
                     };
                     // Initialize Typed.js
                     typedInstanceRef.current = new Typed(typedRef.current, options);
                 } else {
                     console.warn("Typed.js not loaded or target element not found.");
                     // Provide fallback text if Typed.js fails
                     if (typedRef.current) typedRef.current.textContent = "from MIT Muzaffarpur.";
                 }

                 // Cleanup function to destroy Typed instance on component unmount
                 return () => {
                     if (typedInstanceRef.current) {
                         typedInstanceRef.current.destroy();
                         typedInstanceRef.current = null;
                     }
                 };
             }, []); // Empty dependency array ensures this runs only once on mount

             return (
                 <section id="hero" className="pt-24 md:pt-28 pb-16 md:pb-24 min-h-[calc(90vh-80px)] flex items-center relative overflow-hidden bg-gradient-to-br from-blue-100 via-bg-light to-indigo-100 dark:from-gray-900 dark:via-dark-bg-dark dark:to-indigo-900/40">
                      {/* Decorative Blobs - Can be simple divs */}
                      <div className="absolute top-1/4 left-10 w-24 h-24 bg-blue-200/20 dark:bg-blue-800/15 rounded-full filter blur-2xl opacity-40 dark:opacity-25 animate-pulse-glow"></div>
                      <div className="absolute bottom-1/4 right-10 w-32 h-32 bg-indigo-200/20 dark:bg-indigo-800/15 rounded-full filter blur-2xl opacity-40 dark:opacity-25 animate-pulse-glow animation-delay-2000"></div>

                      <div className="container mx-auto px-4 sm:px-6 lg:px-8 z-10">
                         <div className="header-text text-center max-w-4xl mx-auto">
                              <p className="text-base md:text-lg text-primary dark:text-dark-primary font-medium mb-2">MERN Stack Web Developer & IT Student</p>
                              <h1 className="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-text-main dark:text-dark-text-main leading-tight mb-4">
                                 Hi, I'm <span className="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-500 dark:from-dark-primary dark:to-blue-400">Raiyan Hasan</span><br />
                                 {/* Target for Typed.js */}
                                 <span ref={typedRef} className="text-primary dark:text-dark-primary min-h-[1.2em] inline-block"></span>
                              </h1>
                             <p className="text-sm md:text-base text-text-light dark:text-dark-text-light max-w-xl mx-auto mb-6">
                                 Passionate about crafting clean, efficient, and user-friendly web experiences. Exploring the intersection of technology, creativity, and problem-solving.
                             </p>
                             <div>
                                 <a href="#portfolio" className="btn btn-primary text-base px-6 py-2 mr-2 mb-2 sm:mb-0">View Work</a>
                                 <a href="#contact" className="btn btn-secondary text-base px-6 py-2">Get In Touch</a>
                             </div>
                         </div>
                     </div>
                      <a href="#about" className="absolute bottom-6 left-1/2 -translate-x-1/2 text-primary dark:text-dark-primary text-xl animate-bounce hidden md:block icon-interact" aria-label="Scroll down">
                          <Icon faClass="fas fa-chevron-down" />
                      </a>
                 </section>
             );
         }

        // --- About Section Component ---
        function AboutSection() {
            const [activeTab, setActiveTab] = useState('skills'); // Default tab

            const openTab = (tabId) => {
                setActiveTab(tabId);
            };

            return (
                 <section id="about" className="py-16 md:py-24 bg-bg-surface dark:bg-dark-bg-surface">
                      <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                           <div className="flex flex-wrap lg:flex-nowrap justify-between gap-10 md:gap-12 items-start">
                               <div className="about-col-1 w-full lg:w-2/5 xl:w-1/3 flex-shrink-0">
                                    <div className="relative group">
                                         <div className="absolute -inset-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-lg blur opacity-20 group-hover:opacity-40 transition duration-300"></div>
                                         <img src="./images/user1.png" alt="Raiyan Hasan profile picture" className="relative rounded-xl shadow-lg w-full max-w-sm mx-auto lg:max-w-none" loading="lazy" width="400" height="400" style={{ aspectRatio: '1 / 1', objectFit: 'cover' }} />
                                    </div>
                               </div>
                               <div className="about-col-2 w-full lg:w-3/5 xl:w-2/3">
                                    <h2 className="subtitle text-2xl md:text-3xl text-primary dark:text-dark-primary font-semibold mb-10 md:mb-12 text-left relative pb-3 subtitle-underline-left">About Me</h2>
                                    <p className="about-intro text-sm md:text-base text-text-light dark:text-dark-text-light mb-6 leading-relaxed">
                                         Hello! I'm Raiyan Hasan, a dedicated B.Tech student in Information Technology at MIT Muzaffarpur (2023-27). My fascination lies in web development where I strive to build intuitive, efficient, and accessible digital experiences.
                                    </p>

                                    {/* Tab Titles */}
                                     <div className="tab-titles flex border-b border-border-light dark:border-dark-border-dark mb-5 space-x-4 sm:space-x-6 flex-wrap text-sm" role="tablist">
                                         <button
                                             className={`tab-links py-1.5 px-1 sm:px-2 font-medium whitespace-nowrap ${activeTab === 'skills' ? 'active-link' : ''}`}
                                             onClick={() => openTab('skills')} role="tab" aria-selected={activeTab === 'skills'} aria-controls="skills-panel"
                                         >Skills</button>
                                         <button
                                             className={`tab-links py-1.5 px-1 sm:px-2 font-medium whitespace-nowrap ${activeTab === 'education' ? 'active-link' : ''}`}
                                             onClick={() => openTab('education')} role="tab" aria-selected={activeTab === 'education'} aria-controls="education-panel"
                                         >Education</button>
                                     </div>

                                     {/* Tab Content */}
                                     <div className="relative min-h-[250px]"> {/* Container for smooth transition */}
                                         <SkillsTab isVisible={activeTab === 'skills'} />
                                         <EducationTab isVisible={activeTab === 'education'} />
                                     </div>
                               </div>
                           </div>
                      </div>
                 </section>
            );
        }

        // --- Skills Tab Content Component ---
        function SkillsTab({ isVisible }) {
             // Basic show/less logic can be added here with useState
            return (
                 <div id="skills-panel" className={`tab-contents text-sm ${isVisible ? 'active-tab' : 'hidden'}`} role="tabpanel" aria-hidden={!isVisible}>
                    {/* Simplified Skills Content */}
                    <ul className="space-y-4">
                         <li>
                              <div className="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5 group">
                                  <a href="https://www.hackerrank.com/certificates/bb25b2ccfbf1" target="_blank" rel="noopener noreferrer" className="inline-block group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                      <strong className="block text-base font-semibold mb-0.5 flex items-center">
                                          <Icon faClass="fab fa-python mr-2 text-base text-primary dark:text-dark-primary" />Python
                                          <Icon faClass="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70" />
                                      </strong>
                                  </a>
                                  <span className="block text-xs ml-6">HackerRank Certified.</span>
                              </div>
                          </li>
                         <li>
                              <div className="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5">
                                  <strong className="block text-base font-semibold mb-0.5 flex items-center">
                                      <Icon faClass="fas fa-code mr-2 text-base text-primary dark:text-dark-primary" />MERN Stack
                                  </strong>
                                  <span className="block text-xs ml-6">MongoDB, Express, React, Node.js, Tailwind, etc.</span>
                              </div>
                          </li>
                          {/* Add more skills or implement show/less */}
                    </ul>
                     <div className="mt-6 pt-4 border-t border-border-light dark:border-dark-border-dark">
                         <strong className="block text-base font-semibold mb-2">Currently Learning</strong>
                         <ul className="list-disc list-inside space-y-1 text-xs pl-1">
                             <li>Advanced MERN concepts</li>
                             <li>Web Accessibility (WCAG)</li>
                         </ul>
                     </div>
                     {/* Add Show More/Less Button Logic if needed */}
                </div>
            );
        }

        // --- Education Tab Content Component ---
        function EducationTab({ isVisible }) {
             // Basic show/less logic can be added here with useState
            return (
                 <div id="education-panel" className={`tab-contents text-sm ${isVisible ? 'active-tab' : 'hidden'}`} role="tabpanel" aria-hidden={!isVisible}>
                    {/* Simplified Education Content */}
                     <ul className="space-y-4">
                         <li>
                              <div className="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5 group">
                                  <a href="https://www.mitmuzaffarpur.org/mit-student/rayan-hasan/" target="_blank" rel="noopener noreferrer" className="inline-block group-hover:text-primary-darker">
                                      <strong className="block text-base font-semibold mb-0.5 flex items-center">
                                          <Icon faClass="fas fa-university mr-2 text-base text-primary dark:text-dark-primary" />B.Tech - IT
                                          <Icon faClass="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70" />
                                      </strong>
                                  </a>
                                  <span className="block text-xs ml-6">MIT Muzaffarpur (2023 - 2027, Ongoing)</span>
                              </div>
                          </li>
                          <li>
                              <div className="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5">
                                  <strong className="block text-base font-semibold mb-0.5 flex items-center">
                                      <Icon faClass="fas fa-graduation-cap mr-2 text-base text-primary dark:text-dark-primary" />Intermediate (XII) - PCM
                                  </strong>
                                  <span className="block text-xs ml-6">St. Judes Vidyalaya (CBSE) - 2023 | 84.6%</span>
                              </div>
                          </li>
                          {/* Add Matriculation or implement show/less */}
                     </ul>
                     {/* Add Show More/Less Button Logic if needed */}
                 </div>
            );
        }


        // --- Portfolio Section ---
        function PortfolioSection() {
             const [filter, setFilter] = useState('all');
             const [showAll, setShowAll] = useState(false);
             const [modalData, setModalData] = useState(null); // State to hold data for the open modal
             const [availableTags, setAvailableTags] = useState(['All']);

             // Calculate available tags once
             useEffect(() => {
                  const tags = new Set(['All']);
                  portfolioData.forEach(p => p.tags.forEach(tag => {
                      const titleCaseTag = tag.charAt(0).toUpperCase() + tag.slice(1).toLowerCase();
                      tags.add(titleCaseTag);
                  }));
                  setAvailableTags(Array.from(tags));
             }, []); // Runs only once

             // Filter projects based on the current filter
             const filteredProjects = useMemo(() => {
                 if (filter === 'all') return portfolioData;
                 return portfolioData.filter(p => p.tags.includes(filter));
             }, [filter]);

             // Determine which projects to display based on showAll state
             const projectsToShow = useMemo(() => {
                 return showAll ? filteredProjects : filteredProjects.slice(0, PORTFOLIO_INITIAL_VISIBLE_COUNT);
             }, [filteredProjects, showAll]);

             // Handle opening the modal
             const openModal = useCallback((project) => {
                 setModalData(project);
             }, []);

             // Handle closing the modal
             const closeModal = useCallback(() => {
                 setModalData(null);
             }, []);

             // Initialize Tilt effect
             const portfolioListRef = useRef(null);
             useEffect(() => {
                 // Ensure VanillaTilt is loaded and we are not in reduced motion mode
                 if (typeof VanillaTilt !== 'undefined' && !window.matchMedia('(prefers-reduced-motion: reduce)').matches && portfolioListRef.current) {
                     const tiltNodes = portfolioListRef.current.querySelectorAll('.work-item[data-tilt]');
                     if (tiltNodes.length > 0) {
                          try {
                             VanillaTilt.init(tiltNodes, { max: 5, speed: 300, glare: true, "max-glare": 0.1 });
                          } catch(e) { console.error("Tilt init failed:", e); }
                     }
                     // Cleanup? Tilt doesn't have an easy destroy method for multiple nodes like this
                     // It's less critical in this demo setup.
                 }
             }, [projectsToShow]); // Re-run if the items to show change

             return (
                 <section id="portfolio" className="py-16 md:py-24 bg-gradient-to-b from-blue-50/50 via-bg-light to-bg-light dark:from-gray-900/30 dark:via-dark-bg-dark dark:to-dark-bg-dark">
                      <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                           <h2 className="subtitle text-2xl md:text-3xl text-primary dark:text-dark-primary font-semibold mb-10 md:mb-12 text-center relative pb-3 subtitle-underline">My Work</h2>

                           {/* Filter Buttons */}
                           <div id="portfolio-filters" className="flex flex-wrap justify-center gap-2 md:gap-3 mb-8 md:mb-10">
                                {availableTags.map(tag => {
                                     const filterValue = tag.toLowerCase();
                                     const isActive = filter === filterValue;
                                     return (
                                         <button
                                             key={tag}
                                             onClick={() => { setFilter(filterValue); setShowAll(false); }} // Reset showAll on filter change
                                             className={`filter-btn px-3 py-1 rounded-full text-xs font-medium transition ${isActive ? 'active bg-primary/10 dark:bg-dark-primary/10 text-primary dark:text-dark-primary font-semibold' : 'text-text-light dark:text-dark-text-light hover:bg-gray-100 dark:hover:bg-dark-bg-surface'}`}
                                         >
                                             {tag}
                                         </button>
                                     );
                                })}
                           </div>

                           {/* Portfolio Grid */}
                           <div ref={portfolioListRef} id="portfolio-work-list" className="work-list grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                               {projectsToShow.map((project, index) => (
                                   <ProjectCard
                                       key={project.id}
                                       project={project}
                                       onOpenModal={openModal}
                                        // Add animation class only to initially visible items or when revealed
                                        isInitiallyVisible={index < PORTFOLIO_INITIAL_VISIBLE_COUNT && !project.initiallyHidden}
                                        isRevealed={showAll && index >= PORTFOLIO_INITIAL_VISIBLE_COUNT}
                                   />
                               ))}
                           </div>

                           {/* Show More/Less Buttons */}
                           <div className="portfolio-controls text-center mt-10 md:mt-12">
                               {filteredProjects.length > PORTFOLIO_INITIAL_VISIBLE_COUNT && !showAll && (
                                   <button
                                       onClick={() => setShowAll(true)}
                                       className="btn btn-secondary text-sm px-5 py-2"
                                       aria-label="Show more projects"
                                   >
                                       <Icon faClass="fas fa-chevron-down mr-1.5 text-xs" /> See More
                                   </button>
                               )}
                               {showAll && (
                                   <button
                                       onClick={() => setShowAll(false)}
                                       className="btn btn-secondary text-sm px-5 py-2"
                                       aria-label="Show fewer projects"
                                   >
                                       <Icon faClass="fas fa-chevron-up mr-1.5 text-xs" /> Show Less
                                   </button>
                               )}
                           </div>
                      </div>
                      {/* Render Modal conditionally */}
                      {modalData && <ProjectModal project={modalData} onClose={closeModal} />}
                 </section>
             );
        }


        // --- Project Card Component ---
         function ProjectCard({ project, onOpenModal, isInitiallyVisible, isRevealed }) {
             const cardRef = useRef(null); // Ref for the card element

             // Determine animation classes
              const animationClass = isInitiallyVisible ? 'animate-on-scroll animate-fade-up' : '';
              // Add reveal animation class if applicable
              const revealClass = isRevealed ? 'show-more-item animate-in' : '';
              // Combine classes, ensuring 'hidden' is removed if revealed/visible
              const combinedClass = `work-item group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition-shadow duration-300 hover:shadow-xl dark:hover:shadow-dark-bg-dark/40 ${project.initiallyHidden && !isRevealed ? 'hidden' : ''} ${animationClass} ${revealClass}`;

             return (
                 <div
                      ref={cardRef}
                      className={combinedClass}
                      data-tilt // Keep data-tilt for potential CSS targeting or future JS init
                      // Add data-animate only if initially visible for the observer
                      {...(isInitiallyVisible && { 'data-animate': '' })}
                      style={{ animationDelay: isRevealed ? `${(PORTFOLIO_INITIAL_VISIBLE_COUNT - project.index) * SHOW_MORE_STAGGER}ms` : '0ms' }} // Simplified delay logic for demo
                  >
                      <img
                          src={project.imageSrc}
                          alt={project.imageAlt}
                          className="w-full h-64 sm:h-72 md:h-80 object-cover transition-transform duration-300 group-hover:scale-105"
                          loading="lazy"
                           width="400" height="225" // Example: Adjust aspect ratio
                      />
                      <div className="layer">
                           <div className="glass-effect rounded-lg p-3 w-full transform transition-transform duration-300 delay-100 group-hover:scale-100 scale-95">
                                <h3 className="text-base sm:text-lg font-semibold text-white mb-1">{project.title}</h3>
                                <p className="text-xs text-gray-100 mb-2">{project.shortDesc}</p>
                                <div className="flex justify-center space-x-2">
                                    <button onClick={() => onOpenModal(project)} aria-label={`View details for ${project.title}`} className="bg-white text-primary dark:text-dark-primary rounded-full w-9 h-9 flex items-center justify-center text-base hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-200 shadow-md icon-interact">
                                         <Icon faClass="fas fa-info" />
                                    </button>
                                     {project.liveLink && (
                                         <a href={project.liveLink} target="_blank" rel="noopener noreferrer" aria-label={`View live ${project.title}`} className="bg-white text-primary dark:text-dark-primary rounded-full w-9 h-9 flex items-center justify-center text-base hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-200 shadow-md icon-interact">
                                             <Icon faClass="fas fa-external-link-alt" />
                                         </a>
                                     )}
                                     {project.repoLink && (
                                         <a href={project.repoLink} target="_blank" rel="noopener noreferrer" aria-label={`View ${project.title} code`} className="bg-white text-primary dark:text-dark-primary rounded-full w-9 h-9 flex items-center justify-center text-base hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-200 shadow-md icon-interact">
                                              <Icon faClass="fab fa-github" />
                                         </a>
                                     )}
                                </div>
                           </div>
                      </div>
                 </div>
             );
         }


        // --- Project Modal Component ---
        function ProjectModal({ project, onClose }) {
            const modalRef = useRef(null);

            // Handle Escape key press
            useEffect(() => {
                const handleKeyDown = (event) => {
                    if (event.key === 'Escape') {
                        onClose();
                    }
                };
                document.addEventListener('keydown', handleKeyDown);

                // Focus trapping (Simplified example)
                 const focusableElements = modalRef.current?.querySelectorAll(FOCUSABLE_MODAL_ELEMENTS);
                 const firstElement = focusableElements?.[0];
                 try { firstElement?.focus(); } catch(e) {}


                // Prevent body scroll
                document.body.style.overflow = 'hidden';

                return () => {
                    document.removeEventListener('keydown', handleKeyDown);
                    document.body.style.overflow = ''; // Restore scroll
                };
            }, [onClose]);

            // Handle clicking outside the modal content
            const handleOverlayClick = (event) => {
                 // Check if the click target is the overlay itself, not the content
                if (modalRef.current && event.target === modalRef.current.parentNode) {
                    onClose();
                }
            };


            if (!project) return null;

            return (
                 <div
                     className="modal-overlay active" // Use active class directly
                     role="dialog"
                     aria-modal="true"
                     aria-labelledby="modal-title"
                     onClick={handleOverlayClick} // Added overlay click listener
                 >
                     <div ref={modalRef} className="modal-content" role="document">
                          <button onClick={onClose} className="absolute top-3 right-3 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 icon-interact" aria-label="Close project details modal">
                              <Icon faClass="fas fa-times text-xl" />
                          </button>
                          <h3 id="modal-title" className="text-xl font-semibold text-primary dark:text-dark-primary mb-3">{project.modalTitle}</h3>
                          <p id="modal-desc" className="text-text-light dark:text-dark-text-light mb-4 text-sm leading-relaxed">{project.modalDesc}</p>
                          <div className="mb-4 text-sm">
                              <strong className="text-text-main dark:text-dark-text-main font-medium">Tech Used:</strong>
                              <p id="modal-tech" className="text-xs text-text-light dark:text-dark-text-light mt-1">{project.modalTech.join(', ')}</p>
                          </div>
                          {project.modalLearnings && (
                               <div className="mb-4 text-sm">
                                   <strong className="text-text-main dark:text-dark-text-main font-medium block mb-1">Key Learnings:</strong>
                                   <p className="text-xs text-text-light dark:text-dark-text-light leading-relaxed">{project.modalLearnings}</p>
                               </div>
                          )}
                          <div id="modal-links" className="flex flex-wrap gap-2 border-t border-border-light dark:border-dark-border-dark pt-4 mt-4">
                               {project.liveLink && <a href={project.liveLink} target="_blank" rel="noopener noreferrer" className="btn btn-primary text-xs px-3 py-1.5"><Icon faClass="fas fa-external-link-alt mr-1" /> Live</a>}
                               {project.repoLink && <a href={project.repoLink} target="_blank" rel="noopener noreferrer" className="btn btn-secondary text-xs px-3 py-1.5"><Icon faClass="fab fa-github mr-1" /> Code</a>}
                               {!project.liveLink && !project.repoLink && <p className="text-xs text-text-light dark:text-dark-text-light italic">No links.</p>}
                          </div>
                     </div>
                 </div>
            );
        }


        // --- Contact Section ---
        function ContactSection() {
             // Form state could be managed here using useState if needed
             // for controlled components, or just rely on Netlify's handling.
             const [formStatus, setFormStatus] = useState({ submitting: false, message: '', error: false });
             const formRef = useRef(null);

              const handleFormSubmit = async (e) => {
                 e.preventDefault();
                 const form = formRef.current;
                 if (!form || !form.checkValidity()) {
                     setFormStatus({ submitting: false, message: 'Please fill required fields correctly.', error: true });
                     form?.querySelector(':invalid')?.focus();
                     return;
                 }

                 setFormStatus({ submitting: true, message: '', error: false });

                 const formData = new FormData(form);
                 const formAction = form.getAttribute('action') || '/';

                 try {
                     const response = await fetch(formAction, {
                         method: "POST",
                         headers: { "Accept": "application/x-www-form-urlencoded" },
                         body: new URLSearchParams(formData).toString(),
                     });

                     if (response.ok || response.status === 200 || response.status === 0) { // Status 0 for some Netlify redirects
                         setFormStatus({ submitting: false, message: 'Thank you! Message sent.', error: false });
                         form.reset();
                          setTimeout(() => setFormStatus({ submitting: false, message: '', error: false }), 5000);
                     } else {
                          throw new Error(`Server responded with status: ${response.status}`);
                     }
                 } catch (error) {
                      console.error('Form submission error:', error);
                      setFormStatus({ submitting: false, message: 'Problem sending message. Please try again.', error: true });
                 }
             };


            return (
                 <section id="contact" className="py-16 md:py-24 bg-gradient-to-br from-bg-surface via-gray-50/50 to-bg-surface dark:from-dark-bg-surface dark:via-gray-800/15 dark:to-dark-bg-surface">
                      <div className="container mx-auto px-4 sm:px-6 lg:px-8">
                           <div className="flex flex-wrap md:flex-nowrap justify-between gap-10 md:gap-12 lg:gap-16 items-start">
                               <div className="contact-left w-full md:w-2/5 lg:w-1/3">
                                    <h2 className="subtitle text-2xl md:text-3xl text-primary dark:text-dark-primary font-semibold mb-8 md:mb-10 text-left relative pb-3 subtitle-underline-left">Get In Touch</h2>
                                    <p className="mb-6 text-sm text-text-light dark:text-dark-text-light leading-relaxed">Interested in collaborating or have a question? Feel free to reach out.</p>

                                    {/* Contact Info & Socials (Simplified JSX) */}
                                     <div className="space-y-4 mb-8 text-sm">
                                         {/* Email */}
                                          <div className="contact-info flex items-center group">
                                               <div className="flex-shrink-0 w-7 h-7 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center mr-3 icon-interact"><Icon faClass="fas fa-paper-plane text-primary dark:text-dark-primary text-sm" /></div>
                                               <div className="flex items-center flex-wrap">
                                                    <a id="email-address" href="mailto:raiyanhasan2006@gmail.com" className="font-medium text-text-main dark:text-dark-text-main hover:text-primary dark:hover:text-dark-primary hover:underline break-all mr-2">raiyanhasan2006@gmail.com</a>
                                                    {/* Copy button functionality needs state */}
                                                    <button aria-label="Copy email" title="Copy email" className="text-text-light dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary text-xs icon-interact"><Icon faClass="far fa-copy" /></button>
                                                    <span className="text-xs text-green-600 dark:text-green-400 ml-1.5 opacity-0 transition-opacity duration-300" aria-live="polite">Copied!</span> {/* Needs state */}
                                               </div>
                                          </div>
                                          {/* Location */}
                                           <div className="contact-info flex items-center group">
                                                <div className="flex-shrink-0 w-7 h-7 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center mr-3 icon-interact"><Icon faClass="fas fa-map-marker-alt text-primary dark:text-dark-primary text-sm" /></div>
                                                <span className="text-text-main dark:text-dark-text-main">Muzaffarpur, Bihar, India</span>
                                           </div>
                                     </div>

                                     <div className="mb-8">
                                         <h3 className="text-base font-medium text-text-main dark:text-dark-text-main mb-3">Connect</h3>
                                         <div className="social-icons flex space-x-4">
                                               <a href="https://www.hackerrank.com/profile/raiyanhasan2006" target="_blank" rel="noopener noreferrer" title="Hackerrank" aria-label="Hackerrank" className="text-gray-500 dark:text-gray-400 hover:text-[#2ec866] text-2xl icon-interact"><Icon faClass="fab fa-hackerrank" /></a>
                                               <a href="https://www.linkedin.com/in/hasanraiyan/" target="_blank" rel="noopener noreferrer" title="LinkedIn" aria-label="LinkedIn" className="text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-dark-primary text-2xl icon-interact"><Icon faClass="fab fa-linkedin" /></a>
                                               <a href="https://github.com/hasanraiyan" target="_blank" rel="noopener noreferrer" title="Github" aria-label="Github" className="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-2xl icon-interact"><Icon faClass="fab fa-github" /></a>
                                         </div>
                                     </div>

                                     <div>
                                         <a href="./resume/Raiyan_Hasan_Resume.pdf" download="Raiyan_Hasan_Resume.pdf" className="btn btn-secondary inline-flex items-center text-sm px-5 py-2" aria-label="Download resume">
                                              <Icon faClass="fas fa-download mr-1.5 text-xs" /> Download CV
                                         </a>
                                     </div>
                               </div>

                               {/* Contact Form */}
                               <div className="contact-right w-full md:w-3/5 lg:w-2/3">
                                   <div className="bg-white dark:bg-dark-bg-surface-card border border-border-light/50 dark:border-dark-border-dark/50 rounded-xl p-6 md:p-8 shadow-lg dark:shadow-dark-bg-dark/40">
                                        <h3 className="text-xl md:text-2xl font-semibold text-text-main dark:text-dark-text-main mb-6">Send me a message</h3>
                                         <form ref={formRef} onSubmit={handleFormSubmit} noValidate data-netlify="true" name="contact-react" method="POST" className="w-full space-y-4">
                                             <input type="hidden" name="form-name" value="contact-react" />
                                             {/* Name */}
                                             <div className="relative">
                                                  <span className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-base"><Icon faClass="far fa-user" /></span>
                                                  <input type="text" name="username" placeholder="Your Name" required aria-label="Your Name" className="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 focus:outline-none focus:ring-1 focus:ring-primary/30 invalid:border-pink-500" />
                                             </div>
                                              {/* Email */}
                                              <div className="relative">
                                                   <span className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-base"><Icon faClass="far fa-envelope" /></span>
                                                   <input type="email" name="email" placeholder="Your Email" required aria-label="Your Email" className="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 focus:outline-none focus:ring-1 focus:ring-primary/30 invalid:border-pink-500" />
                                              </div>
                                              {/* Phone (Optional) */}
                                               <div className="relative">
                                                    <span className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-base"><Icon faClass="fas fa-phone-alt" /></span>
                                                    <input type="tel" name="phone" placeholder="Your Phone (Optional)" aria-label="Phone" className="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 focus:outline-none focus:ring-1 focus:ring-primary/30" />
                                               </div>
                                              {/* Message */}
                                              <div className="relative">
                                                   <span className="absolute left-3 top-4 text-gray-400 text-base"><Icon faClass="far fa-comment-dots" /></span>
                                                   <textarea name="message" placeholder="Your Message" rows="4" required aria-label="Your Message" className="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 resize-y min-h-[100px] focus:outline-none focus:ring-1 focus:ring-primary/30 invalid:border-pink-500"></textarea>
                                              </div>
                                              {/* Submit Button */}
                                              <div className="pt-1">
                                                   <button type="submit" disabled={formStatus.submitting} className="btn btn-primary px-6 py-2 w-full sm:w-auto group flex items-center justify-center relative text-sm disabled:opacity-60">
                                                         <span className={formStatus.submitting ? 'opacity-0' : 'opacity-100'}>Send Message</span>
                                                         <Icon faClass={`submit-icon fas fa-paper-plane ml-1.5 text-xs transition-transform duration-300 group-hover:translate-x-1 ${formStatus.submitting ? 'opacity-0' : 'opacity-100'}`} />
                                                         {formStatus.submitting && (
                                                              <span className="loading-spinner absolute inset-0 flex items-center justify-center bg-primary dark:bg-dark-primary rounded-full">
                                                                   <svg className="animate-spin h-4 w-4 text-white" viewBox="0 0 24 24">...</svg> {/* Spinner SVG */}
                                                              </span>
                                                         )}
                                                   </button>
                                              </div>
                                         </form>
                                         {/* Feedback Message */}
                                          {formStatus.message && (
                                               <div id="msg" className={`mt-4 p-3 rounded-md text-center font-medium text-xs transition-opacity duration-300 opacity-100 ${formStatus.error ? 'bg-red-100 border-red-300 text-red-800 dark:bg-red-900/30 dark:border-red-700 dark:text-red-300' : 'bg-green-100 border-green-300 text-green-800 dark:bg-green-900/30 dark:border-green-700 dark:text-green-300'}`} role="alert" aria-live="polite">
                                                    {formStatus.message}
                                               </div>
                                          )}
                                   </div>
                               </div>
                           </div>
                      </div>
                 </section>
            );
        }

        // --- Footer Component ---
        function Footer() {
            const currentYear = new Date().getFullYear();
            return (
                 <footer className="copyright bg-text-main dark:bg-dark-bg-surface text-gray-400 dark:text-dark-text-light text-center py-5 mt-16 md:mt-24 text-xs">
                    <div className="container mx-auto px-4 sm:px-6 lg:px-8 relative">
                         <p> {currentYear} Raiyan Hasan. Crafted with <Icon faClass="fas fa-heart text-red-500" /> using React & Tailwind.</p>
                         {/* Back to top button is handled in App component based on state */}
                    </div>
                </footer>
            );
        }


        // --- Render the App ---
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>

</body>
</html>
