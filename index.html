
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raiyan Hasan - Web Developer Portfolio </title>
    <meta name="description"
        content="Welcome to the optimized portfolio of Raiyan Hasan (v3.7), an IT student at MIT Muzaffarpur. Optimized for responsiveness and performance, featuring dynamic projects, enhanced filters, UI improvements, interactive elements (Typed.js), micro-interactions, animations, CV download, accessible modals, and contact form UI.">
    <meta name="keywords"
        content="Raiyan Hasan, web developer, portfolio, MIT Muzaffarpur, MERN Stack, React, Node.js, JavaScript, Tailwind CSS, front-end developer, student developer, dark mode, accessible portfolio, interactive portfolio, Typed.js, portfolio filters, dynamic portfolio, resume download, contact form UI, ui improvements, microinteractions, javascript portfolio, responsive portfolio, fast portfolio">
    <meta name="author" content="Raiyan Hasan">
    <link rel="canonical" href="https://hasanraiyan.github.io/Portfolio/"> <!-- UPDATE if you host elsewhere -->

    <!-- Favicon (Optional but recommended) -->
    <!-- <link rel="icon" href="/favicon.ico" sizes="any"> -->
    <!-- <link rel="apple-touch-icon" href="/apple-touch-icon.png"> -->

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="Raiyan Hasan - Optimized Web Developer Portfolio v3.7">
    <meta property="og:description"
        content="Explore the optimized web development portfolio of Raiyan Hasan (v3.7), student at MIT Muzaffarpur. Faster, responsive, with dynamic projects, Typed.js intro, improved filters, UI improvements, micro-interactions, preloader, CV download, accessible modals, and contact form UI.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hasanraiyan.github.io/Portfolio/"> <!-- UPDATE if you host elsewhere -->
    <meta property="og:image" content="https://hasanraiyan.github.io/Portfolio/images/user1.png"> <!-- Ensure path -->
    <meta property="og:image:alt" content="Raiyan Hasan Profile Picture">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Raiyan Hasan - Optimized Web Developer Portfolio v3.7">
    <meta name="twitter:description"
        content="Explore the optimized web development portfolio of Raiyan Hasan (v3.7), student at MIT Muzaffarpur. Faster, responsive, with dynamic projects, Typed.js intro, improved filters, UI improvements, micro-interactions, preloader, CV download, accessible modals, and contact form UI.">
    <meta name="twitter:image" content="https://hasanraiyan.github.io/Portfolio/images/user1.png"> <!-- Ensure path -->
    <meta name="twitter:image:alt" content="Raiyan Hasan Profile Picture">

    <!-- Preconnect for critical origins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://kit.fontawesome.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <!-- Google Fonts - Added display=swap -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome - Added defer -->
    <script src="https://kit.fontawesome.com/002a13abdf.js" crossorigin="anonymous" defer></script>

    <!-- Tailwind CSS CDN (for development) - Added defer -->
    <script src="https://cdn.tailwindcss.com" defer></script>
    <!-- PRODUCTION NOTE: Switch to a built CSS file for significantly better performance! -->

    <!-- Typed.js CDN - Added defer -->
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js" defer></script>

    <!-- Vanilla-Tilt.js CDN - Added defer -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js" defer></script>

    <!-- Tailwind Configuration (Keep in <head> before styles) -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif']
                    },
                    colors: { // Keep colors concise
                        primary: '#0a66c2', 'primary-darker': '#004182',
                        secondary: '#28a745', accent: '#ffc107',
                        'text-main': '#1f2937', 'text-light': '#4b5563',
                        'bg-light': '#f8fafc', 'bg-surface': '#ffffff', 'border-light': '#e5e7eb',
                        'glass-bg': 'rgba(255, 255, 255, 0.6)', 'glass-border': 'rgba(255, 255, 255, 0.3)',
                        'dark-bg-input': '#374151', 'dark-bg-surface-card': '#1f2937',
                        dark: {
                            primary: '#38bdf8', 'primary-darker': '#0ea5e9',
                            secondary: '#4ade80', accent: '#facc15',
                            'text-main': '#e5e7eb', 'text-light': '#9ca3af',
                            'bg-dark': '#111827', 'bg-surface': '#1f2937', 'border-dark': '#374151',
                            'glass-bg': 'rgba(31, 41, 55, 0.65)', 'glass-border': 'rgba(55, 65, 81, 0.3)',
                        }
                    },
                    animation: { // Keep animations minimal if performance is key
                        'fade-in-up': 'fadeInUp 0.6s ease-out forwards',
                        'pulse-glow': 'pulseGlow 2.5s infinite ease-in-out',
                        'spin': 'spin 1s linear infinite',
                        'show-more-item': 'showMoreItem 0.4s ease-out forwards', // Slightly faster
                        // Consider removing gradient-shift if unused or too heavy
                        // 'gradient-shift': 'gradientShift 15s ease infinite',
                    },
                    keyframes: {
                        fadeInUp: { '0%': { opacity: '0', transform: 'translateY(15px)' }, '100%': { opacity: '1', transform: 'translateY(0)' }, }, // Slightly less movement
                        pulseGlow: { '0%, 100%': { boxShadow: '0 0 8px rgba(10, 102, 194, 0.2)' }, '50%': { boxShadow: '0 0 20px rgba(10, 102, 194, 0.5)' }, }, // Adjusted glow
                        spin: { 'from': { transform: 'rotate(0deg)' }, 'to': { transform: 'rotate(360deg)' }, },
                        // gradientShift: { '0%, 100%': { backgroundPosition: '0% 50%' }, '50%': { backgroundPosition: '100% 50%' } },
                        showMoreItem: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' }, },
                    },
                    backdropBlur: { sm: '4px', md: '8px' }, // Reduced blur options
                    boxShadow: { 'glass-dark': 'inset 0 1px 1px rgba(255, 255, 255, 0.05), 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)' }
                },
            },
            plugins: [],
        }
    </script>

    <!-- Custom Styles -->
    <style type="text/tailwindcss">
        @layer base {
            html { @apply font-poppins antialiased bg-bg-light text-text-main dark:bg-dark-bg-dark dark:text-dark-text-main transition-colors duration-300 ease-in-out; }
            /* Add overflow-x-hidden to prevent horizontal scrollbars */
            body { @apply transition-colors duration-300 ease-in-out overflow-x-hidden; }

            /* Reduced Motion Preferences */
            @media (prefers-reduced-motion: reduce) {
                html { scroll-behavior: auto !important; }
                *, *::before, *::after {
                    animation-duration: 1ms !important; animation-iteration-count: 1 !important;
                    transition-duration: 1ms !important; transition-delay: 0ms !important;
                    scroll-behavior: auto !important;
                }
                .animate-bounce, .animate-pulse-glow, .animate-spin, .animate-gradient-shift, .animate-show-more-item { animation: none !important; }
                .group:hover .group-hover\:scale-\[1\.02\], .hover\:scale-105, .focus-visible\:scale-105, .hover\:scale-110, .focus-visible\:scale-110, .group:hover .group-hover\:translate-x-1, .hover\:-translate-y-0\.5 { transform: none !important; }
                .work-item[data-tilt] { transform-style: flat !important; } .js-tilt-glare { display: none !important; }
                #main-nav ul:not(#sidemenu) li a::after { transition: none !important; } /* Disable nav underline transition */
            }

            /* Scroll Animations Base */
            [data-animate] { @apply opacity-0 transition-all duration-700 ease-out; }
            [data-animate].is-visible { @apply opacity-100; }
            [data-animate].animate-fade-up { @apply translate-y-4; } /* Use data attribute selector */
            [data-animate].animate-fade-up.is-visible { @apply translate-y-0; }
            [data-animate].animate-slide-left { @apply translate-x-[-20px]; }
            [data-animate].animate-slide-left.is-visible { @apply translate-x-0; }
            [data-animate].animate-slide-right { @apply translate-x-[20px]; }
            [data-animate].animate-slide-right.is-visible { @apply translate-x-0; }

            /* Nav Link Underline */
            #main-nav ul:not(#sidemenu) li a { @apply relative py-2 transition-transform duration-300 hover:-translate-y-0.5; }
            #main-nav ul:not(#sidemenu) li a::after { content: ''; @apply absolute bottom-[-5px] left-0 h-[3px] w-0 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-full transition-all duration-300; } /* Faster transition */
            #main-nav ul:not(#sidemenu) li a:hover::after, #main-nav ul:not(#sidemenu) li a.active-nav::after { @apply w-full; }

             /* Focus Styles */
             *:focus-visible { @apply outline-none ring-2 ring-offset-2 ring-primary/70 dark:ring-dark-primary/70 ring-offset-bg-surface dark:ring-offset-dark-bg-surface rounded-sm; } /* Removed transition */
             *:focus:not(:focus-visible) { outline: none; }

             /* Skip Link */
             .skip-link { @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:bg-primary focus:text-white focus:px-4 focus:py-2 focus:rounded-md focus:font-semibold focus:shadow-lg; }

            /* Typed.js Cursor */
            .typed-cursor { @apply opacity-100 animate-pulse text-primary dark:text-dark-primary font-light; }
        }
        @layer components {
            .glass-effect { @apply bg-glass-bg dark:bg-dark-glass-bg backdrop-blur-md border border-glass-border dark:border-dark-border-dark shadow-lg dark:shadow-glass-dark; }
             /* Button Base - Simplified Transforms */
            .btn { @apply inline-block px-6 py-2.5 rounded-full font-medium text-center transition-all duration-200 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none hover:brightness-110 focus-visible:brightness-110; } /* Removed scale transform */
            .btn-primary { @apply bg-gradient-to-r from-primary to-blue-500 text-white border border-transparent focus-visible:ring-primary dark:from-dark-primary dark:to-blue-600 dark:focus-visible:ring-dark-primary; }
            .btn-secondary { @apply bg-transparent text-primary border border-primary hover:bg-primary/10 focus-visible:ring-primary dark:text-dark-primary dark:border-dark-primary dark:hover:bg-dark-primary/10 dark:focus-visible:ring-dark-primary; }

            /* Content Card - Simplified Transforms */
            .content-card { @apply bg-bg-surface dark:bg-dark-bg-surface rounded-xl shadow-lg dark:shadow-dark-bg-dark/30 overflow-hidden transition-shadow duration-300 hover:shadow-xl dark:hover:shadow-dark-bg-dark/40 p-6 md:p-8; } /* Removed translate-y */

            /* Tab Styling */
            .tab-links.active-link { @apply text-primary dark:text-dark-primary border-primary dark:border-dark-primary font-semibold; }
            .tab-links { @apply border-b-2 pb-1 border-transparent text-text-light dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary transition-colors duration-200; }
             /* Tab Content Transition */
             .tab-contents { @apply transition-opacity duration-300 ease-in-out; }
             .tab-contents.hidden { @apply !opacity-0 pointer-events-none absolute; }
             .tab-contents.active-tab { @apply opacity-100 pointer-events-auto relative; }

             /* Subtitle Underlines */
             .subtitle-underline::after { content: ''; @apply absolute bottom-0 left-1/2 -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-full; }
             .subtitle-underline-left::after { content: ''; @apply absolute bottom-0 left-0 w-16 h-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-full; }

            /* Modal Styling */
            .modal-overlay { @apply fixed inset-0 bg-black/60 dark:bg-black/80 flex items-center justify-center p-4 z-[60] transition-opacity duration-200 ease-out opacity-0 pointer-events-none; } /* Faster transition */
            .modal-overlay.active { @apply opacity-100 pointer-events-auto; }
            .modal-content { @apply bg-bg-surface dark:bg-dark-bg-surface rounded-lg shadow-xl p-6 md:p-8 max-w-xl w-full max-h-[85vh] overflow-y-auto relative transform scale-95 opacity-0 transition-all duration-200 ease-out; } /* Faster transition */
             .modal-overlay.active .modal-content { @apply scale-100 opacity-100; }

             /* Preloader Styles */
            #preloader { @apply fixed inset-0 z-[9999] flex items-center justify-center bg-bg-light dark:bg-dark-bg-dark transition-opacity duration-300 ease-out; } /* Faster fade */
            #preloader.loaded { @apply opacity-0 pointer-events-none; }
            .spinner { @apply w-10 h-10 border-4 border-primary dark:border-dark-primary border-t-transparent rounded-full animate-spin; } /* Slightly smaller */

            /* Portfolio items show/less hiding */
             .work-item.show-more-item-hidden { @apply !opacity-0 !pointer-events-none !h-0 !p-0 !m-0 !border-0 overflow-hidden !max-h-0; transition: none; } /* Immediate hiding, use max-h-0 */
             /* Style for items revealed by show more */
             .show-more-item.animate-in { @apply animate-show-more-item; }

            /* Portfolio Layer */
            .work-item .layer { @apply absolute inset-0 bg-gradient-to-t from-blue-800/80 via-blue-700/70 to-transparent dark:from-blue-900/80 dark:via-blue-800/70 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-end p-4 text-center transform translate-y-4 group-hover:translate-y-0; } /* Faster transition, less padding */
             /* Filter Button */
             .filter-btn.active { @apply bg-primary/10 dark:bg-dark-primary/10 text-primary dark:text-dark-primary font-semibold; }
             /* Portfolio Item base */
             .work-item { @apply transition-opacity duration-300 ease-out; /* Only transition opacity for filtering */ }
             .work-item.hidden { /* Style for items hidden by FILTERING */ @apply !opacity-0 !pointer-events-none; }
        }
        @layer utilities {
             .hidden { display: none !important; } /* Ensure utility takes precedence */
             /* Portfolio hover icon animation */
            .work-item .layer a:hover i, .work-item .layer button:hover i { /* Removed rotate animation for performance */ }
            /* Icon interaction - remove scale for performance */
           .icon-interact { @apply transition-colors duration-200 ease-in-out; } /* Only color/brightness */
           /* Visually hidden */
           .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
           .focus\:not-sr-only:focus { position: static; width: auto; height: auto; padding: 0; margin: 0; overflow: visible; clip: auto; white-space: normal; }
        }
        /* Fallback for backdrop-filter */
        @supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) { .glass-effect { @apply bg-white/95 dark:bg-dark-bg-surface/95; } }
    </style>

    <!-- Theme Initialization Script -->
    <script>
        // Keep this script here, runs immediately
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark')
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>
</head>

<body class="bg-bg-light text-text-main dark:bg-dark-bg-dark dark:text-dark-text-main">

    <!-- Preloader -->
    <div id="preloader"> <div class="spinner"></div> </div>

    <!-- Skip Link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header id="site-header" class="sticky top-0 z-50 transition-shadow duration-300 ease-in-out"> <!-- Simplified transition -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <nav id="main-nav" class="flex items-center justify-between h-16 md:h-20">
                <a href="#hero" class="logo-link flex-shrink-0 icon-interact" data-animate>
                    <!-- Add width/height for logo -->
                    <img src="./images/logo.png" alt="Raiyan Hasan Logo" class="h-10 md:h-12" width="48" height="48">
                </a>
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-6 lg:space-x-8" data-animate>
                    <ul class="flex items-center space-x-6 lg:space-x-8">
                        <li><a href="#hero" class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium">Home</a></li>
                        <li><a href="#about" class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium">About</a></li>
                        <li><a href="#portfolio" class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium">Portfolio</a></li>
                        <li><a href="#contact" class="nav-link text-text-main dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary font-medium">Contact</a></li>
                    </ul>
                    <button id="theme-toggle" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus-visible:ring-2 focus-visible:ring-gray-400 dark:focus-visible:ring-gray-500 rounded-lg text-sm p-2.5 icon-interact" aria-label="Toggle dark mode" aria-pressed="false">
                        <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    </button>
                </div>
                <!-- Mobile Menu Toggles -->
                <div class="md:hidden flex items-center space-x-4">
                    <button id="theme-toggle-mobile" type="button" class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus-visible:ring-2 focus-visible:ring-gray-400 dark:focus-visible:ring-gray-500 rounded-lg text-sm p-2.5 icon-interact" aria-label="Toggle dark mode" aria-pressed="false">
                         <svg id="theme-toggle-dark-icon-mobile" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                         <svg id="theme-toggle-light-icon-mobile" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    </button>
                    <button class="icon-menu text-primary dark:text-dark-primary text-3xl hover:text-primary-darker dark:hover:text-dark-primary-darker icon-interact" onclick="openmenu()" aria-label="Open menu" aria-expanded="false" aria-controls="sidemenu">
                        <i class="fas fa-bars" aria-hidden="true"></i>
                    </button>
                </div>
                <!-- Side Menu (Mobile) -->
                 <ul id="sidemenu" class="md:hidden fixed top-0 right-0 h-screen w-64 sm:w-72 bg-gradient-to-b from-primary-darker to-primary dark:from-dark-primary-darker dark:to-dark-primary shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out pt-24 px-6 space-y-4 z-40" aria-hidden="true"> <!-- Reduced space-y -->
                    <li><a href="#hero" class="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">Home</a></li> <!-- Smaller text/padding -->
                    <li><a href="#about" class="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">About</a></li>
                    <li><a href="#portfolio" class="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">Portfolio</a></li>
                    <li><a href="#contact" class="block text-white hover:text-accent dark:hover:text-dark-accent text-lg font-medium py-1.5 transition-colors duration-200">Contact</a></li>
                    <li class="absolute top-5 right-5"> <!-- Adjusted position -->
                        <button class="icon-close text-white hover:text-gray-200 text-2xl transition-colors duration-300 icon-interact" onclick="closemenu()" aria-label="Close menu"> <!-- Smaller size -->
                            <i class="fas fa-times" aria-hidden="true"></i>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content Wrapper -->
    <main id="main-content">

        <!-- Hero Section -->
        <section id="hero" class="pt-24 md:pt-28 pb-16 md:pb-24 min-h-[calc(90vh-80px)] flex items-center relative overflow-hidden bg-gradient-to-br from-blue-100 via-bg-light to-indigo-100 dark:from-gray-900 dark:via-dark-bg-dark dark:to-indigo-900/40"> <!-- Adjusted padding/min-height -->
            <!-- Decorative Blobs - Consider removing or reducing if causing performance issues -->
            <div class="absolute top-1/4 left-10 w-24 h-24 bg-blue-200/20 dark:bg-blue-800/15 rounded-full filter blur-2xl opacity-40 dark:opacity-25 animate-pulse-glow"></div> <!-- Smaller/subtler -->
            <div class="absolute bottom-1/4 right-10 w-32 h-32 bg-indigo-200/20 dark:bg-indigo-800/15 rounded-full filter blur-2xl opacity-40 dark:opacity-25 animate-pulse-glow animation-delay-2000"></div>

            <div class="container mx-auto px-4 sm:px-6 lg:px-8 z-10">
                <div class="header-text text-center max-w-4xl mx-auto">
                     <p class="text-base md:text-lg text-primary dark:text-dark-primary font-medium mb-2" data-animate data-animate-class="animate-fade-up" data-delay="100">MERN Stack Web Developer & IT Student</p> <!-- Smaller text -->
                     <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-text-main dark:text-dark-text-main leading-tight mb-4" data-animate data-animate-class="animate-fade-up" data-delay="200"> <!-- Adjusted sizes -->
                        Hi, I'm <span class="text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-500 dark:from-dark-primary dark:to-blue-400">Raiyan Hasan</span><br>
                        <span id="typed-output" class="text-primary dark:text-dark-primary min-h-[1.2em] inline-block"></span> <!-- Min height for typed -->
                    </h1>
                    <p class="text-sm md:text-base text-text-light dark:text-dark-text-light max-w-xl mx-auto mb-6" data-animate data-animate-class="animate-fade-up" data-delay="300"> <!-- Adjusted size/max-width -->
                        Passionate about crafting clean, efficient, and user-friendly web experiences. Exploring the intersection of technology, creativity, and problem-solving.
                    </p>
                    <div data-animate data-animate-class="animate-fade-up" data-delay="400">
                        <a href="#portfolio" class="btn btn-primary text-base px-6 py-2 mr-2 mb-2 sm:mb-0">View Work</a> <!-- Adjusted size -->
                        <a href="#contact" class="btn btn-secondary text-base px-6 py-2">Get In Touch</a>
                    </div>
                </div>
            </div>
             <a href="#about" class="absolute bottom-6 left-1/2 -translate-x-1/2 text-primary dark:text-dark-primary text-xl animate-bounce hidden md:block icon-interact" aria-label="Scroll down"> <!-- Smaller -->
                <i class="fas fa-chevron-down"></i>
            </a>
        </section>

        <!-- About Section -->
        <section id="about" class="py-16 md:py-24 bg-bg-surface dark:bg-dark-bg-surface"> <!-- Adjusted padding -->
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                 <div class="flex flex-wrap lg:flex-nowrap justify-between gap-10 md:gap-12 items-start"> <!-- Adjusted gap -->
                    <div class="about-col-1 w-full lg:w-2/5 xl:w-1/3 flex-shrink-0" data-animate data-animate-class="animate-slide-left">
                        <div class="relative group">
                             <div class="absolute -inset-1 bg-gradient-to-r from-primary to-accent dark:from-dark-primary dark:to-dark-accent rounded-lg blur opacity-20 group-hover:opacity-40 transition duration-300"></div> <!-- Subtler glow -->
                             <!-- Add width/height, consider aspect-ratio -->
                             <img src="./images/user1.png" alt="Raiyan Hasan profile picture" class="relative rounded-xl shadow-lg w-full max-w-sm mx-auto lg:max-w-none" loading="lazy" width="400" height="400" style="aspect-ratio: 1 / 1; object-fit: cover;">
                        </div>
                    </div>
                    <div class="about-col-2 w-full lg:w-3/5 xl:w-2/3" data-animate data-animate-class="animate-slide-right">
                        <h2 class="subtitle text-2xl md:text-3xl text-primary dark:text-dark-primary font-semibold mb-10 md:mb-12 text-left relative pb-3 subtitle-underline-left">About Me</h2> <!-- Adjusted size/margin -->
                        <p class="about-intro text-sm md:text-base text-text-light dark:text-dark-text-light mb-6 leading-relaxed"> <!-- Adjusted size -->
                            Hello! I'm Raiyan Hasan, a dedicated B.Tech student in Information Technology at MIT Muzaffarpur (2023-27). My fascination lies in web development where I strive to build intuitive, efficient, and accessible digital experiences.
                        </p>

                        <div class="tab-titles flex border-b border-border-light dark:border-dark-border-dark mb-5 space-x-4 sm:space-x-6 flex-wrap text-sm" role="tablist" aria-label="About Me Sections"> <!-- Adjusted size/margin -->
                            <button class="tab-links active-link py-1.5 px-1 sm:px-2 font-medium whitespace-nowrap" onclick="opentab(event, 'skills-panel')" role="tab" aria-controls="skills-panel" aria-selected="true" id="skills-tab" tabindex="0">Skills</button>
                            <button class="tab-links py-1.5 px-1 sm:px-2 font-medium whitespace-nowrap" onclick="opentab(event, 'education-panel')" role="tab" aria-controls="education-panel" aria-selected="false" id="education-tab" tabindex="-1">Education</button>
                        </div>

                        <!-- Skills Tab Panel -->
                         <div class="tab-contents active-tab min-h-[200px] relative text-sm" id="skills-panel" role="tabpanel" aria-labelledby="skills-tab" aria-hidden="false"> <!-- Adjusted min-height/size -->
                            <ul class="space-y-4"> <!-- Reduced space -->
                                <li>
                                    <div class="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5 group"> <!-- Adjusted padding/size -->
                                        <a href="https://www.hackerrank.com/certificates/bb25b2ccfbf1" title="Click to see certification" target="_blank" rel="noopener noreferrer" class="inline-block group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                            <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center"> <!-- Adjusted size -->
                                                <i class="fab fa-python mr-2 text-base text-primary dark:text-dark-primary"></i>Python
                                                <i class="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70 transition-opacity" aria-hidden="true"></i>
                                            </strong>
                                        </a>
                                        <span class="block text-xs text-text-light dark:text-dark-text-light ml-6"> <!-- Adjusted size -->
                                            HackerRank Certified for problem-solving & scripting.
                                        </span>
                                    </div>
                                </li>
                                <li>
                                    <div class="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5">
                                        <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                            <i class="fas fa-code mr-2 text-base text-primary dark:text-dark-primary"></i>MERN Stack
                                        </strong>
                                        <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">
                                            MongoDB, Express, React, Node.js, HTML, CSS, Tailwind, JS.
                                        </span>
                                    </div>
                                </li>
                            </ul>
                             <ul id="skills-list-hidden" class="space-y-4 mt-4 text-sm"> <!-- Adjusted space/margin/size -->
                                <li class="hidden show-more-item">
                                    <div class="tab-item-content pl-4 border-l-4 border-secondary dark:border-dark-secondary py-1.5">
                                        <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                            <i class="fas fa-palette mr-2 text-base text-secondary dark:text-dark-secondary"></i>Canva
                                        </strong>
                                        <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">Creating visual assets and graphics.</span>
                                    </div>
                                </li>
                                <li class="hidden show-more-item">
                                     <div class="tab-item-content pl-4 border-l-4 border-secondary dark:border-dark-secondary py-1.5">
                                         <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                             <i class="fab fa-react mr-2 text-base text-secondary dark:text-dark-secondary"></i>React Native
                                         </strong>
                                         <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">Building cross-platform mobile apps.</span>
                                     </div>
                                 </li>
                                 <li class="hidden show-more-item">
                                     <div class="tab-item-content pl-4 border-l-4 border-accent dark:border-dark-accent py-1.5">
                                         <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                             <i class="fab fa-git-alt mr-2 text-base text-accent dark:text-dark-accent"></i>Version Control
                                         </strong>
                                         <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">Using Git and GitHub.</span>
                                     </div>
                                 </li>
                            </ul>
                            <div class="mt-6 pt-4 border-t border-border-light dark:border-dark-border-dark"> <!-- Adjusted margin -->
                                <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-2">Currently Learning</strong>
                                <ul class="list-disc list-inside space-y-1 text-xs text-text-light dark:text-dark-text-light pl-1">
                                    <li>Advanced MERN concepts & optimization</li>
                                    <li>Responsive design patterns</li>
                                    <li>Web Accessibility (WCAG)</li>
                                    <li>Exploring React Native further</li>
                                </ul>
                            </div>
                            <div class="more-less-controls mt-6"> <!-- Adjusted margin -->
                                <button class="btn-toggle text-primary dark:text-dark-primary text-xs font-medium inline-flex items-center hover:underline" id="more-skills-btn" aria-expanded="false" aria-controls="skills-list-hidden"><i class="fas fa-chevron-down mr-1 text-xs"></i> Show More</button>
                                <button class="btn-toggle hidden text-primary dark:text-dark-primary text-xs font-medium inline-flex items-center hover:underline" id="less-skills-btn" aria-expanded="true" aria-controls="skills-list-hidden"><i class="fas fa-chevron-up mr-1 text-xs"></i> Show Less</button>
                            </div>
                        </div>

                        <!-- Education Tab Panel -->
                         <div class="tab-contents hidden min-h-[200px] relative text-sm" id="education-panel" role="tabpanel" aria-labelledby="education-tab" aria-hidden="true">
                            <ul class="space-y-4">
                                <li>
                                    <div class="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5 group">
                                        <a href="https://www.mitmuzaffarpur.org/mit-student/rayan-hasan/" target="_blank" rel="noopener noreferrer" class="inline-block group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                            <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                                <i class="fas fa-university mr-2 text-base text-primary dark:text-dark-primary"></i>B.Tech - IT
                                                <i class="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70 transition-opacity" aria-hidden="true"></i>
                                            </strong>
                                        </a>
                                        <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">MIT Muzaffarpur (2023 - 2027, Ongoing)</span>
                                    </div>
                                </li>
                                 <li>
                                     <div class="tab-item-content pl-4 border-l-4 border-primary dark:border-dark-primary py-1.5">
                                         <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                             <i class="fas fa-graduation-cap mr-2 text-base text-primary dark:text-dark-primary"></i>Intermediate (XII) - PCM
                                         </strong>
                                         <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">St. Judes Vidyalaya, Barauni (CBSE) - 2023 | 84.6%</span>
                                     </div>
                                 </li>
                            </ul>
                             <ul id="education-list-hidden" class="space-y-4 mt-4 text-sm">
                                 <li class="hidden show-more-item">
                                     <div class="tab-item-content pl-4 border-l-4 border-secondary dark:border-dark-secondary py-1.5 group">
                                         <a href="https://www.shivamconvent.com/images/result/10%20ST.JUDES%20BARAUNI-min.pdf" target="_blank" rel="noopener noreferrer" class="inline-block group-hover:text-primary-darker dark:group-hover:text-dark-primary-darker">
                                             <strong class="block text-base font-semibold text-text-main dark:text-dark-text-main mb-0.5 flex items-center">
                                                 <i class="fas fa-school mr-2 text-base text-secondary dark:text-dark-secondary"></i>Matriculation (X)
                                                 <i class="fas fa-link text-xs ml-2 opacity-0 group-hover:opacity-70 transition-opacity" aria-hidden="true"></i>
                                             </strong>
                                         </a>
                                         <span class="block text-xs text-text-light dark:text-dark-text-light ml-6">St. Judes Vidyalaya, Barauni (CBSE) - 2021 | 91.8%</span>
                                     </div>
                                 </li>
                             </ul>
                            <div class="more-less-controls mt-6">
                                <button class="btn-toggle text-primary dark:text-dark-primary text-xs font-medium inline-flex items-center hover:underline" id="more-Education-btn" aria-expanded="false" aria-controls="education-list-hidden"><i class="fas fa-chevron-down mr-1 text-xs"></i> Show More</button>
                                <button class="btn-toggle hidden text-primary dark:text-dark-primary text-xs font-medium inline-flex items-center hover:underline" id="less-Education-btn" aria-expanded="true" aria-controls="education-list-hidden"><i class="fas fa-chevron-up mr-1 text-xs"></i> Show Less</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section id="portfolio" class="py-16 md:py-24 bg-gradient-to-b from-blue-50/50 via-bg-light to-bg-light dark:from-gray-900/30 dark:via-dark-bg-dark dark:to-dark-bg-dark"> <!-- Adjusted padding/gradient -->
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="subtitle text-2xl md:text-3xl text-primary dark:text-dark-primary font-semibold mb-10 md:mb-12 text-center relative pb-3 subtitle-underline" data-animate data-animate-class="animate-fade-up">My Work</h2>

                 <!-- Portfolio Filters -->
                <div id="portfolio-filters" class="flex flex-wrap justify-center gap-2 md:gap-3 mb-8 md:mb-10" data-animate data-animate-class="animate-fade-up" data-delay="100"> <!-- Adjusted gap/margin -->
                    <!-- Filter buttons will be generated here -->
                </div>

                <!-- Portfolio Grid -->
                 <div id="portfolio-work-list" class="work-list grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"> <!-- Adjusted gap -->
                    <!-- Portfolio items will be dynamically rendered here -->
                     <!-- NOTE: The 'animate-on-scroll' class is added dynamically if item is not initially hidden -->
                 </div>

                <!-- Portfolio Show More/Less Buttons -->
                <div class="portfolio-controls text-center mt-10 md:mt-12" data-animate data-animate-class="animate-fade-up" data-delay="300"> <!-- Adjusted margin -->
                    <button class="btn btn-secondary hidden text-sm px-5 py-2" id="more-btn" aria-label="Show more projects" aria-expanded="false"> <!-- Adjusted size -->
                        <i class="fas fa-chevron-down mr-1.5 text-xs"></i> See More
                    </button>
                    <button class="btn btn-secondary hidden text-sm px-5 py-2" id="less-btn" aria-label="Show fewer projects" aria-expanded="true"> <!-- Adjusted size -->
                        <i class="fas fa-chevron-up mr-1.5 text-xs"></i> Show Less
                    </button>
                </div>
            </div>
        </section>

        <!-- Project Details Modal -->
        <div id="project-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-hidden="true" tabindex="-1">
            <div class="modal-content" role="document">
                <button id="modal-close-button" onclick="closeProjectModal()" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 icon-interact" aria-label="Close project details modal"> <!-- Adjusted position -->
                    <i class="fas fa-times text-xl"></i> <!-- Smaller icon -->
                </button>
                 <h3 id="modal-title" class="text-xl font-semibold text-primary dark:text-dark-primary mb-3">Project Title</h3> <!-- Adjusted size/margin -->
                 <p id="modal-desc" class="text-text-light dark:text-dark-text-light mb-4 text-sm leading-relaxed">Project description...</p> <!-- Adjusted size/margin -->
                <div class="mb-4 text-sm"> <!-- Adjusted size/margin -->
                    <strong class="text-text-main dark:text-dark-text-main font-medium">Tech Used:</strong>
                    <p id="modal-tech" class="text-xs text-text-light dark:text-dark-text-light mt-1">HTML, CSS, JS</p>
                </div>
                <div id="modal-learnings-container" class="mb-4 text-sm"></div> <!-- Adjusted size/margin -->
                <div id="modal-links" class="flex flex-wrap gap-2 border-t border-border-light dark:border-dark-border-dark pt-4 mt-4"> <!-- Adjusted gap/padding -->
                    <!-- Links injected by JS -->
                </div>
            </div>
        </div>

        <!-- Contact Section -->
        <section id="contact" class="py-16 md:py-24 bg-gradient-to-br from-bg-surface via-gray-50/50 to-bg-surface dark:from-dark-bg-surface dark:via-gray-800/15 dark:to-dark-bg-surface"> <!-- Adjusted padding/gradient -->
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-wrap md:flex-nowrap justify-between gap-10 md:gap-12 lg:gap-16 items-start"> <!-- Adjusted gap -->
                     <div class="contact-left w-full md:w-2/5 lg:w-1/3" data-animate data-animate-class="animate-slide-left">
                        <h2 class="subtitle text-2xl md:text-3xl text-primary dark:text-dark-primary font-semibold mb-8 md:mb-10 text-left relative pb-3 subtitle-underline-left">Get In Touch</h2> <!-- Adjusted size/margin -->
                        <p class="mb-6 text-sm text-text-light dark:text-dark-text-light leading-relaxed">Interested in collaborating or have a question? Feel free to reach out.</p> <!-- Adjusted size/margin -->

                        <div class="space-y-4 mb-8 text-sm"> <!-- Adjusted space/margin/size -->
                            <div class="contact-info flex items-center text-text-light dark:text-dark-text-light group">
                                <div class="flex-shrink-0 w-7 h-7 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center mr-3 icon-interact"> <!-- Adjusted size/margin -->
                                    <i class="fas fa-paper-plane text-primary dark:text-dark-primary text-sm"></i> <!-- Adjusted size -->
                                </div>
                                <div class="flex items-center flex-wrap">
                                    <a id="email-address" href="mailto:raiyanhasan2006@gmail.com" class="font-medium text-text-main dark:text-dark-text-main hover:text-primary dark:hover:text-dark-primary hover:underline break-all mr-2">raiyanhasan2006@gmail.com</a>
                                    <button id="copy-email-btn" aria-label="Copy email address" title="Copy email address" class="text-text-light dark:text-dark-text-light hover:text-primary dark:hover:text-dark-primary text-xs transition-colors duration-200 icon-interact"><i class="far fa-copy"></i></button>
                                    <span id="copy-feedback" class="text-xs text-green-600 dark:text-green-400 ml-1.5 opacity-0 transition-opacity duration-300" aria-live="polite">Copied!</span>
                                </div>
                            </div>
                             <div class="contact-info flex items-center text-text-light dark:text-dark-text-light group">
                                 <div class="flex-shrink-0 w-7 h-7 bg-primary/10 dark:bg-dark-primary/10 rounded-full flex items-center justify-center mr-3 icon-interact">
                                     <i class="fas fa-map-marker-alt text-primary dark:text-dark-primary text-sm"></i>
                                 </div>
                                 <span class="text-text-main dark:text-dark-text-main">Muzaffarpur, Bihar, India</span>
                             </div>
                        </div>

                        <div class="mb-8"> <!-- Adjusted margin -->
                            <h3 class="text-base font-medium text-text-main dark:text-dark-text-main mb-3">Connect with me</h3> <!-- Adjusted size/margin -->
                            <div class="social-icons flex space-x-4"> <!-- Adjusted space -->
                                <a href="https://www.hackerrank.com/profile/raiyanhasan2006" target="_blank" rel="noopener noreferrer" title="Hackerrank" aria-label="My Hackerrank profile" class="text-gray-500 dark:text-gray-400 hover:text-[#2ec866] text-2xl icon-interact"><i class="fab fa-hackerrank"></i></a> <!-- Adjusted size -->
                                <a href="https://www.linkedin.com/in/hasanraiyan/" target="_blank" rel="noopener noreferrer" title="LinkedIn" aria-label="My LinkedIn profile" class="text-gray-500 dark:text-gray-400 hover:text-primary dark:hover:text-dark-primary text-2xl icon-interact"><i class="fab fa-linkedin"></i></a>
                                <a href="https://github.com/hasanraiyan" target="_blank" rel="noopener noreferrer" title="Github" aria-label="My Github profile" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-2xl icon-interact"><i class="fab fa-github"></i></a>
                            </div>
                        </div>

                        <div>
                            <a href="./resume/Raiyan_Hasan_Resume.pdf" download="Raiyan_Hasan_Resume.pdf" class="btn btn-secondary inline-flex items-center text-sm px-5 py-2" aria-label="Download my resume"> <!-- Adjusted size -->
                                <i class="fas fa-download mr-1.5 text-xs"></i> Download CV
                            </a>
                        </div>
                    </div>

                     <div class="contact-right w-full md:w-3/5 lg:w-2/3" data-animate data-animate-class="animate-slide-right">
                         <div class="bg-white dark:bg-dark-bg-surface-card border border-border-light/50 dark:border-dark-border-dark/50 rounded-xl p-6 md:p-8 shadow-lg dark:shadow-dark-bg-dark/40"> <!-- Adjusted padding/shadow -->
                             <h3 class="text-xl md:text-2xl font-semibold text-text-main dark:text-dark-text-main mb-6">Send me a message</h3> <!-- Adjusted size/margin -->

                            <form id="contact-form" autocomplete="on" class="w-full space-y-4" aria-busy="false" novalidate data-netlify="true" name="contact" method="POST"> <!-- Adjusted space -->
                                <input type="hidden" name="form-name" value="contact" />
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 text-base pointer-events-none"><i class="far fa-user"></i></span> <!-- Adjusted position/size -->
                                    <input type="text" name="username" placeholder="Your Name" required aria-label="Your Name" class="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary invalid:border-pink-500 dark:invalid:border-pink-600 invalid:focus:ring-pink-500/50"> <!-- Adjusted size/padding/ring -->
                                </div>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 text-base pointer-events-none"><i class="far fa-envelope"></i></span>
                                    <input type="email" name="email" placeholder="Your Email" required aria-label="Your Email" class="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary invalid:border-pink-500 dark:invalid:border-pink-600 invalid:focus:ring-pink-500/50">
                                </div>
                                <div class="relative">
                                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 text-base pointer-events-none"><i class="fas fa-phone-alt"></i></span>
                                    <input type="tel" name="phone" placeholder="Your Phone (Optional)" aria-label="Your Phone Number" class="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary">
                                </div>
                                <div class="relative">
                                    <span class="absolute left-3 top-4 text-gray-400 dark:text-gray-500 text-base pointer-events-none"><i class="far fa-comment-dots"></i></span> <!-- Adjusted position -->
                                    <textarea name="message" placeholder="Your Message" rows="4" required aria-label="Your Message" class="w-full text-sm bg-gray-50 dark:bg-dark-bg-input border border-border-light dark:border-dark-border-dark rounded-lg p-3 pl-9 text-text-main dark:text-dark-text-main placeholder-gray-400 dark:placeholder-gray-500 resize-y min-h-[100px] focus:outline-none focus:ring-1 focus:ring-primary/30 focus:border-primary dark:focus:ring-dark-primary/30 dark:focus:border-dark-primary invalid:border-pink-500 dark:invalid:border-pink-600 invalid:focus:ring-pink-500/50"></textarea> <!-- Adjusted rows/min-h -->
                                </div>
                                <div class="pt-1"> <!-- Adjusted padding -->
                                    <button type="submit" class="btn btn-primary px-6 py-2 w-full sm:w-auto group flex items-center justify-center relative text-sm"> <!-- Adjusted size -->
                                        <span class="submit-text inline-block">Send Message</span>
                                        <i class="submit-icon fas fa-paper-plane ml-1.5 text-xs transition-transform duration-300 group-hover:translate-x-1 group-focus:translate-x-1"></i> <!-- Adjusted size/margin -->
                                        <span class="loading-spinner absolute inset-0 flex items-center justify-center bg-primary dark:bg-dark-primary opacity-0 transition-opacity duration-300 pointer-events-none rounded-full">
                                            <svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <!-- Adjusted size -->
                                        </span>
                                    </button>
                                </div>
                            </form>
                            <div id="msg" class="mt-4 p-3 rounded-md text-center font-medium text-xs transition-all duration-300 opacity-0 transform translate-y-2" role="alert" aria-live="polite" style="visibility: hidden;"></div> <!-- Adjusted size/margin -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
     <footer class="copyright bg-text-main dark:bg-dark-bg-surface text-gray-400 dark:text-dark-text-light text-center py-5 mt-16 md:mt-24 text-xs transition-colors duration-300 ease-in-out"> <!-- Adjusted size/margin/padding -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative">
            <p> <span id="current-year"></span> Raiyan Hasan. Crafted with <i class="fas fa-heart text-red-500"></i> using Tailwind & JS.</p> <!-- Removed pulse -->
            <button id="back-to-top" onclick="scrollToTop()" class="back-to-top fixed bottom-5 right-5 bg-primary dark:bg-dark-primary text-white w-9 h-9 rounded-full flex items-center justify-center text-base shadow-lg hover:bg-primary-darker dark:hover:bg-dark-primary-darker transition-all duration-200 opacity-0 pointer-events-none transform translate-y-3 icon-interact" aria-label="Back to top" aria-hidden="true"> <!-- Adjusted size/position -->
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>
    </footer>

    <!-- Main JavaScript -->
    <script>
        // --- Global Constants ---
        const SCROLL_OFFSET = 70; // Adjusted for potentially smaller sticky header height
        const SHOW_MORE_STAGGER = 40; // Faster stagger
        const FOCUSABLE_MODAL_ELEMENTS = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
        const PORTFOLIO_INITIAL_VISIBLE_COUNT = 3;

        // --- Portfolio Project Data (Keep as is) ---
        const portfolioData = [ /* ... Your existing portfolio data array ... */
            { id: 'mit-clone', title: 'MIT Muzaffarpur Clone', imageSrc: './images/work-5.png', imageAlt: 'MIT Muzaffarpur Clone', shortDesc: 'Responsive university website clone.', modalTitle: 'MIT Muzaffarpur Clone', modalDesc: 'A responsive clone of the official MIT Muzaffarpur website, built using HTML, CSS (Tailwind), and JavaScript. Focused on replicating the design, layout, and key interactive elements.', modalTech: ['HTML', 'Tailwind CSS', 'JavaScript'], modalLearnings: 'Practiced complex layouts with Tailwind, implementing responsive navigation, and mimicking existing UI patterns accurately.', liveLink: 'https://hasanraiyan.github.io/MIT', repoLink: null, tags: ['Tailwind', 'JavaScript', 'Clone', 'Frontend'], initiallyHidden: false, animationDelay: 0 },
            { id: 'ttt-ai', title: 'Tic Tac Toe (vs AI)', imageSrc: './images/work-1.png', imageAlt: 'Tic Tac Toe vs AI', shortDesc: 'Play against the computer.', modalTitle: 'Tic Tac Toe (vs AI)', modalDesc: 'Classic Tic Tac Toe game where you can play against a simple computer opponent implemented with JavaScript logic. Includes win detection and game reset functionality.', modalTech: ['HTML', 'CSS', 'JavaScript'], modalLearnings: 'Implemented game logic, including win condition checks and a basic AI opponent strategy using vanilla JavaScript.', liveLink: 'https://hasanraiyan.github.io/projects/tik%20tak%20toe/index.html', repoLink: null, tags: ['JavaScript', 'Game', 'AI', 'Frontend'], initiallyHidden: false, animationDelay: 100 },
            { id: 'calculator', title: 'Web Calculator', imageSrc: './images/work-2.png', imageAlt: 'Web Calculator', shortDesc: 'Functional calculator for quick math.', modalTitle: 'Web Calculator', modalDesc: 'A functional web-based calculator built with HTML, CSS, and JavaScript. It handles basic arithmetic operations (+, -, *, /) and includes display updates and clear functionality.', modalTech: ['HTML', 'CSS', 'JavaScript'], modalLearnings: 'Focused on DOM manipulation with JavaScript to handle user input, update the display, and perform calculations.', liveLink: 'https://hasanraiyan.github.io/projects/calculator/index.html', repoLink: null, tags: ['JavaScript', 'Utility', 'Frontend'], initiallyHidden: false, animationDelay: 200 },
            { id: 'ttt-pvp', title: 'Tic Tac Toe (PvP)', imageSrc: './images/work-3.png', imageAlt: 'Tic Tac Toe PvP', shortDesc: 'Play head-to-head with a friend.', modalTitle: 'Tic Tac Toe (Player vs Player)', modalDesc: 'Play the classic Tic Tac Toe game head-to-head against another player on the same device. Simple, fun, and includes turn indicators and win detection.', modalTech: ['HTML', 'CSS', 'JavaScript'], modalLearnings: 'Refined basic game logic and state management for a two-player experience.', liveLink: 'https://hasanraiyan.github.io/TikTakToe/', repoLink: 'https://github.com/hasanraiyan/TikTakToe', tags: ['JavaScript', 'Game', 'Frontend'], initiallyHidden: true, animationDelay: 0 },
            { id: 'pm-ui', title: 'Project Management UI', imageSrc: './images/work-4.png', imageAlt: 'Project Management UI', shortDesc: 'Conceptual UI for project tracking.', modalTitle: 'Project Management UI (Concept)', modalDesc: 'A conceptual user interface design for a project management dashboard. Focuses on clean layout, component structure (cards, sidebars), and visual hierarchy using Tailwind CSS. This is primarily a design showcase.', modalTech: ['HTML', 'Tailwind CSS'], modalLearnings: 'Practiced translating UI concepts into functional HTML/CSS using Tailwind utilities for layout and styling. Focused on component-based structure.', liveLink: 'https://hasanraiyan.github.io/projects/', repoLink: null, tags: ['Tailwind', 'UI/UX', 'Design', 'Frontend'], initiallyHidden: true, animationDelay: 0 },
            { id: 'notejs', title: 'NoteJS App', imageSrc: 'https://github.com/hasanraiyan/NoteJS/raw/main/assets/images/apps/HomeScreen.png', imageAlt: 'NoteJS App Home Screen', shortDesc: 'Simple notes app built with React Native.', modalTitle: 'NoteJS - Simple Notes App', modalDesc: 'NoteJS is a basic notes application built with React Native and Expo. It allows users to create, edit, delete, and save notes locally on their device.', modalTech: ['React Native', 'Expo', 'JavaScript'], modalLearnings: 'Developed a cross-platform mobile app, implemented local data storage using AsyncStorage, managed component state for CRUD operations (Create, Read, Update, Delete).', liveLink: null, repoLink: 'https://github.com/hasanraiyan/NoteJS', tags: ['React Native', 'Mobile', 'JavaScript'], initiallyHidden: true, animationDelay: 0 },
            { id: 'dostify', title: 'Dostify AI Companion', imageSrc: 'https://dostify-climb.vercel.app/images/app-icon.png', imageAlt: 'Dostify AI Companion Landing Page', shortDesc: 'AI chatbot providing support for students.', modalTitle: 'Dostify - AI Student Companion', modalDesc: 'An AI-powered chatbot designed as a friendly companion for students, helping them navigate academic pressure, mental health challenges, and career uncertainty with personalized support, resources, and conversation starters.', modalTech: ['React', 'Next.js', 'Tailwind CSS', 'AI Integration', 'Chatbot'], modalLearnings: 'Developed an interactive chatbot interface, integrated with an AI backend (presumed), designed user journeys for various student needs (academic, mental health, career), built a responsive landing page showcasing features and benefits.', liveLink: 'https://dostify-climb.vercel.app/', repoLink: null, tags: ['React', 'Next.js', 'Tailwind', 'AI', 'Chatbot', 'Frontend'], initiallyHidden: true, animationDelay: 0 },
        ];


        // --- Function to Create Project HTML Element (Add width/height) ---
        function createProjectElement(project) {
            const workItem = document.createElement('div');
            workItem.className = `work-item group relative rounded-xl overflow-hidden shadow-lg bg-bg-surface dark:bg-dark-bg-surface transform transition-shadow duration-300 hover:shadow-xl dark:hover:shadow-dark-bg-dark/40 ${project.initiallyHidden ? 'hidden show-more-item' : ''}`; // Simplified transition

            // Data attributes
            workItem.dataset.modalTitle = project.modalTitle;
            workItem.dataset.modalDesc = project.modalDesc;
            workItem.dataset.modalTech = project.modalTech.join(', ');
            workItem.dataset.modalLearnings = project.modalLearnings || '';
            workItem.dataset.modalLive = project.liveLink || '';
            workItem.dataset.modalRepo = project.repoLink || '';
            workItem.dataset.tags = project.tags.join(',').toLowerCase();
            workItem.dataset.id = project.id;

             // Add animation attributes ONLY if not initially hidden
             if (!project.initiallyHidden) {
                 workItem.setAttribute('data-animate', ''); // Mark for scroll animation observer
                 workItem.classList.add('animate-fade-up'); // Add animation class directly
                 workItem.dataset.delay = project.animationDelay; // Apply initial animation delay
             }

            // Add Tilt attribute conditionally
            workItem.setAttribute('data-tilt', '');

            // Image - CRITICAL: Add width and height attributes
            // You might need to adjust these based on your actual image aspect ratios
            // Assuming roughly 16:9 aspect ratio for placeholder calculation
            const imgHeight = 320; // Corresponds to h-80 roughly
            const imgWidth = Math.round(imgHeight * (16/9));
            const img = document.createElement('img');
            img.src = project.imageSrc;
            img.alt = project.imageAlt;
             // Use aspect-ratio utility if possible or fixed height + object-cover
            img.className = 'w-full h-64 sm:h-72 md:h-80 object-cover transition-transform duration-300 group-hover:scale-105'; // Adjusted height, faster transform
            img.loading = 'lazy';
            img.width = imgWidth; // Add width attribute
            img.height = imgHeight; // Add height attribute
            workItem.appendChild(img);

            // Layer (Hover Effect)
            const layer = document.createElement('div');
            layer.className = 'layer';

            const glassEffect = document.createElement('div');
            glassEffect.className = 'glass-effect rounded-lg p-3 w-full transform transition-transform duration-300 delay-100 group-hover:scale-100 scale-95'; // Adjusted padding

            const title = document.createElement('h3');
            title.className = 'text-base sm:text-lg font-semibold text-white mb-1'; // Adjusted size
            title.textContent = project.title;
            glassEffect.appendChild(title);

            const shortDesc = document.createElement('p');
            shortDesc.className = 'text-xs text-gray-100 mb-2'; // Adjusted size/margin
            shortDesc.textContent = project.shortDesc;
            glassEffect.appendChild(shortDesc);

            const linksDiv = document.createElement('div');
            linksDiv.className = 'flex justify-center space-x-2'; // Adjusted space

            // Modal Button
            const modalButton = document.createElement('button');
            modalButton.onclick = () => openProjectModal(workItem);
            modalButton.setAttribute('aria-label', `View details for ${project.title}`);
            modalButton.className = 'bg-white text-primary dark:text-dark-primary rounded-full w-9 h-9 flex items-center justify-center text-base hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-200 shadow-md icon-interact'; // Adjusted size/duration
            modalButton.innerHTML = '<i class="fas fa-info"></i>';
            linksDiv.appendChild(modalButton);

            // Live Link Button
            if (project.liveLink) {
                const liveLink = document.createElement('a');
                liveLink.href = project.liveLink;
                liveLink.target = '_blank'; liveLink.rel = 'noopener noreferrer';
                liveLink.setAttribute('aria-label', `View live ${project.title}`);
                liveLink.className = 'bg-white text-primary dark:text-dark-primary rounded-full w-9 h-9 flex items-center justify-center text-base hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-200 shadow-md icon-interact';
                liveLink.innerHTML = '<i class="fas fa-external-link-alt"></i>';
                linksDiv.appendChild(liveLink);
            }
            // Repo Link Button
            if (project.repoLink) {
                const repoLink = document.createElement('a');
                repoLink.href = project.repoLink;
                repoLink.target = '_blank'; repoLink.rel = 'noopener noreferrer';
                repoLink.setAttribute('aria-label', `View ${project.title} code`);
                repoLink.className = 'bg-white text-primary dark:text-dark-primary rounded-full w-9 h-9 flex items-center justify-center text-base hover:bg-accent hover:text-white dark:hover:bg-dark-accent transition-all duration-200 shadow-md icon-interact';
                repoLink.innerHTML = '<i class="fab fa-github"></i>';
                linksDiv.appendChild(repoLink);
            }

            glassEffect.appendChild(linksDiv);
            layer.appendChild(glassEffect);
            workItem.appendChild(layer);

            return workItem;
        }

        // --- Function to Render Portfolio (Optimized with DocumentFragment) ---
        function renderPortfolio(projects, containerElement) {
            if (!containerElement) { console.error("Portfolio container not found!"); return; }
            containerElement.innerHTML = ''; // Clear existing content

            // Use a DocumentFragment to minimize DOM manipulations
            const fragment = document.createDocumentFragment();
            projects.forEach(project => {
                const projectElement = createProjectElement(project);
                fragment.appendChild(projectElement);
            });

            containerElement.appendChild(fragment); // Append all elements at once
        }

        // --- Function to Generate Filter Buttons (Keep as is) ---
        function generateFilterButtons(projects, containerElement) { /* ... Your existing generateFilterButtons function ... */
             if (!containerElement) return;
             const allTags = new Set(['All']);
             projects.forEach(p => p.tags.forEach(tag => { const titleCaseTag = tag.charAt(0).toUpperCase() + tag.slice(1).toLowerCase(); allTags.add(titleCaseTag) }));
             containerElement.innerHTML = '';
             allTags.forEach(tag => {
                 const button = document.createElement('button');
                 const filterValue = tag.toLowerCase();
                 button.className = 'filter-btn px-3 py-1 rounded-full text-xs font-medium text-text-light dark:text-dark-text-light hover:bg-gray-100 dark:hover:bg-dark-bg-surface transition'; // Adjusted size
                 button.dataset.filter = filterValue;
                 button.textContent = tag;
                 if (tag === 'All') {
                     button.classList.add('active', 'bg-primary/10', 'dark:bg-dark-primary/10', 'text-primary', 'dark:text-dark-primary', 'font-semibold');
                     button.classList.remove('text-text-light', 'dark:text-dark-text-light', 'hover:bg-gray-100', 'dark:hover:bg-dark-bg-surface');
                 }
                 button.addEventListener('click', () => { filterPortfolio(filterValue); });
                 containerElement.appendChild(button);
             });
        }

        // --- DOM Element Cache (Keep as is) ---
        const Cache = { /* ... Your existing Cache object ... */
            htmlElement: document.documentElement,
            preloader: document.getElementById('preloader'),
            sidemenu: document.getElementById("sidemenu"),
            siteHeader: document.getElementById("site-header"),
            backToTopButton: document.getElementById('back-to-top'),
            contactForm: document.getElementById('contact-form'),
            formMsg: document.getElementById('msg'),
            submitButton: document.querySelector('#contact-form button[type="submit"]'),
            submitButtonText: document.querySelector('#contact-form .submit-text'),
            submitButtonIcon: document.querySelector('#contact-form .submit-icon'),
            loadingSpinner: document.querySelector('#contact-form .loading-spinner'),
            tabLinks: document.querySelectorAll(".tab-links"),
            tabContents: document.querySelectorAll(".tab-contents"),
            navLinks: document.querySelectorAll('#main-nav ul:not(#sidemenu) .nav-link'),
            mobileMenuButton: document.querySelector('.icon-menu'),
            mobileMenuCloseButton: document.querySelector('#sidemenu .icon-close'),
            themeToggleButtons: document.querySelectorAll('#theme-toggle, #theme-toggle-mobile'),
            themeToggleDarkIcons: document.querySelectorAll('#theme-toggle-dark-icon, #theme-toggle-dark-icon-mobile'),
            themeToggleLightIcons: document.querySelectorAll('#theme-toggle-light-icon, #theme-toggle-light-icon-mobile'),
            portfolioList: document.getElementById('portfolio-work-list'),
            portfolioFilters: document.getElementById('portfolio-filters'),
            portfolioMoreBtn: document.getElementById('more-btn'),
            portfolioLessBtn: document.getElementById('less-btn'),
            projectModal: document.getElementById('project-modal'),
            modalOverlay: document.getElementById('project-modal'),
            modalContent: document.querySelector('#project-modal .modal-content'),
            modalTitle: document.getElementById('modal-title'),
            modalDesc: document.getElementById('modal-desc'),
            modalTech: document.getElementById('modal-tech'),
            modalLearningsContainer: document.getElementById('modal-learnings-container'),
            modalLinks: document.getElementById('modal-links'),
            modalCloseButton: document.getElementById('modal-close-button'),
            skillsHiddenWrapper: document.getElementById('skills-list-hidden'),
            educationHiddenWrapper: document.getElementById('education-list-hidden'),
            skillsMoreBtn: document.getElementById('more-skills-btn'),
            skillsLessBtn: document.getElementById('less-skills-btn'),
            educationMoreBtn: document.getElementById('more-Education-btn'),
            educationLessBtn: document.getElementById('less-Education-btn'),
            copyEmailBtn: document.getElementById('copy-email-btn'),
            emailAddressSpan: document.getElementById('email-address'),
            copyFeedbackSpan: document.getElementById('copy-feedback'),
        };

        // --- State Variables (Keep as is) ---
        let isModalOpen = false;
        let focusedElementBeforeModal = null;
        let currentPortfolioFilter = 'all';
        let portfolioShowAll = false;

        // --- Utility Functions (Keep as is) ---
        function debounce(func, wait) { /* ... */
            let timeout; return function executedFunction(...args) { const later = () => { clearTimeout(timeout); func(...args); }; clearTimeout(timeout); timeout = setTimeout(later, wait); };
        }

        // --- Theme Management (Keep as is) ---
        function updateThemeUI(isDarkMode) { /* ... */
            Cache.themeToggleDarkIcons.forEach(icon => icon.classList.toggle('hidden', !isDarkMode)); Cache.themeToggleLightIcons.forEach(icon => icon.classList.toggle('hidden', isDarkMode)); Cache.themeToggleButtons.forEach(button => button.setAttribute('aria-pressed', isDarkMode.toString()));
         }
        function applyTheme(isDarkMode) { /* ... */
             Cache.htmlElement.classList.toggle('dark', isDarkMode); localStorage.theme = isDarkMode ? 'dark' : 'light'; updateThemeUI(isDarkMode);
         }
        function toggleTheme() { /* ... */
             const isCurrentlyDark = Cache.htmlElement.classList.contains('dark'); applyTheme(!isCurrentlyDark);
         }
        function initializeTheme() { /* ... */
             const isDarkMode = localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches); Cache.htmlElement.classList.toggle('dark', isDarkMode); updateThemeUI(isDarkMode); Cache.themeToggleButtons.forEach(btn => btn.addEventListener('click', toggleTheme));
         }

        // --- Tabbed Interface (Keep as is) ---
        function opentab(event, tabpanelId) { /* ... Your existing opentab function ... */
            const targetPanel = document.getElementById(tabpanelId); if (!targetPanel) return;
            Cache.tabLinks.forEach(tablink => { const isSelected = tablink === event.currentTarget; tablink.classList.toggle("active-link", isSelected); tablink.setAttribute('aria-selected', isSelected.toString()); tablink.setAttribute('tabindex', isSelected ? '0' : '-1'); });
            Cache.tabContents.forEach(tabcontent => { const isTargetPanel = tabcontent.id === tabpanelId; tabcontent.classList.toggle("active-tab", isTargetPanel); tabcontent.classList.toggle("hidden", !isTargetPanel); tabcontent.setAttribute('aria-hidden', (!isTargetPanel).toString()); });
            if (event.type === 'keydown' && (event.key === 'Enter' || event.key === ' ')) { event.currentTarget.focus(); }
        }

        // --- Mobile Menu (Keep as is) ---
        function openmenu() { /* ... */
             if (!Cache.sidemenu) return; Cache.sidemenu.classList.remove('translate-x-full'); Cache.sidemenu.classList.add('translate-x-0'); Cache.sidemenu.setAttribute('aria-hidden', 'false'); Cache.mobileMenuButton?.setAttribute('aria-expanded', 'true'); document.body.style.overflow = 'hidden'; trapFocus(Cache.sidemenu);
         }
        function closemenu() { /* ... */
             if (!Cache.sidemenu) return; Cache.sidemenu.classList.remove('translate-x-0'); Cache.sidemenu.classList.add('translate-x-full'); Cache.sidemenu.setAttribute('aria-hidden', 'true'); Cache.mobileMenuButton?.setAttribute('aria-expanded', 'false'); document.body.style.overflow = ''; releaseFocus(Cache.sidemenu); Cache.mobileMenuButton?.focus();
         }

        // --- Contact Form Submission (Keep as is - Uses Netlify Fetch) ---
        function showFeedback(message, isError = false) { /* ... */
            if (!Cache.formMsg) return; Cache.formMsg.textContent = message; Cache.formMsg.className = `mt-4 p-3 rounded-md text-center font-medium text-xs transition-all duration-300 opacity-100 transform translate-y-0 ${isError ? 'bg-red-100 border border-red-300 text-red-800 dark:bg-red-900/30 dark:border-red-700 dark:text-red-300' : 'bg-green-100 border border-green-300 text-green-800 dark:bg-green-900/30 dark:border-green-700 dark:text-green-300'}`; Cache.formMsg.style.visibility = 'visible'; Cache.formMsg.setAttribute('aria-hidden', 'false');
         }
        function hideFeedback() { /* ... */
             if (!Cache.formMsg) return; Cache.formMsg.textContent = ''; Cache.formMsg.className = 'mt-4 p-3 rounded-md text-center font-medium text-xs transition-all duration-300 opacity-0 transform translate-y-2'; Cache.formMsg.style.visibility = 'hidden'; Cache.formMsg.setAttribute('aria-hidden', 'true');
         }
        function setLoading(isLoading) { /* ... */
            if (!Cache.submitButton || !Cache.submitButtonText || !Cache.submitButtonIcon || !Cache.loadingSpinner || !Cache.contactForm) return;
            Cache.submitButton.disabled = isLoading; Cache.contactForm.setAttribute('aria-busy', isLoading.toString());
            const opacity = isLoading ? '0' : '1'; const visibility = isLoading ? 'hidden' : 'visible'; const spinnerOpacity = isLoading ? '1' : '0'; const spinnerEvents = isLoading ? 'auto' : 'none';
            Cache.submitButtonText.style.opacity = opacity; Cache.submitButtonIcon.style.opacity = opacity; Cache.submitButtonText.style.visibility = visibility; Cache.submitButtonIcon.style.visibility = visibility;
            Cache.loadingSpinner.style.opacity = spinnerOpacity; Cache.loadingSpinner.style.pointerEvents = spinnerEvents;
            if (isLoading) hideFeedback();
        }
        async function handleFormSubmit(e) { /* ... Your existing handleFormSubmit using fetch for Netlify ... */
            e.preventDefault(); if (!Cache.contactForm) return;
            if (!Cache.contactForm.checkValidity()) { showFeedback('Please fill out all required fields correctly.', true); Cache.contactForm.querySelector(':invalid')?.focus(); return; }
            setLoading(true); const formData = new FormData(Cache.contactForm); const formAction = Cache.contactForm.getAttribute('action') || '/';
            fetch(formAction, { method: "POST", headers: { "Accept": "application/x-www-form-urlencoded" }, body: new URLSearchParams(formData).toString(), })
            .then(() => { showFeedback('Thank you! Message sent.'); Cache.contactForm.reset(); setTimeout(hideFeedback, 5000); })
            .catch((error) => { console.error('Form submission error:', error); showFeedback('Problem sending message. Please try again.', true); })
            .finally(() => { setLoading(false); });
        }

        // --- Show More/Less (Generic - Keep as is) ---
        function setupToggle(wrapper, itemSelector, moreBtn, lessBtn, initialVisibleCount) { /* ... Your existing setupToggle function ... */
             if (!wrapper || !moreBtn || !lessBtn) { return; }
             const items = Array.from(wrapper.querySelectorAll(`:scope > ${itemSelector}`)); const totalItems = items.length;
             if (totalItems <= initialVisibleCount) { items.forEach(item => item.classList.remove('hidden')); moreBtn.classList.add('hidden'); lessBtn.classList.add('hidden'); return; }
             const wrapperId = wrapper.id; if (wrapperId) { moreBtn.setAttribute('aria-controls', wrapperId); lessBtn.setAttribute('aria-controls', wrapperId); }
             const updateVisibility = (showAll) => {
                 const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                 items.forEach((item, index) => {
                     const shouldBeHidden = index >= initialVisibleCount && !showAll;
                     if (!shouldBeHidden && item.classList.contains('hidden')) {
                         item.classList.remove('hidden');
                         if (!prefersReducedMotion && item.classList.contains('show-more-item')) {
                             item.classList.add('animate-in'); item.style.animationDelay = `${(index - initialVisibleCount) * SHOW_MORE_STAGGER}ms`;
                             item.addEventListener('animationend', () => { item.classList.remove('animate-in'); item.style.animationDelay = ''; }, { once: true });
                         } else { item.style.opacity = '1'; item.style.transform = 'translateY(0)'; }
                     } else if (shouldBeHidden && !item.classList.contains('hidden')) {
                         item.classList.add('hidden'); item.classList.remove('animate-in'); item.style.animationDelay = ''; item.style.opacity = ''; item.style.transform = '';
                     }
                 });
                 moreBtn.classList.toggle('hidden', showAll); lessBtn.classList.toggle('hidden', !showAll); moreBtn.setAttribute('aria-expanded', showAll.toString()); lessBtn.setAttribute('aria-expanded', showAll.toString());
                 if (!showAll && document.activeElement === lessBtn) { setTimeout(() => moreBtn.focus({ preventScroll: true }), 50); }
             };
             items.forEach((item, index) => item.classList.toggle('hidden', index >= initialVisibleCount));
             moreBtn.classList.remove('hidden'); lessBtn.classList.add('hidden'); moreBtn.setAttribute('aria-expanded', 'false'); lessBtn.setAttribute('aria-expanded', 'false');
             moreBtn.onclick = () => updateVisibility(true); lessBtn.onclick = () => updateVisibility(false);
        }

        // --- Portfolio Show/Less Visibility Logic (Keep as is) ---
        function applyPortfolioShowMoreVisibility() { /* ... Your existing applyPortfolioShowMoreVisibility function ... */
            if (!Cache.portfolioList || !Cache.portfolioMoreBtn || !Cache.portfolioLessBtn) return;
            const visibleItems = Array.from(Cache.portfolioList.querySelectorAll('.work-item:not(.hidden)'));
            const totalVisibleItems = visibleItems.length; const numberToShow = portfolioShowAll ? Infinity : PORTFOLIO_INITIAL_VISIBLE_COUNT;
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            visibleItems.forEach((item, index) => {
                const shouldBeHiddenByShowLess = index >= numberToShow;
                if (shouldBeHiddenByShowLess) {
                    item.classList.add('show-more-item-hidden'); item.style.opacity = '0'; item.style.transform = 'translateY(10px)'; item.classList.remove('animate-in'); item.style.animationDelay = ''; item.setAttribute('aria-hidden', 'true');
                } else {
                    const wasHiddenByShowLess = item.classList.contains('show-more-item-hidden'); item.classList.remove('show-more-item-hidden'); item.removeAttribute('aria-hidden');
                    if (wasHiddenByShowLess && item.classList.contains('show-more-item') && !prefersReducedMotion) {
                        item.style.opacity = '0'; item.style.transform = 'translateY(10px)'; void item.offsetWidth; item.classList.add('animate-in'); item.style.animationDelay = `${(index - PORTFOLIO_INITIAL_VISIBLE_COUNT) * SHOW_MORE_STAGGER}ms`;
                        item.addEventListener('animationend', () => { item.classList.remove('animate-in'); item.style.opacity = ''; item.style.transform = ''; item.style.animationDelay = ''; }, { once: true });
                    } else { item.style.opacity = '1'; item.style.transform = 'translateY(0)'; }
                }
            });
            const canShowMore = totalVisibleItems > PORTFOLIO_INITIAL_VISIBLE_COUNT;
            Cache.portfolioMoreBtn.classList.toggle('hidden', portfolioShowAll || !canShowMore); Cache.portfolioLessBtn.classList.toggle('hidden', !portfolioShowAll || !canShowMore);
            Cache.portfolioMoreBtn.setAttribute('aria-expanded', portfolioShowAll.toString()); Cache.portfolioLessBtn.setAttribute('aria-expanded', portfolioShowAll.toString());
            Cache.portfolioMoreBtn.style.pointerEvents = (portfolioShowAll || !canShowMore) ? 'none' : 'auto'; Cache.portfolioLessBtn.style.pointerEvents = (!portfolioShowAll || !canShowMore) ? 'none' : 'auto';
         }

        // --- Portfolio Filtering Logic (Keep as is) ---
        function filterPortfolio(filter) { /* ... Your existing filterPortfolio function ... */
            if (!Cache.portfolioList || !Cache.portfolioFilters) return; currentPortfolioFilter = filter.toLowerCase();
            const workItems = Cache.portfolioList.querySelectorAll('.work-item'); const filterButtons = Cache.portfolioFilters.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                const isActive = btn.dataset.filter === currentPortfolioFilter; btn.classList.toggle('active', isActive); btn.classList.toggle('bg-primary/10', isActive); btn.classList.toggle('dark:bg-dark-primary/10', isActive); btn.classList.toggle('text-primary', isActive); btn.classList.toggle('dark:text-dark-primary', isActive); btn.classList.toggle('font-semibold', isActive); btn.classList.toggle('text-text-light', !isActive); btn.classList.toggle('dark:text-dark-text-light', !isActive); btn.classList.toggle('hover:bg-gray-100', !isActive); btn.classList.toggle('dark:hover:bg-dark-bg-surface', !isActive);
            });
            workItems.forEach(item => {
                const tags = item.dataset.tags?.split(',') || []; const match = currentPortfolioFilter === 'all' || tags.includes(currentPortfolioFilter);
                item.classList.remove('show-more-item-hidden'); item.removeAttribute('aria-hidden'); item.classList.toggle('hidden', !match);
                if (match) { item.style.opacity = '1'; item.style.transform = 'scale(1)'; item.style.pointerEvents = 'auto'; } else { item.style.opacity = '0'; item.style.transform = 'scale(0.95)'; item.style.pointerEvents = 'none'; }
                item.classList.remove('animate-in'); item.style.animationDelay = '';
            });
            portfolioShowAll = false; applyPortfolioShowMoreVisibility();
        }

        // --- Accessibility: Focus Trapping (Keep as is) ---
        function trapFocus(element) { /* ... */
             if (!element) return; const focusableEls = Array.from(element.querySelectorAll(FOCUSABLE_MODAL_ELEMENTS)).filter(el => el.offsetParent !== null); if (focusableEls.length === 0) { const closeButton = element.querySelector('.icon-close, #modal-close-button'); if (closeButton) { try { closeButton.focus(); } catch (e) {} } else if (element.hasAttribute('tabindex')) { try { element.focus(); } catch (e) {} } return; } const firstFocusableEl = focusableEls[0]; const lastFocusableEl = focusableEls[focusableEls.length - 1]; try { firstFocusableEl.focus({ preventScroll: true }); } catch (e) {} const handleKeyDown = (e) => { if (e.key !== 'Tab') return; const currentFocusableEls = Array.from(element.querySelectorAll(FOCUSABLE_MODAL_ELEMENTS)).filter(el => el.offsetParent !== null); if (currentFocusableEls.length === 0) { e.preventDefault(); return; } const currentFirst = currentFocusableEls[0]; const currentLast = currentFocusableEls[currentFocusableEls.length - 1]; const currentlyFocused = document.activeElement; if (e.shiftKey) { if (currentlyFocused === currentFirst || !element.contains(currentlyFocused)) { e.preventDefault(); try { currentLast.focus({ preventScroll: true }); } catch (e) {} } } else { if (currentlyFocused === currentLast || !element.contains(currentlyFocused)) { e.preventDefault(); try { currentFirst.focus({ preventScroll: true }); } catch (e) {} } } }; element.focusTrapHandler = handleKeyDown; element.addEventListener('keydown', element.focusTrapHandler);
         }
        function releaseFocus(element = Cache.projectModal) { /* ... */
             if (!element || typeof element.focusTrapHandler !== 'function') return; element.removeEventListener('keydown', element.focusTrapHandler); delete element.focusTrapHandler; if (focusedElementBeforeModal) { try { focusedElementBeforeModal.focus({ preventScroll: true }); } catch (e) {} focusedElementBeforeModal = null; }
         }

        // --- Project Modal Logic (Keep as is) ---
        function openProjectModal(workItemElement) { /* ... */
             if (!workItemElement || !Cache.modalOverlay || !Cache.modalContent || !Cache.modalTitle || !Cache.modalDesc || !Cache.modalTech || !Cache.modalLinks || !Cache.modalLearningsContainer || !Cache.modalCloseButton) { console.error("Modal elements not found or work item invalid."); return; }
             Cache.modalTitle.textContent = workItemElement.dataset.modalTitle || 'Project Details'; Cache.modalDesc.textContent = workItemElement.dataset.modalDesc || 'No description.'; Cache.modalTech.textContent = workItemElement.dataset.modalTech || 'N/A';
             Cache.modalLearningsContainer.innerHTML = ''; const learnings = workItemElement.dataset.modalLearnings; if (learnings) { Cache.modalLearningsContainer.innerHTML = `<strong class="text-text-main dark:text-dark-text-main font-medium block mb-1 text-sm">Key Learnings:</strong><p class="text-xs text-text-light dark:text-dark-text-light leading-relaxed">${learnings}</p>`; }
             Cache.modalLinks.innerHTML = ''; const liveLink = workItemElement.dataset.modalLive; const repoLink = workItemElement.dataset.modalRepo;
             if (liveLink) Cache.modalLinks.innerHTML += `<a href="${liveLink}" target="_blank" rel="noopener noreferrer" class="btn btn-primary text-xs px-3 py-1.5"><i class="fas fa-external-link-alt mr-1"></i> Live</a>`; // Smaller buttons
             if (repoLink) Cache.modalLinks.innerHTML += `<a href="${repoLink}" target="_blank" rel="noopener noreferrer" class="btn btn-secondary text-xs px-3 py-1.5"><i class="fab fa-github mr-1"></i> Code</a>`;
             if (!liveLink && !repoLink) Cache.modalLinks.innerHTML = '<p class="text-xs text-text-light dark:text-dark-text-light italic">No links.</p>';
             focusedElementBeforeModal = document.activeElement; Cache.modalOverlay.classList.add('active'); Cache.modalOverlay.setAttribute('aria-hidden', 'false'); isModalOpen = true; document.body.style.overflow = 'hidden';
             setTimeout(() => { trapFocus(Cache.modalContent); const firstFocusable = Cache.modalContent.querySelector(FOCUSABLE_MODAL_ELEMENTS); try { (firstFocusable || Cache.modalCloseButton || Cache.modalContent).focus({ preventScroll: true }); } catch (e) {} }, 50);
         }
        function closeProjectModal() { /* ... */
             if (!Cache.modalOverlay || !isModalOpen) return; Cache.modalOverlay.classList.remove('active'); Cache.modalOverlay.setAttribute('aria-hidden', 'true'); isModalOpen = false; document.body.style.overflow = ''; releaseFocus(Cache.modalContent);
         }

        // --- Footer & Scrolling (Keep as is) ---
        function setFooterYear() { /* ... */
             const currentYearSpan = document.getElementById('current-year'); if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
         }
        function smoothScrollTo(targetElement) { /* ... */
             const headerOffset = Cache.siteHeader?.offsetHeight ?? SCROLL_OFFSET; const elementPosition = targetElement.getBoundingClientRect().top; const offsetPosition = elementPosition + window.pageYOffset - headerOffset - 15; window.scrollTo({ top: offsetPosition, behavior: "smooth" });
         }
        function updateActiveNavLink() { /* ... */
            let currentSectionId = ''; const sections = document.querySelectorAll('main section[id]'); const scrollY = window.pageYOffset; const viewportHeight = window.innerHeight; const docHeight = document.documentElement.scrollHeight;
            sections.forEach(section => { const sectionTop = section.offsetTop - SCROLL_OFFSET - 50; const sectionHeight = section.offsetHeight; if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) { currentSectionId = section.id; } });
            if (scrollY + viewportHeight >= docHeight - 100) { const lastSection = sections[sections.length - 1]; if (lastSection) currentSectionId = lastSection.id; } else if (currentSectionId === '' && scrollY < (sections[0]?.offsetTop ?? 0)) { currentSectionId = 'hero'; } else if (currentSectionId === '' && sections.length > 0) { currentSectionId = 'hero'; }
            Cache.navLinks.forEach(link => { const linkHrefHash = link.getAttribute('href'); const isActive = linkHrefHash === `#${currentSectionId}`; link.classList.toggle('active-nav', isActive); link.classList.toggle('text-primary', isActive); link.classList.toggle('dark:text-dark-primary', isActive); link.classList.toggle('font-semibold', isActive); link.classList.toggle('text-text-main', !isActive); link.classList.toggle('dark:text-dark-text-light', !isActive); link.classList.toggle('font-medium', !isActive); link.setAttribute('aria-current', isActive ? 'page' : null); });
        }
        const debouncedUpdateActiveNav = debounce(updateActiveNavLink, 150); // Slightly increased debounce time
        function handleScroll() { /* ... */
             const scrollPosition = window.scrollY; Cache.siteHeader?.classList.toggle('shadow-lg', scrollPosition > 50); Cache.siteHeader?.classList.toggle('glass-effect', scrollPosition > 50);
             if (Cache.backToTopButton) { const isVisible = scrollPosition > 300; Cache.backToTopButton.style.opacity = isVisible ? '1' : '0'; Cache.backToTopButton.style.transform = isVisible ? 'translateY(0)' : 'translateY(1rem)'; Cache.backToTopButton.style.pointerEvents = isVisible ? 'auto' : 'none'; Cache.backToTopButton.setAttribute('aria-hidden', (!isVisible).toString()); }
             debouncedUpdateActiveNav();
         }
        function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

        // --- Scroll Animations (Keep observer setup) ---
        let animationObserver;
        function setupScrollAnimations() { /* ... Your existing setupScrollAnimations function ... */
             const animatedElements = document.querySelectorAll('[data-animate]'); const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
             if (!('IntersectionObserver' in window)) { animatedElements.forEach(el => el.classList.add('is-visible', 'opacity-100')); return; }
             if (animationObserver) animationObserver.disconnect();
             if (prefersReducedMotion) { animatedElements.forEach(el => { el.classList.add('is-visible', 'opacity-100'); el.style.transition = 'none'; el.style.transform = 'translate(0, 0)'; }); return; }
             animationObserver = new IntersectionObserver((entries) => {
                 entries.forEach(entry => {
                     if (entry.isIntersecting) {
                         const delay = parseInt(entry.target.dataset.delay || '0', 10); entry.target.style.transitionDelay = `${delay}ms`; entry.target.classList.add('is-visible');
                         // Apply animation class specified in data attribute or default
                         const animClass = entry.target.dataset.animateClass || 'animate-fade-up'; // Default to fade-up
                         entry.target.classList.add(animClass);
                         animationObserver.unobserve(entry.target);
                     }
                 });
             }, { rootMargin: '0px 0px -50px 0px', threshold: 0.1 });
             animatedElements.forEach(el => { if (!el.classList.contains('is-visible')) { animationObserver.observe(el); } });
        }

        // --- Contact Info Helpers (Keep as is) ---
        function copyEmailToClipboard() { /* ... */
            const email = Cache.emailAddressSpan?.textContent; if (!email || !navigator.clipboard) { alert('Failed to copy email.'); return; }
            navigator.clipboard.writeText(email).then(() => { if (Cache.copyFeedbackSpan) { Cache.copyFeedbackSpan.style.opacity = '1'; Cache.copyFeedbackSpan.setAttribute('aria-hidden', 'false'); setTimeout(() => { Cache.copyFeedbackSpan.style.opacity = '0'; Cache.copyFeedbackSpan.setAttribute('aria-hidden', 'true'); }, 1500); } }).catch(err => { console.error('Could not copy text: ', err); alert('Failed to copy email.'); });
         }

        // --- Event Listener Setup (Keep as is) ---
        function addEventListeners() { /* ... Your existing addEventListeners function ... */
            Cache.mobileMenuButton?.addEventListener('click', openmenu); Cache.mobileMenuCloseButton?.addEventListener('click', closemenu); Cache.sidemenu?.querySelectorAll('a[href^="#"]').forEach(link => link.addEventListener('click', closemenu));
            Cache.tabLinks.forEach(link => { link.addEventListener('click', (e) => opentab(e, link.getAttribute('aria-controls'))); link.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); opentab(e, link.getAttribute('aria-controls')); }}); });
            Cache.contactForm?.addEventListener('submit', handleFormSubmit);
            document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { const targetId = this.hash; if (this.classList.contains('skip-link') || !targetId || targetId === '#') return; const targetElement = document.querySelector(targetId); if (targetElement) { e.preventDefault(); smoothScrollTo(targetElement); setTimeout(() => { targetElement.setAttribute('tabindex', '-1'); try { targetElement.focus({ preventScroll: true }); } catch (e) {} }, 600); } }); });
            Cache.backToTopButton?.addEventListener('click', scrollToTop);
            Cache.modalCloseButton?.addEventListener('click', closeProjectModal); Cache.modalOverlay?.addEventListener('click', (e) => { if (e.target === Cache.modalOverlay) closeProjectModal(); }); document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && isModalOpen) closeProjectModal(); });
            Cache.copyEmailBtn?.addEventListener('click', copyEmailToClipboard);
            Cache.portfolioMoreBtn?.addEventListener('click', () => { portfolioShowAll = true; applyPortfolioShowMoreVisibility(); const firstNewItem = Cache.portfolioList.querySelector(`.work-item:not(.hidden):not(.show-more-item-hidden):nth-child(${PORTFOLIO_INITIAL_VISIBLE_COUNT + 1})`); try { firstNewItem?.focus({ preventScroll: true }); } catch(e) {} });
            Cache.portfolioLessBtn?.addEventListener('click', () => { portfolioShowAll = false; applyPortfolioShowMoreVisibility(); try { Cache.portfolioMoreBtn?.focus({ preventScroll: true }); } catch(e) {} const controlsTop = Cache.portfolioMoreBtn?.getBoundingClientRect().top + window.pageYOffset - (Cache.siteHeader?.offsetHeight || SCROLL_OFFSET) - 30; if (Cache.portfolioMoreBtn?.getBoundingClientRect().top > (Cache.siteHeader?.offsetHeight || SCROLL_OFFSET)) { window.scrollTo({ top: controlsTop, behavior: 'smooth' }); } });
            window.addEventListener('scroll', handleScroll, { passive: true });
         }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM Loaded - Initializing Portfolio v3.7 (Optimized)...");
            initializeTheme();
            setFooterYear();

            // Render Portfolio & Filters
            renderPortfolio(portfolioData, Cache.portfolioList);
            generateFilterButtons(portfolioData, Cache.portfolioFilters);

            // Setup About Toggles
            setupToggle(Cache.skillsHiddenWrapper, "li", Cache.skillsMoreBtn, Cache.skillsLessBtn, 2); // Show 2 skills initially
            setupToggle(Cache.educationHiddenWrapper, "li", Cache.educationMoreBtn, Cache.educationLessBtn, 2); // Show 2 edu initially

            // Apply initial portfolio visibility
            applyPortfolioShowMoreVisibility();

            // Initialize Typed.js
            if (typeof Typed !== 'undefined' && document.getElementById('typed-output')) {
                 new Typed('#typed-output', { strings: ['from MIT Muzaffarpur.', 'a MERN Stack Developer.', 'a Problem Solver.', 'Passionate about Code.'], typeSpeed: 55, backSpeed: 35, backDelay: 1600, loop: true, smartBackspace: true, cursorChar: '_', }); // Slightly adjusted speeds
            } else { /* Fallback */ const t = document.getElementById('typed-output'); if(t) t.textContent="from MIT Muzaffarpur."; }

            // Initialize Vanilla-Tilt.js (Conditionally)
             const workItemsForTilt = Cache.portfolioList?.querySelectorAll('.work-item[data-tilt]');
             if (workItemsForTilt && workItemsForTilt.length > 0 && typeof VanillaTilt !== 'undefined') {
                const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                if (!prefersReducedMotion) { // Only init if motion is OK
                    try { // Add try-catch for safety
                         VanillaTilt.init(workItemsForTilt, { max: 5, speed: 300, glare: true, "max-glare": 0.1 }); // Reduced intensity
                    } catch(e) { console.error("Vanilla Tilt initialization failed:", e); }
                } else { console.log("Tilt effect disabled due to reduced motion preference."); }
             } else if (typeof VanillaTilt === 'undefined') { /* console.warn("Vanilla-Tilt.js not loaded."); */ }

            // Setup animations and listeners AFTER elements are rendered
            setupScrollAnimations();
            addEventListeners();

            // Initial state calls
            handleScroll();
            updateActiveNavLink();
            const activeTabButton = document.querySelector('.tab-links.active-link'); if (activeTabButton) { const initialPanelId = activeTabButton.getAttribute('aria-controls'); Cache.tabContents.forEach(panel => { const isInitial = panel.id === initialPanelId; panel.classList.toggle('hidden', !isInitial); panel.classList.toggle('active-tab', isInitial); panel.setAttribute('aria-hidden', (!isInitial).toString()); }); }
        });

        // Preloader Hiding
        window.addEventListener('load', () => {
            // Use requestAnimationFrame for smoother transition start
            requestAnimationFrame(() => {
                if (Cache.preloader) {
                     Cache.preloader.classList.add('loaded');
                     Cache.preloader.addEventListener('transitionend', () => Cache.preloader?.remove(), { once: true });
                 }
            });
        });

    </script>

</body>
</html>
